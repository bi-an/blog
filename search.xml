<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>cppä¸­boolå’Œintçš„æ¯”è¾ƒ</title>
      <link href="/blog/2024/09/17/cplusplus/cpp%E4%B8%ADbool%E5%92%8Cint%E7%9A%84%E6%AF%94%E8%BE%83/"/>
      <url>/blog/2024/09/17/cplusplus/cpp%E4%B8%ADbool%E5%92%8Cint%E7%9A%84%E6%AF%94%E8%BE%83/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æµ‹è¯•leetcodeçš„ <a href="https://leetcode.cn/problems/bus-routes/description/">815.å…¬äº¤è·¯çº¿</a> ä¸€é¢˜æ—¶ï¼Œå‘ç°ä¸€ä¸ªç°è±¡ï¼Œå½“æˆ‘ä½¿ç”¨<code>vector&lt;vector&lt;bool&gt;&gt;</code>ä½œä¸ºå›¾çš„é‚»æ¥çŸ©é˜µçš„ç±»å‹æ—¶ï¼Œè¿è¡Œé€Ÿåº¦æ¯”ä½¿ç”¨<code>vector&lt;vector&lt;int&gt;&gt;</code>æ…¢äº†è¿‘1å€ã€‚ä½¿ç”¨<code>bool</code>è¿è¡Œé€Ÿåº¦ä¸º600mså·¦å³ï¼Œä½¿ç”¨<code>int</code>æ—¶è¿è¡Œé€Ÿåº¦ä¸º300mså·¦å³ã€‚</p><p>ä»¥ä¸‹æ˜¯ChatGPTçš„å›ç­”ï¼š</p><p>åœ¨C++ä¸­ï¼Œboolç±»å‹å¹¶ä¸ä¸€å®šæ¯”intç±»å‹æ…¢ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå®ƒä»¬çš„æ€§èƒ½è¡¨ç°å¯èƒ½æœ‰æ‰€ä¸åŒã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¸æ€§èƒ½å·®å¼‚ç›¸å…³çš„è€ƒè™‘ï¼š</p><ol><li>å†…å­˜å¤§å°<br>boolç±»å‹åœ¨æ ‡å‡†ä¸­åªéœ€è¦è¡¨ç¤º trueï¼ˆé0ï¼‰å’Œ falseï¼ˆ0ï¼‰ï¼Œé€šå¸¸å ç”¨1ä¸ªå­—èŠ‚ï¼ˆ8ä½ï¼‰ï¼Œè€Œ int é€šå¸¸å ç”¨4ä¸ªå­—èŠ‚ï¼ˆ32ä½ï¼‰ã€‚å› æ­¤ï¼Œboolç±»å‹å¯ä»¥èŠ‚çœå†…å­˜ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ä¼šå¸¦æ¥ç¼“å­˜æ•ˆç‡çš„æå‡ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§é‡å¸ƒå°”å€¼æ—¶ï¼ˆä¾‹å¦‚å¸ƒå°”æ•°ç»„ï¼‰ã€‚</li><li>å¯¹é½å’Œå†…å­˜è®¿é—®<br>åœ¨æŸäº›æ¶æ„ä¸Šï¼Œå¤„ç†å•å­—èŠ‚çš„boolç±»å‹æ—¶ï¼Œå¯èƒ½ä¼šæœ‰é¢å¤–çš„å¼€é”€ï¼Œå› ä¸ºå¤„ç†å™¨é€šå¸¸ä¼˜åŒ–å¯¹é½è®¿é—®ã€‚å¦‚æœå†…å­˜æ²¡æœ‰æ­£ç¡®å¯¹é½ï¼Œå¤„ç†å™¨å¯èƒ½éœ€è¦é¢å¤–çš„æ“ä½œæ¥å¤„ç†éå¯¹é½çš„å­—èŠ‚ï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œintçš„å¯¹é½é€šå¸¸ä¸ç³»ç»Ÿçš„å†…å­˜æ€»çº¿å¯¹é½æ›´å¥½ï¼ˆå¦‚32ä½æˆ–64ä½ç³»ç»Ÿä¸Šï¼‰ï¼Œå› æ­¤è¯»å–å’Œå†™å…¥å¯èƒ½æ›´é«˜æ•ˆã€‚</li><li>æŒ‡ä»¤é›†å’Œæ“ä½œ<br>ç°ä»£å¤„ç†å™¨åœ¨å¤„ç†å¸ƒå°”å€¼æ—¶é€šå¸¸ä¼šå°†å…¶æ‰©å±•ä¸ºå®Œæ•´çš„å¯„å­˜å™¨å¤§å°ï¼ˆä¾‹å¦‚32ä½æˆ–64ä½ï¼‰ã€‚å› æ­¤ï¼Œè™½ç„¶boolç±»å‹çš„å­˜å‚¨å¯èƒ½æ›´å°ï¼Œä½†åœ¨å®é™…æ“ä½œä¸­ï¼Œå¤„ç†å™¨å¯èƒ½å°†å®ƒæå‡ä¸ºintæˆ–æ›´å¤§çš„ç±»å‹æ¥æ‰§è¡Œé€»è¾‘æ“ä½œã€‚å¤„ç†å¸ƒå°”å€¼å¯èƒ½æ¶‰åŠéšå¼ç±»å‹è½¬æ¢ï¼Œè¿™åœ¨æŸäº›æç«¯æƒ…å†µä¸‹å¯èƒ½å¸¦æ¥å¼€é”€ã€‚</li><li>å¯„å­˜å™¨ä½¿ç”¨<br>int ç±»å‹å¯ä»¥ç›´æ¥æ˜ å°„åˆ°å¤„ç†å™¨å¯„å­˜å™¨ä¸­è¿›è¡Œæ“ä½œï¼Œè€Œ bool ç±»å‹çš„æ“ä½œæœ‰æ—¶å¯èƒ½ä¼šæ¶‰åŠé¢å¤–çš„é€»è¾‘è¿ç®—ï¼ˆå¦‚æ©ç æ“ä½œï¼‰ä»¥ç¡®ä¿å¸ƒå°”å€¼çš„æ­£ç¡®æ€§ã€‚</li><li>ç¼–è¯‘å™¨ä¼˜åŒ–<br>ç°ä»£ç¼–è¯‘å™¨åœ¨ä¼˜åŒ–æ—¶ä¼šè€ƒè™‘åˆ°boolä¸intçš„å·®å¼‚ï¼Œå¹¶å°½é‡ä¼˜åŒ–ä»£ç ï¼Œå› æ­¤åœ¨å¤§å¤šæ•°åº”ç”¨åœºæ™¯ä¸‹ï¼Œä½ ä¸ä¼šæ„Ÿå—åˆ°æ˜¾è‘—çš„æ€§èƒ½å·®å¼‚ã€‚ä½†åœ¨ä¸€äº›ç‰¹å®šçš„åœºåˆï¼ˆå¦‚å¤§è§„æ¨¡æ•°ç»„ã€é¢‘ç¹å†…å­˜è®¿é—®ç­‰ï¼‰ï¼Œboolç±»å‹çš„ä½¿ç”¨ç¡®å®å¯èƒ½å¸¦æ¥æ€§èƒ½å½±å“ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å™¨éœ€è¦å¯¹é½æˆ–æ‰§è¡Œé¢å¤–çš„æ“ä½œæ—¶ã€‚<br>æ€»ç»“<br>boolç±»å‹é€šå¸¸å¹¶ä¸ä¼šæ¯”intæ…¢ï¼Œå®é™…çš„æ€§èƒ½å·®å¼‚å–å†³äºå¹³å°ã€å†…å­˜å¯¹é½ã€ç¼–è¯‘å™¨ä¼˜åŒ–ä»¥åŠåº”ç”¨åœºæ™¯ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå·®å¼‚æ˜¯å¾®ä¸è¶³é“çš„ï¼Œä½†åœ¨å¯¹æ€§èƒ½éå¸¸æ•æ„Ÿçš„ç¨‹åºä¸­ï¼Œè¿™ç§å·®å¼‚å¯èƒ½ä¼šæ˜¾ç°ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cpp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Bash Debugging</title>
      <link href="/blog/2024/09/06/linux/Bash-Debugging/"/>
      <url>/blog/2024/09/06/linux/Bash-Debugging/</url>
      
        <content type="html"><![CDATA[<h1 id="bashè°ƒè¯•æŠ€å·§"><a href="#bashè°ƒè¯•æŠ€å·§" class="headerlink" title="bashè°ƒè¯•æŠ€å·§"></a>bashè°ƒè¯•æŠ€å·§</h1><h2 id="set-x"><a href="#set-x" class="headerlink" title="set -x"></a><code>set -x</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PS4=<span class="string">&#x27;+ $&#123;LINENO&#125;: &#x27;</span></span><br><span class="line"><span class="built_in">set</span> -x</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼š<code>PS4</code>è®¾ç½®æ‰“å°æ ¼å¼ï¼Œ<code>$LINENO</code>è¡¨ç¤ºæ‰“å°è¡Œå·ã€‚</p><h2 id="trap-DEBUG"><a href="#trap-DEBUG" class="headerlink" title="trap DEBUG"></a><code>trap DEBUG</code></h2><p>è®¾ç½®DEBUGé™·é˜±ï¼Œè¯¥é™·é˜±åœ¨æ¯ä¸€æ¡â€œç®€å•è¯­å¥â€æ‰§è¡Œå®Œæ¯•ä¹‹åä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> -o functrace</span><br><span class="line">track_var=<span class="string">&quot;my_var&quot;</span></span><br><span class="line">old_value=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="function"><span class="title">check_var_change</span></span>() &#123;</span><br><span class="line">    new_value=<span class="string">&quot;<span class="variable">$&#123;!track_var&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$new_value</span>&quot;</span> != <span class="string">&quot;<span class="variable">$old_value</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$track_var</span> changed to \&quot;<span class="variable">$new_value</span>\&quot; at <span class="variable">$BASH_LINENO</span>&quot;</span></span><br><span class="line">        old_value=<span class="string">&quot;<span class="variable">$new_value</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">trap</span> check_var_change DEBUG</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼šç›‘æ§<code>my_var</code>å˜é‡çš„å˜åŒ–ï¼Œå¦‚æœå˜åŒ–ï¼Œåˆ™æ‰“å°æ–°å€¼ã€‚</p><p>æ³¨æ„ï¼šå®é™…æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬å‘ç°<code>trap</code>ç›‘æ§å˜é‡å˜åŒ–ä¼¼ä¹ä¼šå»¶è¿Ÿï¼Œè€Œ<code>set -x</code>æ‰“å°çš„ä¿¡æ¯æ˜¯å¯é çš„ã€‚</p><h2 id="ç‰¹æ®Šå˜é‡"><a href="#ç‰¹æ®Šå˜é‡" class="headerlink" title="ç‰¹æ®Šå˜é‡"></a>ç‰¹æ®Šå˜é‡</h2><p>å‚è€ƒï¼š<a href="https://www.gnu.org/software/bash/manual/html_node/Bash-Variables.html">https://www.gnu.org/software/bash/manual/html_node/Bash-Variables.html</a></p><ul><li><code>BASH_LINENO</code>: è¿™æ˜¯ä¸€ä¸ªæ•°ç»„å˜é‡ï¼Œâ€Œç”¨äºè¡¨ç¤ºå½“å‰æ‰§è¡Œçš„è„šæœ¬æˆ–å‡½æ•°ä¸­æ¯ä¸€è¡Œçš„è¡Œå·ã€‚â€Œå®ƒç‰¹åˆ«é€‚ç”¨äºè°ƒè¯•ï¼Œâ€Œå› ä¸ºå®ƒå¯ä»¥è¿½è¸ªåˆ°å‡½æ•°è°ƒç”¨æ ˆä¸­æ¯ä¸€å±‚çš„è¡Œå·ã€‚â€Œé€šè¿‡è®¿é—®BASH_LINENOæ•°ç»„çš„ä¸åŒç´¢å¼•ï¼Œâ€Œå¯ä»¥è·å–åˆ°ä¸åŒå‡½æ•°è°ƒç”¨å±‚çº§å¯¹åº”çš„è¡Œå·ä¿¡æ¯â€Œã€‚</li><li><code>LINENO</code>: è·å–å½“å‰è„šæœ¬è¡Œå·â€Œï¼Œâ€Œè€Œä¸æ¶‰åŠå‡½æ•°è°ƒç”¨æ ˆçš„è¿½è¸ªâ€Œã€‚</li><li><code>FUNCNAME</code>: å‡½æ•°å</li><li><code>BASH_SOURCE</code></li></ul>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>File Exists</title>
      <link href="/blog/2024/09/06/linux/File-Exists/"/>
      <url>/blog/2024/09/06/linux/File-Exists/</url>
      
        <content type="html"><![CDATA[<h1 id="åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨"><a href="#åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨" class="headerlink" title="åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨"></a>åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨</h1><h2 id="ç›¸å…³å‡½æ•°"><a href="#ç›¸å…³å‡½æ•°" class="headerlink" title="ç›¸å…³å‡½æ•°"></a>ç›¸å…³å‡½æ•°</h2><ul><li><code>access</code></li><li><code>stat</code></li><li><code>inotify_node</code></li><li><code>opendir</code></li><li><code>readdir</code></li></ul><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><p>æ–‡ä»¶ç³»ç»Ÿå¹¶ä¸ä¼šå®æ—¶åˆ·æ–°ç¼“å­˜ï¼Œå°¤å…¶æ˜¯åœ¨ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿä¸­ã€‚è¿™ä¼šå¯¼è‡´æ–‡ä»¶å³ä½¿å·²ç»åˆ›å»ºï¼Œ<code>access</code>æˆ–<code>stat</code>å‡½æ•°ä¾ç„¶è¿”å›â€No such fileâ€ã€‚<br>ä½†æ˜¯<code>ls</code>å¯ä»¥çœ‹åˆ°æ–‡ä»¶ï¼Œè¿™æ˜¯å› ä¸º<code>ls</code>å’Œ<code>access</code>å‡½æ•°çš„å®ç°æœºåˆ¶ä¸åŒã€‚</p><p>ä¾‹å¦‚ï¼š</p><p>åœ¨<code>NFS</code>æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œåˆ›å»ºæ–‡ä»¶ä¹‹åç«‹å³è°ƒç”¨<code>stat</code>å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶ï¼Œ<code>stat</code>ä¼šæŠ¥å‘Šâ€œæ–‡ä»¶ä¸å­˜åœ¨â€ã€‚<br>åˆ é™¤æ–‡ä»¶ä¹‹åç«‹å³è°ƒç”¨<code>stat</code>å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶ï¼Œå‘ç°<code>stat</code>ä¾ç„¶å¯ä»¥çœ‹åˆ°è¯¥æ–‡ä»¶ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æ”¹ç”¨<code>readdir</code>æ¥è¯»å–ç›®å½•ï¼Œå› ä¸ºç›®å½•ä¼šè¢«æ›´å¿«åœ°æ›´æ–°ç¼“å­˜ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c/cpp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>libtirpc Usage</title>
      <link href="/blog/2024/07/08/libtirpc-Usage/"/>
      <url>/blog/2024/07/08/libtirpc-Usage/</url>
      
        <content type="html"><![CDATA[<h2 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h2><ul><li><a href="https://www.ibm.com/docs/en/i/7.3?topic=communications-using-sun-ti-rpc-develop-distributed-applications">TI-RPC</a></li><li><a href="https://www.ibm.com/docs/en/aix/7.1?topic=call-rpc-language">RPC language</a></li><li><a href="https://docs.oracle.com/cd/E19683-01/816-1435/xdrproto-61652/index.html">XDR Protocol</a></li><li><a href="https://www.ibm.com/docs/en/i/7.3?topic=applications-using-rpcgen-compiler">PRC Compiler</a></li><li><a href="https://docs.oracle.com/cd/E19683-01/816-1435/rpcgenpguide-21470/index.html">rpcgen</a></li><li><a href="https://docs-archive.freebsd.org/44doc/psd/22.rpcgen/paper.pdf">rpcgen programming guide</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">which</span> rpcgen</span><br><span class="line">/bin/rpcgen</span><br><span class="line">$ rpcgen</span><br><span class="line">usage: rpcgen infile</span><br><span class="line">        rpcgen [-abkCLNTM][-Dname[=value]] [-i size] [-I [-K seconds]] [-Y path] infile</span><br><span class="line">        rpcgen [-c | -h | -l | -m | -t | -Sc | -Ss | -Sm] [-o outfile] [infile]</span><br><span class="line">        rpcgen [-s nettype]* [-o outfile] [infile]</span><br><span class="line">        rpcgen [-n netid]* [-o outfile] [infile]</span><br><span class="line">options:</span><br><span class="line">-a              generate all files, including samples</span><br><span class="line">-b              backward compatibility mode (generates code <span class="keyword">for</span> SunOS 4.1)</span><br><span class="line">-c              generate XDR routines</span><br><span class="line">-C              ANSI C mode</span><br><span class="line">-Dname[=value]  define a symbol (same as <span class="comment">#define)</span></span><br><span class="line">-h              generate header file</span><br><span class="line">-i size         size at <span class="built_in">which</span> to start generating inline code</span><br><span class="line">-I              generate code <span class="keyword">for</span> inetd support <span class="keyword">in</span> server (<span class="keyword">for</span> SunOS 4.1)</span><br><span class="line">-K seconds      server exits after K seconds of inactivity</span><br><span class="line">-l              generate client side stubs</span><br><span class="line">-L              server errors will be printed to syslog</span><br><span class="line">-m              generate server side stubs</span><br><span class="line">-M              generate MT-safe code</span><br><span class="line">-n netid        generate server code that supports named netid</span><br><span class="line">-N              supports multiple arguments and call-by-value</span><br><span class="line">-o outfile      name of the output file</span><br><span class="line">-s nettype      generate server code that supports named nettype</span><br><span class="line">-Sc             generate sample client code that uses remote procedures</span><br><span class="line">-Ss             generate sample server code that defines remote procedures</span><br><span class="line">-Sm             generate makefile template </span><br><span class="line">-t              generate RPC dispatch table</span><br><span class="line">-T              generate code to support RPC dispatch tables</span><br><span class="line">-Y path         directory name to find C preprocessor (cpp)</span><br><span class="line"></span><br><span class="line">For bug reporting instructions, please see:</span><br><span class="line">&lt;http://www.gnu.org/software/libc/bugs.html&gt;.</span><br></pre></td></tr></table></figure><p>Note:</p><p><code>%</code> å¯ä»¥ç”¨æ¥è½¬ä¹‰æŸè¡Œï¼Œä»»ä½•å¥é¦–å¸¦æœ‰<code>%</code>çš„è¡Œå°†è¢«è§†ä½œå­—ç¬¦ä¸²ï¼Œç›´æ¥æ”¾å…¥åˆ°è¾“å‡ºæ–‡ä»¶ä¸­ã€‚<br>æ³¨æ„ï¼š<code>rpcgen</code>å¯èƒ½æ”¹å˜è¯¥è¡Œçš„ä½ç½®ï¼Œæ‰€ä»¥åº”è¯¥åœ¨è¾“å‡ºæ–‡ä»¶ä¸­å¯¹è¿™äº›è¡Œè¿›è¡Œä»”ç»†æ£€æŸ¥ã€‚</p><p><code>rpcgen</code> provides an additional preprocessing feature: any line that begins with a percent sign (<code>%</code>) is passed directly to the output file, with no action on the lineâ€™s content. Use caution because <code>rpcgen</code> does not always place the lines where you intend. Check the output source file and, if needed, edit it.</p><p>ä¾‹å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;abc.h&quot;</span><br></pre></td></tr></table></figure><p>å½“æ‰§è¡Œ<code>rpcgen infile</code>å‘½ä»¤æ—¶ï¼Œç”±äºâ€abc.hâ€ä¸å­˜åœ¨ï¼Œå¯èƒ½ä¼šæŠ¥é”™ã€‚</p><p>ä½†æ˜¯å¦‚æœåœ¨å¥é¦–æ·»åŠ ä¸€ä¸ª<code>%</code>ç¬¦å·ï¼Œåˆ™å¯ä»¥ç»•è¿‡æ£€æŸ¥ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%#include &quot;abc.h&quot;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> RPC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hair</title>
      <link href="/blog/2024/05/08/english/Hair/"/>
      <url>/blog/2024/05/08/english/Hair/</url>
      
        <content type="html"><![CDATA[<h2 id="Link"><a href="#Link" class="headerlink" title="Link"></a>Link</h2><p><a href="https://www.youtube.com/watch?v=EzFtsYC4pPg&t=344s">Free English Class! Topic: Hair! ğŸ§”ğŸ½ğŸ’‡âœ‚ï¸ (Lesson Only)</a></p><h2 id="Words-Phrases"><a href="#Words-Phrases" class="headerlink" title="Words&#x2F;Phrases"></a>Words&#x2F;Phrases</h2><p>eyelashes<br>makeup<br>hairstyle&#x2F;hairdo<br>get my hair done<br>hair gel<br>buzz cut<br>helmet<br>When you have a lot of hair, the helmet makes your hair flat.<br>hair colouring</p>]]></content>
      
      
      <categories>
          
          <category> English </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hair </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Multi Thread and Signals</title>
      <link href="/blog/2024/03/22/thread/Multi-Thread-and-Signals/"/>
      <url>/blog/2024/03/22/thread/Multi-Thread-and-Signals/</url>
      
        <content type="html"><![CDATA[<p>From ChatGPT:</p><p>In general, when a program enters a signal handler in a multi-threaded environment, the behavior regarding other threads depends on how the signal handler is set up and the specific signal that is being handled.</p><ol><li>Default Behavior: By default, when a signal is delivered to a process, it interrupt the thread that is currently running and executes the signal handler in the context of that thread. Other threads in the process continue running unless they are also interrupted by signals.</li><li>Thread-Specific Signal Handling: Some signals, such as SIGINT (interrupt signal), SIGTERM (termination signal), or SIGABRT (abort signal), are typically delivered to the entire process, which means they can interrupt any thread. However, other signals, like SIGSEGV (segmentation fault) or SIGILL (illegal signal), are usually delivered to the specific thread that caused the signal.</li><li>Signal Masking: In a multi-threaded program, you can use signal masking (sigprocmask in POSIX systems) to block certain signals in specific threads. This can affect whether a signal handler interrupts a particular thread or not.</li><li>Asynchronous-Signal-Safe Functions: Signal handlers should only execute functions are considered â€œasynchronous-signal-safeâ€ according to POSIX standards. These functions are designed to be safe to call from within a signal handler. Using non-safe functions in a signal handler can lead to undefined behavior.</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> thread </tag>
            
            <tag> signal </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TBB Learning</title>
      <link href="/blog/2024/02/24/thread/TBB-Learning/"/>
      <url>/blog/2024/02/24/thread/TBB-Learning/</url>
      
        <content type="html"><![CDATA[<h1 id="Control-the-number-threads"><a href="#Control-the-number-threads" class="headerlink" title="Control the number threads"></a>Control the number threads</h1><ul><li>Method 1: Use the environment variable <code>TBB_NUM_THREADS</code> for the gloabl setting.</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> TBB_NUM_THREADS=4</span><br></pre></td></tr></table></figure><p>TODO: It doesnâ€™t seem to work!</p><ul><li>Method 2: Use <code>tbb::task_arena</code> or <code>tbb::task_scheduler_init</code> (Deprecated).</li></ul><p>TBB will use this setting locally within the scope of the <code>tbb::task_arena</code>.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;tbb/pipeline.h&gt;</span></span></span><br><span class="line"><span class="comment">// Deprecated:</span></span><br><span class="line"><span class="comment">// #include &lt;tbb/task_scheduler_init.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;tbb/task_arena.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Define your pipeline body</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPipeline</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(tbb::flow_control&amp; fc)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Your pipeline logic here</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="comment">// Inform the pipeline that there is no more data</span></span><br><span class="line">        fc.<span class="built_in">stop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Deprecated: tbb::task_scheduler_init init(1);</span></span><br><span class="line">    <span class="function">tbb::task_arena <span class="title">arena</span><span class="params">(<span class="number">4</span>)</span></span>; <span class="comment">// 4 threads</span></span><br><span class="line">    <span class="comment">// Do some tasks:</span></span><br><span class="line">    tbb::<span class="built_in">parallel_pipeline</span>(<span class="comment">/* max_number_of_live_tokens */</span> <span class="number">4</span>, MyPipeline);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> thread </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gcc VS glibc</title>
      <link href="/blog/2024/02/02/cplusplus/gcc-VS-glibc/"/>
      <url>/blog/2024/02/02/cplusplus/gcc-VS-glibc/</url>
      
        <content type="html"><![CDATA[<h2 id="gcc"><a href="#gcc" class="headerlink" title="gcc"></a>gcc</h2><p>gccæ˜¯ä¸€ä¸ªç¼–è¯‘å¥—ä»¶ï¼ŒåŒ…å«cã€c++ã€Fortranè¯­è¨€çš„ç¼–è¯‘å™¨ã€‚</p><h2 id="glibc"><a href="#glibc" class="headerlink" title="glibc"></a>glibc</h2><p>glibcæ˜¯ä¸€ä¸ªlibraryï¼Œä¸ºCç¨‹åºæä¾›åŸºç¡€å…¬å…±åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç³»ç»Ÿè°ƒç”¨ã€æ•°å­¦å‡½æ•°å’Œå…¶ä»–æ ¸å¿ƒç»„ä»¶ã€‚<br>Linuxå¹³å°å’Œvscodeä¼¼ä¹éƒ½ä¾èµ–glibcï¼Œå¦‚æœæ“…è‡ªå°†<code>LD_LIBRARY_PATH</code>æ›´æ”¹ä¸ºå…¶ä»–ç‰ˆæœ¬çš„glibcè·¯å¾„ï¼Œåˆ™bashä¼šç›´æ¥crashã€‚</p><h3 id="glibcåŒ…å«ä»¥ä¸‹binå’Œlibï¼š"><a href="#glibcåŒ…å«ä»¥ä¸‹binå’Œlibï¼š" class="headerlink" title="glibcåŒ…å«ä»¥ä¸‹binå’Œlibï¼š"></a>glibcåŒ…å«ä»¥ä¸‹binå’Œlibï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> glibc-v2.34/Linux/RHEL7.0-2017-x86_64/bin &amp;&amp; <span class="built_in">ls</span></span><br><span class="line">catchsegv  getconf  iconv  locale     makedb  pcprofiledump  sotruss  tzselect  zdump</span><br><span class="line">gencat     getent   ldd    localedef  mtrace  pldd           sprof    xtrace</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿›å…¥å…¶ä»–ç‰ˆæœ¬çš„glibc/libç›®å½•æ‰§è¡Œlså‘½ä»¤ä¼šæŠ¥é”™ï¼Œå¤§æ¦‚åŸå› å¯èƒ½æ˜¯å› ä¸ºå½“å‰è·¯å¾„çš„glibcçš„libå’Œç³»ç»Ÿçš„libå†²çªã€‚</span></span><br><span class="line">$ <span class="built_in">cd</span> ../lib &amp;&amp; <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">ls</span>: relocation error: ./libc.so.6: symbol __tunable_get_val, version GLIBC_PRIVATE not defined <span class="keyword">in</span> file ld-linux-x86-64.so.2 with <span class="built_in">link</span> time reference</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cd</span> .. &amp;&amp; <span class="built_in">ls</span> lib</span><br><span class="line">Mcrt1.o               libanl.so.1             libm.so             libnss_hesiod.so.2</span><br><span class="line">Scrt1.o               libc.a                  libm.so.6           libpcprofile.so</span><br><span class="line">audit                 libc.so                 libmcheck.a         libpthread.a</span><br><span class="line">crt1.o                libc.so.6               libmemusage.so      libpthread.so.0</span><br><span class="line">crti.o                libc_malloc_debug.so    libmvec.a           libresolv.a</span><br><span class="line">crtn.o                libc_malloc_debug.so.0  libmvec.so          libresolv.so</span><br><span class="line">gconv                 libc_nonshared.a        libmvec.so.1        libresolv.so.2</span><br><span class="line">gcrt1.o               libcrypt.a              libnsl.so.1         librt.a</span><br><span class="line">ld-linux-x86-64.so.2  libcrypt.so             libnss_compat.so    librt.so.1</span><br><span class="line">libBrokenLocale.a     libcrypt.so.1           libnss_compat.so.2  libthread_db.so</span><br><span class="line">libBrokenLocale.so    libdl.a                 libnss_db.so        libthread_db.so.1</span><br><span class="line">libBrokenLocale.so.1  libdl.so.2              libnss_db.so.2      libutil.a</span><br><span class="line">libSegFault.so        libg.a                  libnss_dns.so.2     libutil.so.1</span><br><span class="line">libanl.a              libm-2.34.a             libnss_files.so.2</span><br><span class="line">libanl.so             libm.a                  libnss_hesiod.so</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹glibcçš„ç‰ˆæœ¬ï¼š"><a href="#æŸ¥çœ‹glibcçš„ç‰ˆæœ¬ï¼š" class="headerlink" title="æŸ¥çœ‹glibcçš„ç‰ˆæœ¬ï¼š"></a>æŸ¥çœ‹glibcçš„ç‰ˆæœ¬ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»ä¸Šå¯çŸ¥ï¼Œlddæ˜¯glibcçš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€</span></span><br><span class="line">$ ldd --version</span><br></pre></td></tr></table></figure><h3 id="å¯»æ‰¾libc-soçš„è·¯å¾„ï¼š"><a href="#å¯»æ‰¾libc-soçš„è·¯å¾„ï¼š" class="headerlink" title="å¯»æ‰¾libc.soçš„è·¯å¾„ï¼š"></a>å¯»æ‰¾libc.soçš„è·¯å¾„ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ locate libc.so</span><br><span class="line">/usr/lib/x86_64-linux-gnu/libc.so</span><br><span class="line">/usr/lib/x86_64-linux-gnu/libc.so.6</span><br><span class="line">$ locate libstdc++.so</span><br><span class="line">/usr/lib/gcc/x86_64-linux-gnu/11/libstdc++.so</span><br><span class="line">/usr/lib/x86_64-linux-gnu/libstdc++.so.6</span><br><span class="line">/usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.30</span><br><span class="line">/usr/share/gdb/auto-load/usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.30-gdb.py</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…glibcï¼š"><a href="#å®‰è£…glibcï¼š" class="headerlink" title="å®‰è£…glibcï¼š"></a>å®‰è£…glibcï¼š</h3><p>Ubuntuå¹³å°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install lib6</span><br></pre></td></tr></table></figure><p>RedHatå¹³å°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install glibc</span><br></pre></td></tr></table></figure><h3 id="æ£€æŸ¥GNC-C-Library-libstdc-çš„ç‰ˆæœ¬ï¼š"><a href="#æ£€æŸ¥GNC-C-Library-libstdc-çš„ç‰ˆæœ¬ï¼š" class="headerlink" title="æ£€æŸ¥GNC C++ Library (libstdc++)çš„ç‰ˆæœ¬ï¼š"></a>æ£€æŸ¥GNC C++ Library (libstdc++)çš„ç‰ˆæœ¬ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ strings /usr/lib/libstdc++.so.* | grep LIBCXX</span><br><span class="line">[sjcvl-zhigaoz ] /lan/cva_rel/vxe_main/24.02.650.d000/tools.lnx86/lib/64bit % strings /usr/lib/libstdc++.so.* | grep LIBCXX</span><br><span class="line">GLIBCXX_3.4</span><br><span class="line">GLIBCXX_3.4.1</span><br><span class="line">GLIBCXX_3.4.2</span><br><span class="line">...</span><br><span class="line">GLIBCXX_3.4.19</span><br><span class="line">GLIBCXX_DEBUG_MESSAGE_LENGTH</span><br><span class="line"></span><br><span class="line">$ strings /usr/lib/libc.so.* | grep GLIBC</span><br><span class="line">GLIBC_2.0</span><br><span class="line">GLIBC_2.1</span><br><span class="line">GLIBC_2.1.1</span><br><span class="line">...</span><br><span class="line">GLIBC_2.17</span><br><span class="line">GLIBC_PRIVATE</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æœ‰ä¸€ä¸ªä½¿ç”¨äº†libstdc++çš„ç‰¹å®šçš„binaryæˆ–applicationï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æ£€æŸ¥å…¶ç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ldd &lt;your_binary_or_application&gt; | grep libstdc++</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨vscodeçš„â€œRemote SSHâ€å·¥å…·è¯•å›¾è¿æ¥åˆ°Linuxæ—¶ï¼Œå¯èƒ½ä¼šæŠ¥é”™å¦‚ä¸‹ï¼š</p><blockquote><p>Warning: Missing GLIBCXX &gt;&#x3D; 3.4.25! from &#x2F;usr&#x2F;lib64&#x2F;libstdc++.so.6.0.19<br>Warning: Missing GLIBC &gt;&#x3D; 2.28! from &#x2F;usr&#x2F;lib64&#x2F;libc-2.17.so<br>Error: Missing required dependencies. Please refer to our FAQ <a href="https://aka.ms/vscode-remote/faq/old-linux">https://aka.ms/vscode-remote/faq/old-linux</a> for additional information.</p></blockquote><p>è¿™æ˜¯å› ä¸ºLinuxç³»ç»Ÿä¸Šçš„glibcç‰ˆæœ¬ä¸­ä¸åŒ…å«GLIBCXX_3.4.25åŠä»¥ä¸Šçš„ç‰ˆæœ¬ã€‚æ­¤æ—¶éœ€è¦é™çº§vscodeï¼ˆå»ºè®®åšæ³•ï¼‰æˆ–å‡çº§glibcï¼ˆä¼¼ä¹å¾ˆéš¾ï¼‰ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> gcc </tag>
            
            <tag> glibc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Timing Tools</title>
      <link href="/blog/2024/01/30/misc/Timing-Tools/"/>
      <url>/blog/2024/01/30/misc/Timing-Tools/</url>
      
        <content type="html"><![CDATA[<h2 id="times"><a href="#times" class="headerlink" title="times"></a>times</h2><ol><li>bash built-in</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">times</span></span><br></pre></td></tr></table></figure><ol start="2"><li>function</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/times.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">clock_t</span> <span class="title">times</span><span class="params">(<span class="keyword">struct</span> tms *buf)</span></span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> timing </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Introduction to memory</title>
      <link href="/blog/2024/01/29/linux/Introduction-to-memory/"/>
      <url>/blog/2024/01/29/linux/Introduction-to-memory/</url>
      
        <content type="html"><![CDATA[<h2 id="malloc-free"><a href="#malloc-free" class="headerlink" title="malloc&#x2F;free"></a>malloc&#x2F;free</h2><p>See <a href="https://www.gnu.org/software/libc/manual/html_node/Backtraces.html">this example</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span> ** <span class="title">backtrace_symbols</span> <span class="params">(<span class="type">void</span> *<span class="type">const</span> *buffer, <span class="type">int</span> size)</span> </span></span><br></pre></td></tr></table></figure><blockquote><p>The return value of backtrace_symbols is a pointer obtained via the malloc function, and it is the responsibility of the caller to free that pointer. Note that only the return value need be freed, not the individual strings.</p></blockquote><p>Question: Why does it say â€œonly the return value need be freed, not the individual stringsâ€?</p><p>Let us observe the defintion of the <code>malloc</code>&#x2F;<code>free</code> functions first:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> *<span class="title">malloc</span><span class="params">( <span class="type">size_t</span> size )</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">free</span><span class="params">( <span class="type">void</span> *ptr )</span></span>;</span><br></pre></td></tr></table></figure><p><code>free</code> takes a <code>void*</code> pointer to deallocate the memory, it doesnâ€™t care what type it is, even if it is a multi-level pointer. It means that <code>malloc</code> has stored the memory size in some place and <code>free</code> will find it beforing deallocate the memory.</p><p>Let us return the question. The memory pointer returned by <code>backtrace_symbols</code> is the <code>char**</code> type, it must be a whole block contigunous memory using <code>malloc</code> and might be enforced to be transformed as <code>char**</code> pointer when returing. So when we <code>free</code> the memory block, the Linux kernel find its actual memory size and deallocate it.</p><p>Example:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">char</span>** strings = (<span class="type">char</span>**)<span class="built_in">malloc</span>(<span class="number">3</span> * <span class="built_in">sizeof</span>(<span class="type">char</span>*) + <span class="number">3</span> * <span class="number">50</span>); <span class="comment">// assuming a maximum 50 characters per sentence</span></span><br><span class="line">    <span class="type">char</span>* block = (<span class="type">char</span>*)(strings + <span class="number">3</span>);</span><br><span class="line">    <span class="type">char</span>* s1 = <span class="built_in">strcpy</span>(block, <span class="string">&quot;The first sentence&quot;</span>); block += <span class="built_in">strlen</span>(s1) + <span class="number">1</span>;</span><br><span class="line">    <span class="type">char</span>* s2 = <span class="built_in">strcpy</span>(block, <span class="string">&quot;The second sentence&quot;</span>); block += <span class="built_in">strlen</span>(s2) + <span class="number">1</span>;</span><br><span class="line">    <span class="type">char</span>* s3 = <span class="built_in">strcpy</span>(block, <span class="string">&quot;The third sentence&quot;</span>);</span><br><span class="line">    strings[<span class="number">0</span>] = s1;</span><br><span class="line">    strings[<span class="number">1</span>] = s2;</span><br><span class="line">    strings[<span class="number">2</span>] = s3;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, strings[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(strings); <span class="comment">// deallocate all memory at once</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>More elegant but less economical code:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">char</span>** strings = (<span class="type">char</span>**)<span class="built_in">malloc</span>(<span class="number">3</span> * <span class="built_in">sizeof</span>(<span class="type">char</span>*) + <span class="number">3</span> * <span class="number">50</span>);</span><br><span class="line">    <span class="type">char</span>* block = (<span class="type">char</span>*)(strings + <span class="number">3</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i) &#123;</span><br><span class="line">        strings[i] = block + i * <span class="number">50</span>; <span class="comment">// Assuming a maximum of 50 characters per sentence</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">strcpy</span>(strings[<span class="number">0</span>], <span class="string">&quot;The first sentence&quot;</span>);</span><br><span class="line">    <span class="built_in">strcpy</span>(strings[<span class="number">1</span>], <span class="string">&quot;The second sentence&quot;</span>);</span><br><span class="line">    <span class="built_in">strcpy</span>(strings[<span class="number">2</span>], <span class="string">&quot;The third sentence&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, strings[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">free</span>(strings); <span class="comment">// deallocate all memory at once</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a href="https://www.gnu.org/software/libc/manual/html_node/Memory_002dmapped-I_002fO.html">The GNU C Library (glibc) manual: 13.8 Memory-mapped I&#x2F;O</a></li><li><a href="https://www.gnu.org/software/libc/manual/html_node/Memory-Protection.html">The GNU C Library (glibc) manual: 3.4 Memory Protection</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> memory </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UML</title>
      <link href="/blog/2024/01/29/UML/"/>
      <url>/blog/2024/01/29/UML/</url>
      
        <content type="html"><![CDATA[<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol><li><a href="https://cloud.tencent.com/developer/article/1176331">è®¤è¯†UMLç±»å…³ç³»â€”â€”ä¾èµ–ã€å…³è”ã€èšåˆã€ç»„åˆã€æ³›åŒ–</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> UML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shell Commands</title>
      <link href="/blog/2024/01/26/linux/Shell-Commands/"/>
      <url>/blog/2024/01/26/linux/Shell-Commands/</url>
      
        <content type="html"><![CDATA[<h2 id="shuf"><a href="#shuf" class="headerlink" title="shuf"></a>shuf</h2><h2 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h2><h2 id="tr"><a href="#tr" class="headerlink" title="tr"></a>tr</h2><h2 id="lp"><a href="#lp" class="headerlink" title="lp"></a>lp</h2><h2 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h2><p>Options:</p><pre><code>-t, --field-separator=SEP    use SEP instead of non-blank to blank transition-k, --key=POS1[,POS2]    start a key at POS1 (origin 1), end it at POS2 (default end of line)-h, --human-numeric-sort    compare human readable numbers (e.g., 2K 1G)-n, --numeric-sort    compare according to string numerical value</code></pre><h2 id="nproc"><a href="#nproc" class="headerlink" title="nproc"></a>nproc</h2><p>print the number of processing units avaiable.</p><h2 id="od-xxd-hexdump"><a href="#od-xxd-hexdump" class="headerlink" title="od &#x2F; xxd &#x2F; hexdump"></a>od &#x2F; xxd &#x2F; hexdump</h2><p>read the binary file.</p><p>Notes: byte order</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> -n <span class="string">&quot;ABCD&quot;</span> | xxd</span><br><span class="line">00000000: 4142 4344                                ABCD</span><br><span class="line">$ <span class="built_in">echo</span> -n <span class="string">&quot;ABCD&quot;</span> | hexdump</span><br><span class="line">0000000 4241 4443                              </span><br><span class="line">0000004</span><br></pre></td></tr></table></figure><p><a href="https://unix.stackexchange.com/questions/282215/how-to-view-a-binary-file">Reference</a></p><h2 id="comm-diff-tkdiff-cmp"><a href="#comm-diff-tkdiff-cmp" class="headerlink" title="comm &#x2F; diff &#x2F; tkdiff &#x2F; cmp"></a>comm &#x2F; diff &#x2F; tkdiff &#x2F; cmp</h2><p>Can be used to compare binary or non-binary files.</p><h3 id="comm"><a href="#comm" class="headerlink" title="comm"></a>comm</h3><p>compare two sorted files line by line.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> file1.txt </span><br><span class="line">apple</span><br><span class="line">banana</span><br><span class="line">cherry</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cat</span> file2.txt </span><br><span class="line">banana</span><br><span class="line">cherry</span><br><span class="line"><span class="built_in">date</span></span><br><span class="line">erase</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">comm</span> file1.txt file2.txt </span><br><span class="line">apple</span><br><span class="line">                banana</span><br><span class="line">                cherry</span><br><span class="line">        <span class="built_in">date</span></span><br><span class="line">        erase</span><br></pre></td></tr></table></figure><p>The file must be sorted before using the <code>comm</code> command. Otherwise it will complain that:</p><pre><code>comm: file 1 is not in sorted order</code></pre><p>and cannot work correctly. For example,</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> file1.txt </span><br><span class="line">apple</span><br><span class="line">cherry</span><br><span class="line">banana</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cat</span> file2.txt </span><br><span class="line">banana</span><br><span class="line">cherry</span><br><span class="line"><span class="built_in">date</span></span><br><span class="line">erase</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">comm</span> file1.txt file2.txt </span><br><span class="line">apple</span><br><span class="line">        banana</span><br><span class="line">                cherry</span><br><span class="line"><span class="built_in">comm</span>: file 1 is not <span class="keyword">in</span> sorted order</span><br><span class="line">banana</span><br><span class="line">        <span class="built_in">date</span></span><br><span class="line">        erase</span><br><span class="line"><span class="built_in">comm</span>: input is not <span class="keyword">in</span> sorted order</span><br></pre></td></tr></table></figure><h3 id="diff"><a href="#diff" class="headerlink" title="diff"></a>diff</h3><p>Syntax:</p><pre><code>diff -u file1 file2</code></pre><p>Options:</p><pre><code>-e, --ed    output an ed script-u, -U NUM, --unified[=NUM]    output NUM (default 3) lines of unified context    (that is, print NUM lines before and after the difference line)</code></pre><h3 id="tkdiff"><a href="#tkdiff" class="headerlink" title="tkdiff"></a>tkdiff</h3><p>Use a GUI to display the differences.</p><h3 id="cmp"><a href="#cmp" class="headerlink" title="cmp"></a>cmp</h3><p>Prints less information comparing to <code>diff</code>.</p><p>Syntax:</p><pre><code>cmp file1 file2</code></pre><h2 id="ed-vim-sed-awk"><a href="#ed-vim-sed-awk" class="headerlink" title="ed&#x2F;vim&#x2F;sed&#x2F;awk"></a>ed&#x2F;vim&#x2F;sed&#x2F;awk</h2>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ Initializer List</title>
      <link href="/blog/2024/01/26/cplusplus/Cpp-Initializer-List/"/>
      <url>/blog/2024/01/26/cplusplus/Cpp-Initializer-List/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ—è¡¨åˆå§‹åŒ–"><a href="#åˆ—è¡¨åˆå§‹åŒ–" class="headerlink" title="åˆ—è¡¨åˆå§‹åŒ–"></a>åˆ—è¡¨åˆå§‹åŒ–</h2><p>struct&#x2F;union&#x2F;arrayé»˜è®¤æ”¯æŒåˆ—è¡¨åˆå§‹åŒ–ã€‚</p><p><a href="https://en.cppreference.com/w/c/language/struct_initialization">Struct and union initialization</a><br><a href="https://en.cppreference.com/w/c/language/array_initialization">Array initialization</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="comment">// #include &lt;initializer_list&gt;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> x, y, z; <span class="comment">// æ³¨æ„ï¼šæ•°æ®æˆå‘˜å¿…é¡»æ˜¯publicçš„ã€‚</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; x &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; y &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; z &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; vec_;</span><br><span class="line">    <span class="type">int</span> x_;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;vec_=&#123; &quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> x : vec_) &#123;</span><br><span class="line">            cout &lt;&lt; x &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;&#125;, x_=&quot;</span> &lt;&lt; x_ &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; vec_;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;vec_=&#123; &quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> x : vec_) &#123;</span><br><span class="line">            cout &lt;&lt; x &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;&#125;&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// C++ä¼šæ„é€ ä¸€ä¸ªåˆ—è¡¨åˆå§‹åŒ–çš„é»˜è®¤æ„é€ å‡½æ•°ï¼Œ</span></span><br><span class="line">    <span class="comment">// ä»¥ä¸‹(1)å’Œ(2)éƒ½æ˜¯è°ƒç”¨è¿™ä¸ªé»˜è®¤æ„é€ å‡½æ•°ã€‚</span></span><br><span class="line">    A a1&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;; <span class="comment">// (1) åˆ—è¡¨åˆå§‹åŒ–</span></span><br><span class="line">    <span class="function">A <span class="title">a2</span><span class="params">(&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;)</span></span>; <span class="comment">// (2) åŒ(1)</span></span><br><span class="line">    a1.<span class="built_in">print</span>();</span><br><span class="line">    a2.<span class="built_in">print</span>();</span><br><span class="line"></span><br><span class="line">    B b1&#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;, <span class="number">4</span>&#125;; <span class="comment">// å†…éƒ¨çš„&quot;&#123;1,2,3&#125;&quot;ç”¨äºæ„é€ vec_ï¼Œ&quot;4&quot;ç”¨äºåˆå§‹åŒ–x_</span></span><br><span class="line">    b1.<span class="built_in">print</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// C C1&#123;1,2,3&#125;; // (1) è¿™é‡Œä¼šæŠ¥é”™&quot;error: too many initializers for â€˜Câ€™&quot;ï¼Œ</span></span><br><span class="line">    <span class="comment">//              //     å› ä¸ºCåªæœ‰ä¸€ä¸ªæ•°æ®æˆå‘˜vec_ï¼Œè¿™é‡Œå´ä¼ å…¥äº†3ä¸ªå‚æ•°</span></span><br><span class="line">    C c2&#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;&#125;; <span class="comment">// (2) å…¶ä¸­ï¼Œå†…éƒ¨çš„&quot;&#123;1,2,3&#125;&quot;ç”¨äºæ„é€ vec_ï¼Œå¤–å±‚çš„&quot;&#123;&#125;&quot;ç”¨äºå¯¹c2æœ¬èº«è¿›è¡Œæ„é€ </span></span><br><span class="line">    c2.<span class="built_in">print</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="std-initializer-list"><a href="#std-initializer-list" class="headerlink" title="std::initializer_list"></a>std::initializer_list</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;initializer_list&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="type">int</span> x, y, z;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">A</span>(initializer_list&lt;<span class="type">int</span>&gt; il) &#123;</span><br><span class="line">        initializer_list&lt;<span class="type">int</span>&gt;::iterator it = il.<span class="built_in">begin</span>();</span><br><span class="line">        x = *it++;</span><br><span class="line">        y = *it++;</span><br><span class="line">        z = *it++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; x &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; y &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; z &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">B</span> &#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; vec;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">B</span>(initializer_list&lt;<span class="type">int</span>&gt; il) &#123;</span><br><span class="line">        vec = il; <span class="comment">// ç”¨initializer_liståˆå§‹åŒ–vector</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;&#123; &quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> x : vec) &#123;</span><br><span class="line">            cout &lt;&lt; x &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;&#125;&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    A a&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">    a.<span class="built_in">print</span>();</span><br><span class="line"></span><br><span class="line">    B b&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">    b.<span class="built_in">print</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> syntax </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Brackets in Bash</title>
      <link href="/blog/2024/01/25/linux/Brackets-in-Bash/"/>
      <url>/blog/2024/01/25/linux/Brackets-in-Bash/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸­æ‹¬å·"><a href="#ä¸­æ‹¬å·" class="headerlink" title="ä¸­æ‹¬å·"></a>ä¸­æ‹¬å·</h2><ol><li><p><code>[ ]</code>å’Œ<code>test</code>æ˜¯bashçš„å†…éƒ¨å‘½ä»¤ï¼Œ<code>[[ ]]</code>æ˜¯shellçš„æ¡ä»¶åˆ¤æ–­å…³é”®å­—ã€‚</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">type</span> [</span><br><span class="line">[ is a shell <span class="built_in">builtin</span></span><br><span class="line">$ <span class="built_in">type</span> <span class="built_in">test</span></span><br><span class="line"><span class="built_in">test</span> is a shell <span class="built_in">builtin</span></span><br><span class="line">$ <span class="built_in">type</span> [[</span><br><span class="line">[[ is a shell keyword</span><br></pre></td></tr></table></figure></li><li><p><code>[ ]</code>å’Œ<code>test</code>æ˜¯ç­‰ä»·çš„ï¼Œç”¨äºè¯„ä¼°æ¡ä»¶è¡¨è¾¾å¼ã€‚å¯ä»¥ä½¿ç”¨<code>man [</code>æˆ–<code>help [</code>æŸ¥é˜…å¸®åŠ©æ–‡æ¡£ã€‚</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">help</span> [</span><br><span class="line">[: [ arg... ]</span><br><span class="line">    Evaluate conditional expression.</span><br><span class="line">    </span><br><span class="line">    This is a synonym <span class="keyword">for</span> the <span class="string">&quot;test&quot;</span> <span class="built_in">builtin</span>, but the last argument must</span><br><span class="line">    be a literal `]<span class="string">&#x27;, to match the opening `[&#x27;</span>.</span><br></pre></td></tr></table></figure></li><li><p><code>[[ ]]</code>å…³é”®å­—å¯ä»¥å±è”½shellç‰¹æ®Šç¬¦å·ï¼Œæ¯”å¦‚<code>&amp;&amp;</code>ã€<code>||</code>ã€<code>&gt;</code>å’Œ<code>&lt;</code>å¯ä»¥è¢«è®¤ä¸ºæ˜¯æ¡ä»¶åˆ¤æ–­ç¬¦è€Œä¸æ˜¯é‡å®šå‘ç¬¦ã€‚</p></li><li><p><code>[ ]</code>ä¸­ä½¿ç”¨<code>-a</code>å’Œ<code>-o</code>è¡¨ç¤ºé€»è¾‘ä¸å’Œé€»è¾‘æˆ–ï¼Œ<code>[[ ]]</code>ä¸­åˆ™ä½¿ç”¨<code>&amp;&amp;</code>å’Œ<code>||</code>ã€‚</p></li></ol><h2 id="å°æ‹¬å·"><a href="#å°æ‹¬å·" class="headerlink" title="å°æ‹¬å·"></a>å°æ‹¬å·</h2><ol><li><code>$()</code>ç”¨äºå‘½ä»¤æ›¿æ¢ã€‚</li><li>åŒå°æ‹¬å·<code>(( ))</code>ï¼šåœ¨æ¯”è¾ƒè¿‡ç¨‹ä¸­ä½¿ç”¨é«˜çº§æ•°å­¦è¡¨è¾¾å¼ã€‚</li></ol><h2 id="å¤§æ‹¬å·"><a href="#å¤§æ‹¬å·" class="headerlink" title="å¤§æ‹¬å·"></a>å¤§æ‹¬å·</h2><p>è¯·é˜…è¯»ï¼š<a href="https://www.linux.com/topic/desktop/all-about-curly-braces-bash/">All about {Curly Braces} in Bash</a></p><ol><li><p><code>$&#123;&#125;</code>ç”¨äºå¼•ç”¨å˜é‡ã€‚</p><p> ä¸<code>$var</code>ç›¸æ¯”ï¼Œ<code>$&#123;var&#125;</code>æ˜¯ä¸€ç§æ¶ˆé™¤æ­§ä¹‰çš„æªæ–½ï¼Œæ¯”å¦‚ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ var=abc</span><br><span class="line">$ vartest=ABC</span><br><span class="line"><span class="comment"># $varå¼•ç”¨å˜é‡&#x27;var&#x27;</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$var</span></span><br><span class="line">abc</span><br><span class="line"><span class="comment"># å¼•ç”¨å˜é‡&#x27;vartest&#x27;</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$vartest</span></span><br><span class="line">ABC</span><br><span class="line"><span class="comment"># å¼•ç”¨å˜é‡&#x27;var&#x27;å¹¶åœ¨å…¶ååŠ ä¸Š&#x27;test&#x27;å­—ç¬¦</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var&#125;</span><span class="built_in">test</span></span><br><span class="line">abctest</span><br></pre></td></tr></table></figure></li><li><p><code>&#123;&#125;</code>è¡¨ç¤ºåˆ†ç»„ã€‚</p></li></ol><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a href="https://www.cnblogs.com/zeweiwu/p/5485711.html">Shellä¸­testã€å•ä¸­æ‹¬å·ã€åŒä¸­æ‹¬å·çš„åŒºåˆ«</a></li><li><a href="https://www.baeldung.com/linux/bash-single-vs-double-brackets">Differences Between Single and Double Brackets in Bash</a></li><li><a href="https://www.jianshu.com/p/3e1eaaa3fee8">Shellä¸­çš„æ‹¬å·ã€åŒæ‹¬å·ã€æ–¹æ‹¬å·å’ŒåŒæ–¹æ‹¬å·</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Regular Expression</title>
      <link href="/blog/2024/01/25/linux/Regular-Expression/"/>
      <url>/blog/2024/01/25/linux/Regular-Expression/</url>
      
        <content type="html"><![CDATA[<h2 id="regexp"><a href="#regexp" class="headerlink" title="regexp"></a>regexp</h2><h2 id="ERegExp"><a href="#ERegExp" class="headerlink" title="ERegExp"></a>ERegExp</h2><h2 id="Wildcard-Glob"><a href="#Wildcard-Glob" class="headerlink" title="Wildcard&#x2F;Glob"></a>Wildcard&#x2F;Glob</h2><p><code>man 7 glob</code></p><blockquote><p>glob - globbing pathnames. glob is a shell built-in.</p><p>ä¸»è¦ç”¨äºåŒ¹é…å¸¦æœ‰é€šé…ç¬¦çš„æ–‡ä»¶è·¯å¾„ã€‚å…¶åŒ¹é…å­—ç¬¦ä¸²çš„èƒ½åŠ›æ¯”æ­£åˆ™è¡¨è¾¾å¼å¼±ã€‚</p><p>å®ƒæœ€åˆæ˜¯è´å°”å®éªŒå®¤ Unix ç³»ç»Ÿä¸Šçš„ä¸€ä¸ªåå« glob çš„å‘½ä»¤ï¼ˆglob æ˜¯ global çš„ç¼©å†™ï¼‰ï¼Œç”¨äºå±•å¼€å‘½ä»¤è¡Œä¸­çš„é€šé…ç¬¦ã€‚åæ¥ç³»ç»Ÿæä¾›äº†è¯¥åŠŸèƒ½çš„ C è¯­è¨€åº“å‡½æ•°glob()ï¼ŒçŸ¥åçš„ shell è§£é‡Šå™¨å°±ä½¿ç”¨äº†è¯¥æ¥å£ï¼Œshell è„šæœ¬å’Œå‘½ä»¤è¡Œä¸­ä½¿ç”¨çš„ glob æ¨¡å¼åŒ¹é…åŠŸèƒ½ä¾¿æºè‡ªäºæ­¤ã€‚â€”â€”è§<a href="https://juejin.cn/post/6844904077801816077">åšå®¢</a>ã€‚</p></blockquote><p><a href="https://tldp.org/LDP/GNU-Linux-Tools-Summary/html/x11655.htm">Wildcards</a></p><p><code>&#123;&#125;</code>ä¸¥æ ¼æ¥è®²ä¸å±äºglobçš„èŒƒç•´ï¼Œå…¶åœ¨shellè¡¨ç¤ºä¸€ä¸ªåˆ†ç»„ï¼Œè§ï¼š<a href="https://www.linux.com/topic/desktop/all-about-curly-braces-bash/">All about {Curly Braces} in Bash</a>ã€‚</p><h2 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h2><h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><p><a href="https://www.ibm.com/docs/nl/aix/7.2?topic=awk-command">awk Command</a></p><h3 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F<span class="string">&#x27; *|:&#x27;</span> <span class="string">&#x27;/LISTEN/&#123;print $2&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>-F</code>è¡¨ç¤ºåˆ†éš”ç¬¦ï¼›<br><code> *|:</code>æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œè¡¨ç¤ºä»¥â€ä¸€ä¸ªæˆ–å¤šä¸ªç©ºæ ¼â€æˆ–â€:â€ä½œä¸ºåˆ†éš”ç¬¦ï¼›<br>å†å…¶åçš„<code>//</code>ä¸­æ˜¯å¦ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨äºåŒ¹é…æ–‡æœ¬ï¼›<br><code>&#123;&#125;</code>ä¸­æ˜¯actionã€‚</p><h3 id="æ¡ä»¶åˆ¤æ–­"><a href="#æ¡ä»¶åˆ¤æ–­" class="headerlink" title="æ¡ä»¶åˆ¤æ–­"></a>æ¡ä»¶åˆ¤æ–­</h3><p><a href="https://tecadmin.net/awk-conditional-statements/">if-else in awk</a><br><a href="https://unix.stackexchange.com/questions/660178/how-to-use-and-and-or-together-in-an-awk-program">use AND and OR in an awk program</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;if ($1 &gt; 49151 &amp;&amp; $1 &lt; 65536) &#123;print $1&#125; &#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>ç­‰ä»·äº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;$1 &gt; 49151 &amp;&amp; $1 &lt; 65536&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="BEGIN-END"><a href="#BEGIN-END" class="headerlink" title="BEGIN&#x2F;END"></a>BEGIN&#x2F;END</h3><p>In AWK, <code>BEGIN</code> and <code>END</code> are special patterns that allow you to execute code before processing the input (<code>BEGIN</code>) or after processing all the input (<code>END</code>).</p><ul><li>The <code>BEGIN</code> block is executed once at the beginning of the AWK program and it is typically used for initializing variables or performing setup tasks.</li><li>The <code>END</code> block is executed once after processing all input, and it is commonly used for final caclucations, summaries, or printing results.</li></ul><h3 id="Special-symbols"><a href="#Special-symbols" class="headerlink" title="Special symbols"></a>Special symbols</h3><ul><li><code>$</code> ç”¨äºå¼•ç”¨fieldï¼Œä¾‹å¦‚<code>$1</code>ä»£è¡¨ç¬¬ä¸€ä¸ªfieldï¼ˆå…¸å‹æ¥è¯´æ˜¯ç¬¬ä¸€åˆ—ï¼‰ã€‚</li><li><code>NF</code> è¡¨ç¤ºnumber of filedï¼Œå‡è®¾ä¸€å…±æœ‰7åˆ—ï¼Œé‚£ä¹ˆ<code>$NF</code>ä¸<code>$7</code>ç­‰ä»·ã€‚</li></ul><h2 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h2><h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><ol><li>æ‰¾å‡ºä¸€ä¸ªæœªä½¿ç”¨çš„port</li></ol><div class="tabs" id="code"><ul class="nav-tabs"><li class="tab active"><a href="#code-1">Makefile</a></li><li class="tab"><a href="#code-2">Bash</a></li><li class="tab"><a href="#code-3">Python</a></li></ul><div class="tab-content"><div class="tab-pane active" id="code-1"><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &quot;$$&quot;æ˜¯ä¸ºäº†è½¬ä¹‰&quot;$&quot;</span></span><br><span class="line">max_port=<span class="variable">$(<span class="built_in">shell</span> netstat -antulpen 2&gt; /dev/null \</span></span><br><span class="line"><span class="variable">    | awk -F&#x27; *&#x27; &#x27;/^(tcp|udp)</span>/&#123;print $$4&#125;&#x27; | cut -d: -f 2 \</span><br><span class="line">    | egrep <span class="string">&quot;\w&quot;</span> | sort | tail -1)</span><br><span class="line"><span class="comment">#$(warning $&#123;max_port&#125;)</span></span><br><span class="line">port=<span class="variable">$(<span class="built_in">shell</span> expr <span class="variable">$(max_port)</span> + 1)</span></span><br><span class="line"><span class="comment">#$(warning $&#123;port&#125;)</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="code-2"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»1025å¼€å§‹æ‰¾å‡ºå·²ç»å­˜åœ¨çš„ç«¯å£ï¼Œå¦‚æœç›¸é‚»ç«¯å£çš„gapå¤§äº1ï¼Œåˆ™è¿”å›â€œå½“å‰ç«¯å£å·+1â€</span></span><br><span class="line">netstat -ant | awk <span class="string">&#x27;&#123;print $4&#125;&#x27;</span> \</span><br><span class="line">    | awk -F: <span class="string">&#x27;&#123;if ($NF ~ /^[0-9]+$/ &amp;&amp; $NF &gt; 1024) &#123;print $NF&#125;&#125;&#x27;</span> \</span><br><span class="line">    | awk <span class="string">&#x27;BEGIN &#123;prev = 1024&#125; </span></span><br><span class="line"><span class="string">        &#123;if ($1 - prev &gt; 1) &#123; port = prev + 1; exit&#125; else &#123; prev = $1&#125;&#125; </span></span><br><span class="line"><span class="string">        END &#123; if (port==&quot;&quot;) &#123;print prev + 1&#125; else &#123;print port&#125;&#125;&#x27;</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="code-3"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¿™ä¸æ˜¯æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment">#ä»¥0ç«¯å£ä¸ºå‚æ•°åˆ›å»ºä¸€ä¸ªsocketï¼Œåˆ™ç³»ç»Ÿä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªæœªä½¿ç”¨çš„ç«¯å£å·</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#one-line mode:</span></span><br><span class="line"><span class="comment">#python -c &#x27;import socket; s=socket.socket(); s.bind((&quot;&quot;, 0)); print(s.getsockname()[1]); s.close()&#x27;</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">s.bind((<span class="string">&#x27;&#x27;</span>, <span class="number">0</span>))</span><br><span class="line">addr = s.getsockname()</span><br><span class="line"><span class="built_in">print</span>(addr[<span class="number">1</span>])</span><br><span class="line">s.close()</span><br></pre></td></tr></table></figure></div></div></div>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The Killings at Badger&#39;s Drift</title>
      <link href="/blog/2024/01/24/english/The-Killings-at-Badger-s-Drift/"/>
      <url>/blog/2024/01/24/english/The-Killings-at-Badger-s-Drift/</url>
      
        <content type="html"><![CDATA[<h2 id="Video"><a href="#Video" class="headerlink" title="Video"></a>Video</h2><p>è§†é¢‘ï¼š<a href="https://tubitv.com/tv-shows/521987/s01-e01-the-killings-at-badgers-drift">é“¾æ¥</a>ã€‚</p><p>å½±ç‰‡åï¼šMidsomer Murders, S01:E01, <a href="https://www.google.com/search?q=+Badger%27s+Drift+&rlz=1C1GCEJ_enUS1023US1023&ei=fnuzZJivL96x0PEP4MunkAc&ved=0ahUKEwiY5oz5upKAAxXeGDQIHeDlCXIQ4dUDCBA&uact=5&oq=+Badger%27s+Drift+&gs_lp=Egxnd3Mtd2l6LXNlcnAiECBCYWRnZXIncyBEcmlmdCAyBxAuGBMYgAQyDRAuGBMYgAQYxwEYrwEyBxAAGBMYgAQyBxAAGBMYgAQyCRAAGBMYgAQYCjIHEAAYExiABDIHEAAYExiABDIHEAAYExiABDIHEAAYExiABDIHEAAYExiABDIWEC4YExiABBiXBRjcBBjeBBjgBNgBAUj3MFCYDViYDXAFeAGQAQCYAb0CoAG9AqoBAzMtMbgBA8gBAPgBAvgBAcICChAAGEcY1gQYsAPiAwQYACBBiAYBkAYKugYGCAEQARgU&sclient=gws-wiz-serp">The Killings at Badgerâ€™s Drift</a></p><p>S01:E01 - Season 01 : Episode 01ï¼Œç¬¬1å­£ç¬¬1é›†ã€‚episodeï¼Œæ’æ›²ï¼ˆæŸäº‹ä»¶ï¼›æŸäº‹å‘ç”Ÿçš„çŸ­æš‚æ—¶é—´ï¼‰ï¼›å‰§é›†ï¼ˆ<a href="https://www.ldoceonline.com/dictionary/episode">ä¸€èˆ¬ä¸€å‘¨æ›´æ–°æ”¾æ˜ ä¸€æ¬¡</a>ï¼‰ã€‚</p><p>midsomer - <a href="https://www.wordnik.com/words/midsomer">midsummerçš„è¿‡æ—¶å†™æ³•</a>ã€‚æœ¬ç‰‡ä¸­æ˜¯<a href="https://en.wikipedia.org/wiki/Midsomer_Murders">ä¸€ä¸ªè™šæ„çš„è‹±æ ¼å…°å¿</a>ï¼Œå½±ç‰‡å¼€å¤´æœ‰ä¸€ä¸ªè·¯ç‰Œï¼Œå†™ç€ï¼šâ€œBadgerâ€™s Drift, Midsomerâ€™s best kept villageâ€ï¼Œæ„æ€å¤§æ¦‚æ˜¯ï¼ŒBadgerâ€™s Driftæ˜¯Midsomerä¿å­˜æœ€å¥½çš„æ‘åº„ã€‚</p><h2 id="å¼€å¹•ä»‹ç»"><a href="#å¼€å¹•ä»‹ç»" class="headerlink" title="å¼€å¹•ä»‹ç»"></a>å¼€å¹•ä»‹ç»</h2><p>Screenplay by Anthony Horowitz - Screenplay å‰§æœ¬ã€‚</p><p>From the novel by Caroline Graham</p><p>Starring - ä¸»æ¼”</p><p>Directed by - å¯¼æ¼”æ˜¯</p><p>caption - å­—å¹•ã€‚</p><p>subtitle - å­—å¹•ã€‚</p><h2 id="ç¬¬ä¸€å¹•-Emilyä¹‹æ­»"><a href="#ç¬¬ä¸€å¹•-Emilyä¹‹æ­»" class="headerlink" title="ç¬¬ä¸€å¹• Emilyä¹‹æ­»"></a>ç¬¬ä¸€å¹• Emilyä¹‹æ­»</h2><h3 id="æ‘è½å°è·¯ä¸Š"><a href="#æ‘è½å°è·¯ä¸Š" class="headerlink" title="æ‘è½å°è·¯ä¸Š"></a>æ‘è½å°è·¯ä¸Š</h3><p>-[Doctor] Hello, Missis Simpson. Have a very good afternoon.</p><p>bright playful music - æ˜å¿«ä¿çš®çš„éŸ³ä¹ã€‚</p><p>Daily Mirror, forward with the people. è¿™æ˜¯ä¸€å—æ‹›ç‰Œä¸Šçš„å­—æ ·ã€‚ã€Šæ¯æ—¥é•œæŠ¥ã€‹çš„å£å·æ˜¯â€œä¸äººæ°‘åŒè¡Œâ€ï¼ŒThe Sunâ€™s slogan was â€˜Forward with the Peopleâ€™, which had been adopted by the Mirror in 1945 and only recently dropped. - å‚è§è°·æ­Œå¿«ç…§ã€Š<a href="https://webcache.googleusercontent.com/search?q=cache:32HydJ4eVUYJ:https://www.gale.com/intl/essays/adrian-bingham-introduction-daily-mirror&cd=9&hl=zh-CN&ct=clnk&gl=us">An Introduction to the Daily Mirror</a>ã€‹ã€‚haydayå¥½å¤©æ°”ï¼Œå…¨ç››æ—¶æœŸã€‚hayå¹²è‰ã€‚</p><p>-[Lucy] Ah, sneaking off, arenâ€™t you, Emily? å·å·æºœèµ°ï¼Œä¸æ˜¯å—ï¼Ÿ</p><p>-[Emily] I wouldnâ€™t call it sneaking, Lucy. Anyway, whoâ€™s talking? Youâ€™ve been out all day! æˆ‘ä¸ä¼šç§°å®ƒä¸ºæºœã€‚ä¸ç®¡æ€æ ·ï¼Œæ˜¯è°åœ¨è¯´è¯ï¼Ÿä½ è‡ªå·±å·²ç»å‡ºå»ä¸€æ•´å¤©äº†ï¼</p><p>-Iâ€™m not gonna tell you where. æˆ‘ä¸ä¼šå‘Šè¯‰ä½ æˆ‘å»äº†å“ªé‡Œã€‚</p><p>-You didnâ€™t find it? ä½ æ²¡æœ‰æ‰¾åˆ°ï¼Ÿ</p><p>-No. æ²¡æœ‰ã€‚</p><p>-Youâ€™ll be buying me tea this year, my dear. You wait and see! ä»Šå¹´ä½ ä¼šç»™æˆ‘ä¹°èŒ¶ï¼Œä½ ç­‰ç€çœ‹ï¼</p><p>-Chance would be a fine thing! æœ‰æœºä¼šï¼ˆè®©æˆ‘ç»™ä½ ä¹°èŒ¶ï¼‰å°±å¥½äº†ï¼</p><p>pros and cons - <a href="https://www.merriam-webster.com/dictionary/pros%20and%20cons">ä¼˜ç‚¹å’Œç¼ºç‚¹</a>ã€‚</p><h3 id="æ ‘æ—"><a href="#æ ‘æ—" class="headerlink" title="æ ‘æ—"></a>æ ‘æ—</h3><p>birds chirp - é¸Ÿå„¿å½å½å–³å–³ã€‚</p><p>Spurred coral root - åˆºçŠç‘šæ ¹ã€‚spuré©¬åˆºã€‚â€Itâ€™s an orchidï¼ˆå…°èŠ±ï¼‰, not a flower.â€</p><p>padlock clicks - æŒ‚é”å’”å’”å£°ã€‚</p><p>camera clicks - ç›¸æœºå’”å’”å£°ã€‚</p><p>man moans - ç”·äººå‘»åŸã€‚</p><p>man pants - ç”·äººå–˜æ¯ã€‚pantå–˜æ°”ã€‚</p><p>bird flaps - é¸Ÿå„¿æ‹é£ã€‚</p><p>Emily shrieks - Emilyå°–å«ã€‚</p><h3 id="Emilyå›å®¶è·¯ä¸Š"><a href="#Emilyå›å®¶è·¯ä¸Š" class="headerlink" title="Emilyå›å®¶è·¯ä¸Š"></a>Emilyå›å®¶è·¯ä¸Š</h3><p>brakes screech - åˆ¹è½¦å£°ã€‚brakeåˆ¹è½¦ï¼Œscreechå‘å‡ºå°–å«ã€å™ªå£°ã€‚</p><h3 id="Emilyå®¶"><a href="#Emilyå®¶" class="headerlink" title="Emilyå®¶"></a>Emilyå®¶</h3><p>slow sinister music - sinisteré™©æ¶çš„ã€‚</p><p>bees buzz - èœœèœ‚å—¡å—¡ã€‚</p><p>beehive cottage - èœ‚å·¢å°å±‹ã€‚beehive &#x2F;ËˆbiË.haÉªv&#x2F; èœ‚çªï¼›cottage &#x2F;ËˆkÉ‘Ë.tÌ¬ÉªdÊ’&#x2F; &#x2F;ËˆkÉ’t.ÉªdÊ’&#x2F;å°å±‹ã€‚</p><p>cat meows - meow &#x2F;ËŒmiËˆaÊŠ&#x2F; å–µ</p><p>Come on, out you go - æ¥ï¼Œä½ å‡ºå»ã€‚</p><p>door thuds - é—¨ç °çš„ä¸€å£°ã€‚thud &#x2F;Î¸ÊŒd&#x2F; æ’å‡»å£°ï¼Œç °ã€‚</p><p>dial up phone rattles - æ‹¨å·å˜å˜å£°ã€‚rattle æ‹¨æµªé¼“ï¼›å˜å˜å£°ã€‚</p><p>door rattles.</p><p>bangs. - to (cause something to) make a sudden very loud noise or noises.</p><p>birds squawk - é¸Ÿå«ï¼ˆä¸å¥½çš„å£°éŸ³ï¼‰ã€‚squawk - (of a bird) to make an unpleasantly loud, sharp noise.</p><p>door knocks - æ•²é—¨å£°ã€‚</p><p>door knob screeches - é—¨æŠŠæ‰‹å°–å«ï¼ˆå£°ï¼‰ã€‚</p><p>intense sinister music - æ¿€çƒˆé™©æ¶çš„éŸ³ä¹ã€‚</p><p>dark dreamy music - é»‘æš—æ¢¦å¹»çš„éŸ³ä¹ã€‚</p><h2 id="ç¬¬äºŒå¹•-åˆæ­¥è°ƒæŸ¥"><a href="#ç¬¬äºŒå¹•-åˆæ­¥è°ƒæŸ¥" class="headerlink" title="ç¬¬äºŒå¹• åˆæ­¥è°ƒæŸ¥"></a>ç¬¬äºŒå¹• åˆæ­¥è°ƒæŸ¥</h2><p>-This is it, here, Sir.</p><p>-Really, Troy? Iâ€™d never have guessed.</p><p>crowd chatters - äººç¾¤é—²èŠã€‚</p><p>We only ever meet when thereâ€™s a corpse. - æˆ‘ä»¬åªæœ‰åœ¨æœ‰å°¸ä½“çš„æ—¶å€™ä¼šè§é¢ã€‚corpose - å°¸ä½“ã€‚ever - at any time: Nothing ever happened in this evening. Have you ever gone to London?</p><p>broken neck - è„–å­æ–­äº†ã€‚</p><p>scuff marks on the carpet - åœ°æ¯¯ä¸Šæœ‰ç£¨æŸç—•è¿¹ã€‚scuff vt. ç£¨æŸï¼Œæ“¦ä¼¤ã€‚</p><p>a blow to the back of the neck and then dragged over here - é¢ˆåé­åˆ°ä¸€å‡»ï¼Œç„¶åè¢«æ‹–åˆ°è¿™é‡Œã€‚</p><p>spinster - è€å¤„å¥³ã€‚</p><p>The old girl who lives opposite - ä½åœ¨å¯¹é¢çš„è€å§‘å¨˜ã€‚</p><p>She slammed the door for a start - å¥¹çŒ›åœ°å…³ä¸Šé—¨ã€‚slam çŒ›æ’ã€‚</p><p>She didnâ€™t padlock her tricycle - å¥¹æ²¡æœ‰é”ä¸Šä¸‰è½®è½¦ã€‚padlock æŒ‚é”ã€‚tricycle ä¸‰è½®è½¦ã€‚</p><p>Thereâ€™s no reflection on you, Chief Inspector, but to leave her tricycle like that, she must have been very upset. æ€»ç£å¯Ÿï¼Œå¯¹ä½ æ¥è¯´æ²¡æœ‰ä»€ä¹ˆååº”ï¼ˆæ²¡æœ‰ä»€ä¹ˆå¥½å¥‡æ€ªçš„ï¼‰ï¼Œä½†æ˜¯å°±è¿™æ ·æŠŠå¥¹çš„ä¸‰è½®è½¦ä¸¢ä¸‹ï¼Œå¥¹ä¸€å®šå¾ˆæ²®ä¸§ã€‚</p><p>-Iâ€™ll have to go over tomorrow. I still havenâ€™t told the bees. - go over: to make oneâ€™s way å¼€è¾Ÿæ–°çš„è·¯ã€‚ i.g. go over to store for supplies. å»å•†åº—è´­ä¹°æ—¥ç”¨å“ã€‚</p><p>-Iâ€™m sorry?</p><p>-Well you have to tell the bees when someone dies. Otherwise they just clear off. - <a href="https://en.wikipedia.org/wiki/Telling_the_bees">Telling the bees</a> å…»èœ‚äººæœ‰ä¸€ä¸ªä¼ ç»Ÿï¼Œä¼šå°†é‡å¤§äº‹ä»¶ï¼ˆç”Ÿè€ç—…æ­»å©šå§»ç­‰ï¼‰å‘Šè¯‰èœœèœ‚ï¼Œå¦åˆ™ä¸Šå¤©ä¼šä½¿å…»èœ‚å®¶åº­å—åˆ°æƒ©ç½šï¼ˆæ¯”å¦‚æœ¬ç‰‡ä¸­Miss Bellringer è¯´èœœèœ‚ä¼šå…¨éƒ¨èµ°å¼€ï¼‰ã€‚</p><p>clock bell chimes - é’Ÿå£°å“èµ·ã€‚chime &#x2F;tÊƒaÉªm&#x2F; 1.ï¼ˆé’Ÿï¼‰å“èµ·ï¼ˆå°¤å…¶æ˜¯å‘Šè¯‰ä½ åˆ°å‡ ç‚¹äº†ï¼‰ï¼›2. ä¸æŸæŸç›¸åŒæˆ–å…·æœ‰ç›¸åŒçš„æ•ˆæœï¼še.g. Her views on life didnâ€™t chime with mine. å¥¹çš„äººç”Ÿè§‚å’Œæˆ‘ä¸å¤ªä¸€è‡´ã€‚</p><p>tower bell rings.</p><p>-Clear off her rocker, if you ask me. - rock: å²©çŸ³ï¼›å‰åæ‘‡æ™ƒï¼Œrock musicæ‘‡æ»šä¹ã€‚rockerï¼Œæ‘‡æ¤…ï¼Œï¼ˆæ‘‡æ¤…ç­‰ä¸‹é¢çš„ï¼‰ä¸¤æ¡å¼¯æœ¨ï¼ˆç”¨æ¥æ‘‡æ™ƒï¼‰ä¹‹ä¸€ï¼›off oneâ€™s rocker: å¤„äºæåº¦æ··ä¹±æˆ–ç²¾ç¥ä¸å¥å…¨çš„çŠ¶æ€ã€‚in a state marked by extreme confusion or mental unsoundness: â€¦ he felt dizzy, slightly off his rocker at this extraordinary assailment of his senses.</p><p>-You didnâ€™t believed her?</p><p>-Well, what she got to go on? A slammed door and a trike that wasnâ€™t padlocked. Itâ€™s a waste of time.</p><p>undertaker - æ®¡ä»ªå‘˜ã€‚</p><p>-I based in Causton but <strong>it happens</strong> I live here in Badgerâ€™s Drift and I thought I ought to <strong>pop by</strong>. Miss Simpson was a client. æˆ‘åœ¨Caustonä¸Šç­ï¼Œä½†æ˜¯ç¢°å·§æˆ‘ä½è¿™é‡Œã€‚pop by: é¡ºä¾¿è¿‡æ¥ä¸€ä¸‹ï¼›pop, (spoken) to go somewhere for a short time.</p><p>-Iâ€™m sorry?</p><p>-Sheâ€™d pre-paid. Our <strong>Satin</strong> Service. Itâ€™s one of our complete funeral packages. Very <strong>up-market</strong>, although between you and me. I let her have it at a discount (sniffs). She taught my mom, you know. - Satinï¼Œç¼é¢ï¼Œç»¸ç¼ï¼Œè¿™é‡Œåº”è¯¥æŒ‡æœåŠ¡çš„ç­‰çº§ï¼Œç±»ä¼¼é‡‘å¡ä¼šå‘˜ã€é“¶å¡ä¼šå‘˜ã€‚</p><p>-What can I do for you, Mister Rainbird?</p><p>-I was wondering if I could take her, <strong>the deceased</strong>. - decease&#x3D;death. the deceasedå»ä¸–çš„äººã€‚</p><p>-Oh, Iâ€™m afraid that wonâ€™t be possible for a little while.</p><p>-Oh! You do suspect some naughtiness. It was her neck, I undertand. ä½ ç¡®å®æ€€ç–‘æœ‰ä¸€äº›æ£è›‹é¬¼ã€‚è‡´å‘½ä¼¤åœ¨é¢ˆéƒ¨ï¼Œæˆ‘çŸ¥é“çš„ã€‚- naughty é¡½çš®çš„ï¼›naughtiness åè¯ï¼Œé¡½çš®ã€‚</p><p>-[Troy] Who told you that?</p><p>-Come on, everybody knows that by now. Itâ€™s that sort of village.</p><p>-[Troy] Well, you canâ€™t have the body yet. All right? Sir?</p><p>-[to Barnaby] Oh, I see youâ€™ve got a right constable there. You let me know when youâ€™re ready for me.</p><p>-[Troy] See the car?</p><p>-Yes.</p><p>-You wouldnâ€™t have thought they were so well paid, would you, undertakers? ä½ åº”è¯¥æ²¡æœ‰æƒ³åˆ°æ®¡ä»ªå‘˜ä¼šè·å¾—å¦‚æ­¤é«˜çš„æŠ¥é…¬ï¼Œä¸æ˜¯å—ï¼Ÿ</p><p>-Check the camera, and the telephones. Find out what calls did Miss Simpson made after six oâ€™clock.</p><p>-So youâ€™re taking it seriously then, sir?</p><p>-No, Troy, Iâ€™m just filling in time until tea.</p><p>-Right! Oh, camera and telephone, right. What about you?</p><p>-I must find a doctor.</p><p>-Something wrong, sir?</p><p>-Emily Simpsonâ€™s doctor, Troy. Maybe she did suffer from dizzy spells. Maybe she did just fail. Either way, I want to know. - spell æ‹¼å†™ï¼›å’’è¯­ã€‚</p><h3 id="åŒ»ç”Ÿçš„å®¶é‡Œ"><a href="#åŒ»ç”Ÿçš„å®¶é‡Œ" class="headerlink" title="åŒ»ç”Ÿçš„å®¶é‡Œ"></a>åŒ»ç”Ÿçš„å®¶é‡Œ</h3><p>åŒ»ç”Ÿçš„æ‹›ç‰Œï¼š</p><pre><code>DR. TREVOR LESSITERM.B B.S M.R.C.G.PPHSICIAN &amp; SURGEON</code></pre><p>DR. - Doctorã€‚Trevor Lessiteræ˜¯åŒ»ç”Ÿçš„åå­—ã€‚</p><p>M.B B.S - Bachelor of Medicine, Bachelor of Surgery å†…å¤–å…¨ç§‘åŒ»å­¦å£«</p><p>M.R.C.G.P - Membership of the Royal College of General Practitioners è‹±å›½çš‡å®¶å…¨ç§‘åŒ»ç”Ÿå­¦é™¢ä¼šå‘˜èµ„æ ¼ã€‚pratitioner ä»ä¸šè€…ã€‚general pratitioner å…¨ç§‘åŒ»ç”Ÿã€‚</p><p>She is remarkably fit for her age. - åœ¨å¥¹è¿™ä¸ªå¹´é¾„ï¼Œå¥¹æ˜¾å¾—éå¸¸å¥åº·ã€‚fit å¥åº·çš„ã€‚</p><p>I liked to drop in at the end of my rounds. You know, glass of sherry and all that. - go round to sbâ€™s house æ‹œè®¿æŸäººã€‚ drop in - é¡ºä¾¿è¿‡æ¥ã€‚</p><p>cricket æ¿çƒã€‚</p><p>But she never <a href="https://www.collinsdictionary.com/zh/dictionary/english/get-around-to">got round to</a> saying what it was. - å¥¹æ²¡èƒ½è¯´å‡ºæ¥æ˜¯ä»€ä¹ˆäº‹ã€‚get round to åšæˆäº†ä¸€ä»¶ä½ å› å…¶ä»–äº‹æƒ…è¢«è€½æäº†äº‹ã€‚</p><p>Iâ€™ve got to talk to someone. - æˆ‘å¾—è¿™ä¸ªäººè¯´è¯´è¯ã€‚have (got) to ä¸å¾—ä¸ã€‚</p><p>-Did she say what it was?</p><p>-No.</p><p>-Didnâ€™t you press her?</p><p>-Weâ€™re not meant to. - æˆ‘ä»¬ä¸æ˜¯æ•…æ„çš„ã€‚</p><p>-And there was nothing more?</p><p>-Iâ€™m sorry, Inspector. I know there was something else but I canâ€™t think. æˆ‘çŸ¥é“è¿˜æœ‰äº›äº‹æƒ…ï¼Œä½†æ˜¯æˆ‘æƒ³ä¸èµ·æ¥ã€‚</p><p>-Well, if it does come to you, can you give us ring? å½“ä½ æƒ³èµ·æ¥ï¼Œèƒ½ä¸èƒ½ç»™æˆ‘ä»¬ä¸€ä¸ªç”µè¯ã€‚</p><p>-Yes, of course.</p><p>ring off - æŒ‚æ–­ç”µè¯ã€‚</p><p>Inspector - ç£å¯Ÿã€‚</p><p>scrambled eggs - ç‚’é¸¡è›‹ã€‚scramble äº‰å¤ºã€‚</p><p>Stuck with a heavy object as yet unidentified at the base of the neck. è„–å­æ ¹éƒ¨è¢«ä¸€ä¸ªå°šæœªè¾¨è®¤çš„é‡ç‰©å¡ä½ã€‚</p><p>sombre music - é˜´æ²‰çš„éŸ³ä¹ã€‚</p><p>The grass flattened, brambles broken. è‰è¢«å‹æ‰äº†ï¼Œè†æ£˜æ–­äº†ã€‚</p><p>What, you think someoneâ€™s been having it away? ä½ è®¤ä¸ºæœ‰äººæŠŠå®ƒä»¬æ‹¿èµ°äº†ï¼Ÿ</p><p>Two people bonking? ä¸¤ä¸ªäººææ–—&#x2F;æ€§äº¤ï¼Ÿ</p><p>tweezers - é•Šå­ã€‚</p><p>-A piece of black fibre. ä¸€ç‰‡é»‘è‰²çº¤ç»´ã€‚</p><p>-Off their clothes. ä»ä»–ä»¬çš„è¡£æœä¸Šæ‰ä¸‹æ¥çš„ï¼Ÿ</p><p>-No, I donâ€™t think so. Iâ€™d say a blanket or rug, something like that. æˆ‘è®¤ä¸ºæ˜¯æ¯¯å­æˆ–åœ°æ¯¯ã€‚</p><p>I want the whole place gone over. - <a href="https://www.collinsdictionary.com/zh/dictionary/english/go-over">go over</a> ä»”ç»†æ£€æŸ¥ã€‚</p><p>Do you really think thatâ€™s what it came down to, sir? ä½ çœŸçš„è®¤ä¸ºè¿™å°±æ˜¯é—®é¢˜æ‰€åœ¨å—ï¼Ÿ</p><p>Unless it was adultery. é™¤éæ˜¯é€šå¥¸ã€‚</p><p>I suppose they could have been arse-bandits. - æˆ‘çŒœæƒ³å¯èƒ½ä»–ä»¬æ˜¯å±è‚¡å°å·ï¼ˆåŒæ€§æ‹ï¼‰ã€‚arseï¼ˆç²—é²çš„è¯ï¼‰å±è‚¡ã€‚bandit æœ‰æ­¦å™¨çš„å°å·ã€‚</p><p>You mean â€œhomesexualsâ€, Troy?  Troyï¼Œä½ æ˜¯è¯´åŒæ€§æ‹ï¼Ÿ</p><p>You are as politically correct as <a href="https://en.wikipedia.org/wiki/Nuremberg_rallies">Nuremberg rally</a>. ä½ å’Œçº½ä¼¦å ¡é›†ä¼šï¼ˆå¾·å›½çº³ç²¹ä¸€å¹´ä¸€åº¦çš„å…šä»£ä¼šï¼‰ä¸€æ ·æ”¿æ²»æ­£ç¡®ã€‚</p><h3 id="Rainbirdå®¶"><a href="#Rainbirdå®¶" class="headerlink" title="Rainbirdå®¶"></a>Rainbirdå®¶</h3><p>eerie music - æ€ªå¼‚çš„éŸ³ä¹ã€‚</p><p>pot to kettle. æŠŠé”…é‡Œï¼ˆçš„æ°´ï¼‰å€’åˆ°å£¶é‡Œï¼Œåº”è¯¥æ˜¯ä¸ŠèŒ¶çš„æ„æ€ã€‚ï¼ˆå½±ç‰‡ä¸­ï¼ŒèŒ¶æ°´æ˜¯è£…åœ¨ç“·å£¶é‡Œï¼‰</p><p>eyrie - æ˜¯ aerie çš„å¦ä¸€ç§å†™æ³•ï¼Œé¹°å·¢ã€‚an elevated often secluded dwelling, structure, or position è¾ƒé«˜ä¸”é€šå¸¸åƒ»é™çš„ä½å®…ã€ç»“æ„æˆ–ä½ç½®ã€‚<a href="https://www.collinsdictionary.com/zh/dictionary/e%3Cb%3Englis%3C/b%3Eh/eyrie">If you refer to a place such as a house or a castle as an eyrie, you mean it is built high up and is difficult to reach.</a></p><p>My hide. Yes, Iâ€™m a keen observer of wild life, birds. æˆ‘çš„éšè—çˆ±å¥½ï¼Œæˆ‘å–œæ¬¢è§‚å¯Ÿé‡ç”ŸåŠ¨ç‰©â€”â€”é¸Ÿã€‚</p><p>I thought I saw a pair of binoculars. æˆ‘æƒ³æˆ‘çœ‹è§äº†ä¸€å‰¯æœ›è¿œé•œã€‚</p><p>trolley æ‰‹æ¨è½¦ã€‚</p><p>Do help yourself. è¯·è‡ªä¾¿ã€‚</p><p>widower - é³å¤«ã€‚widow å¯¡å¦‡ã€‚</p><p>The clubs are anchovy. Salmon spread in the hearts. Marmite spades and potted meat diamonds.</p><p>æ¢…èŠ±çŠ¶çš„anchovyã€‚Salmon spreadæ˜¯å¿ƒå½¢çš„ã€‚é»‘æ¡ƒçŠ¶çš„Marmiteã€‚æ–¹å—çŠ¶çš„potted meat. - potted: preserved in a pot, jar, or can: potted meat.</p><p>Not that youâ€™ll find her there. å¹¶ä¸æ˜¯è¯´ä½ ä¼šåœ¨é‚£é‡Œæ‰¾åˆ°å¥¹ã€‚</p><p>Done very nicely for herself. ä¸ºè‡ªå·±åšå¾—å¾ˆå¥½ã€‚</p><p>-Iced sombrero, constable. - Iced sombreroå†°é˜”è¾¹å¸½ï¼ˆåº”è¯¥æ˜¯è¿™ç§å½¢çŠ¶çš„é£Ÿç‰©ï¼‰ï¼Œconstable è­¦å‘˜ã€‚constabulary è­¦å¯Ÿå±€ã€‚</p><p>-No, thank you. And Iâ€™m a sergeant.</p><p><a href="https://en.wikipedia.org/wiki/Police_ranks_of_the_United_Kingdom">å¤§ä¸åˆ—é¢ è­¦å¯Ÿç­‰çº§ï¼ˆç”±é«˜åˆ°ä½ï¼‰</a>ï¼š</p><p>Chief constable, Deputy chief constable, Assistant chief constable, Chief superintendentæ€»è­¦å¸, Superintendentè­¦å¸, Chief inspectoræ€»ç£å¯Ÿ, Inspectorç£å¯Ÿ, Sergeantè­¦é•¿, Constableè­¦å‘˜. - å‚è€ƒ<a href="https://zh.wikipedia.org/zh-hans/%E5%80%AB%E6%95%A6%E8%AD%A6%E5%AF%9F%E5%BB%B3">ç»´åŸºç™¾ç§‘</a>ã€‚</p><p>Detectiveæ˜¯è­¦å¯Ÿçš„å‰ç¼€ä¹‹ä¸€ï¼Œæ¯”å¦‚Detective Chief Inspectorã€‚è¿™ç§è­¦å¯Ÿä¸€èˆ¬ç©¿ä¾¿è¡£ï¼ŒèŒä½å’ŒèŒçº§å’Œåˆ¶æœè­¦å¯Ÿä¸€æ ·ã€‚</p><p>-I mean what are you likely to see flying at that time? æˆ‘çš„æ„æ€ä½ é‚£ä¸ªæ—¶å€™æƒ³è¦çœ‹ä»€ä¹ˆé£ç¦½ï¼Ÿ</p><p>-Owls. çŒ«å¤´é¹°ã€‚</p><p>These two give me the creeps. è¿™ä¸¤ä¸ªäººè®©æˆ‘æ¯›éª¨æ‚šç„¶ã€‚<a href="https://dictionary.cambridge.org/us/dictionary/english/creep">give someone the creeps</a> - to cause someone to have uncomfortable feelings of nervousness or fear:</p><p>-You donâ€™t suppose it was him in the woods, do you? ä½ è¯¥ä¸ä¼šè®¤ä¸ºæ˜¯ä»–åœ¨æ ‘æ—é‡Œå§ï¼Ÿ</p><p>-I somehow doubt it, Troy. æˆ‘æœ‰ç‚¹æ€€ç–‘ã€‚</p><p>They certainly had it in for her. ä»–ä»¬å½“ç„¶æ˜¯ä¸ºäº†å¥¹ã€‚</p><h3 id="Barnabyå®¶"><a href="#Barnabyå®¶" class="headerlink" title="Barnabyå®¶"></a>Barnabyå®¶</h3><p><a href="https://en.wikipedia.org/wiki/%27Tis_Pity_She%27s_a_Whore">â€˜Tis Pity Sheâ€™s a Whore</a>. å¯æƒœå¥¹æ˜¯ä¸€ä¸ªå¦“å¥³ï¼ŒJohn Ford å¯¼æ¼”çš„éŸ³ä¹å‰§ã€‚â€™Tis æ˜¯ it is çš„ç¼©å†™ã€‚</p><p>Would you go through my lines with me? ä½ å¯ä»¥å¸®æˆ‘ä¸€èµ·ç»ƒä¹ ä¸€ä¸‹å°è¯å—ï¼Ÿ</p><p>I doubt heâ€™ll have time. æˆ‘æ€€ç–‘ä»–æ˜¯å¦æœ‰æ—¶é—´ã€‚</p><p>quail - é¹Œé¹‘ã€‚</p><p>(Telephone rings) Iâ€™ll get it. æˆ‘å»æ¥ç”µè¯ã€‚</p><p>In the pond behind the quarry. åœ¨é‡‡çŸ³åœºåé¢çš„æ± å¡˜é‡Œã€‚</p><p>-Think what the police would make of it if their forensic people got hold of it. æƒ³æƒ³è­¦å¯Ÿä¼šæ€ä¹ˆæƒ³ï¼Œå¦‚æœä»–ä»¬çš„æ³•åŒ»äººå‘˜æ‹¿åˆ°äº†å®ƒã€‚<a href="https://dictionary.cambridge.org/us/dictionary/english/make-of">make of</a> - to have an impression or understanding about something. å¯¹æŸäº‹æœ‰å°è±¡æˆ–æœ‰äº†è§£ã€‚</p><p>-Theyâ€™d have a field day. ä»–ä»¬ä¼šåº¦è¿‡æ„‰å¿«çš„ä¸€å¤©ã€‚<a href="https://dictionary.cambridge.org/us/dictionary/english/field-day">field day</a> ç‰¹æ®Šçš„ä¸€å¤©ã€‚</p><p>-This is the big one, Denny. This is going to make us very, very rich. è¿™æ˜¯æœ€é‡è¦çš„ï¼Œè¿™ä¼šè®©æˆ‘å˜å¾—éå¸¸å¯Œæœ‰ã€‚</p><p>Two colomns in the local rag and a coronerâ€™s re-port. - coroner éªŒå°¸å®˜ã€‚</p><h3 id="Tye-House"><a href="#Tye-House" class="headerlink" title="Tye House"></a>Tye House</h3><p>tyres screech - è½®èƒå°–å«å£°ã€‚</p><p>bright upbeat music - æ˜äº®æ¬¢å¿«çš„éŸ³ä¹ã€‚upbeat ä¹è§‚çš„ã€‚</p><p>-How the other half live?</p><p>-Rather less then half Iâ€™d say. æˆ‘è¯´ç›®å‰è¿˜ä¸æ˜¯ï¼ˆå¯Œè±ªçš„ï¼‰å¦ä¸€åŠã€‚</p><p>estate manager - ç‰©ä¸šç»ç†ã€‚</p><p>-I donâ€™t suppose you were in the village at any time at between six and eight on Wednesday? æˆ‘æƒ³ä½ å‘¨ä¸‰å…­ç‚¹åˆ°å…«ç‚¹ä¹‹é—´çš„ä»»ä½•æ—¶é—´éƒ½ä¸ä¼šåœ¨æ‘å­é‡Œï¼Ÿ</p><p>-No. Donâ€™t remember where I was. Out in the fields. ä¸åœ¨ã€‚ä¸å¤ªè®°å¾—æˆ‘å»äº†å“ªé‡Œã€‚æˆ‘å‡ºå»åˆ°ç”°é‡é‡Œå»äº†ã€‚</p><p>drawing room - å®¢å…ã€‚</p><p>late wife - å·²æ•…çš„å¦»å­ã€‚</p><p>as a matter of fact - äº‹å®ä¸Šã€‚</p><p>-If itâ€™s not too painful, sir, Iâ€™d be interested to know how your wife died. å¦‚æœä¸æ˜¯å¤ªç—›è‹¦çš„è¯ï¼Œå…ˆç”Ÿï¼Œæˆ‘å¾ˆæƒ³çŸ¥é“ä½ å¦»å­æ˜¯æ€ä¹ˆæ­»çš„ã€‚</p><p>-It is painful. And I donâ€™t see how itâ€™s relevant. å¾ˆç—›è‹¦ã€‚å¹¶ä¸”æˆ‘æ²¡æœ‰çœ‹åˆ°ï¼ˆè¿™ä¸¤ä»¶äº‹çš„ï¼‰ç›¸å…³æ€§ã€‚</p><p>-Miss Simpson could have known your wife as Annabella. As a nick name, pet name or something like that. If there is a connection - - Simpsonå¥³å£«å¯èƒ½çŸ¥é“ä½ çš„å¦»å­æ˜¯Annabellaï¼Œä¸€ä¸ªæ˜µç§°ã€çˆ±ç§°æˆ–å…¶ä»–å•¥çš„ã€‚</p><p>-There is no connection.</p><p>-We need to be sure.</p><p>-(sighs) If you insist. It was two years agoâ€¦ å¦‚æœä½ åšæŒçš„è¯ã€‚</p><p>And Bellaâ€™s sister had come along. Phyllis, Phyllis Cadell. She didnâ€™t shoot that ofen and I always wondered why she closed that day of all days. - Bellaçš„å§å¦¹Phyllis Cadellä¹Ÿæ¥äº†ï¼Œå¥¹ä¸ç»å¸¸å°„å‡»ï¼Œæˆ‘å¸¸å¸¸æƒ³çŸ¥é“ï¼Œä¸ºä»€ä¹ˆé‚£å¤©å¥¹æ•´å¤©å…³é—¨ï¼ˆå¯èƒ½æ˜¯æœ‰ä¸ªç§äººå•†åº—ï¼‰ã€‚</p><p>Heâ€™d come as a beater, to scare the birds. ä»–æ¥çš„ä»»åŠ¡æ•²å‡»å“å”¬é¸Ÿã€‚</p><p>I suppose itâ€™s always easy to talk about these thing with hindsight but Iâ€™m often felt think we were ill-fated that day. æˆ‘æƒ³äº‹åè°ˆè®ºè¿™äº›äº‹æƒ…æ€»æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œä½†æˆ‘å¸¸å¸¸è§‰å¾—æˆ‘ä»¬é‚£å¤©è¿æ°”ä¸å¥½ã€‚</p><p>Bella tripped on a root and twisted her ankle rather badly. - Bellaè¢«æ ‘æ ¹ç»Šå€’å¹¶ä¸”è„šè¸è¢«æ‰­ä¼¤å¾—éå¸¸ä¸¥é‡ã€‚</p><p>But by the time ambullance arrived it was all over. ä½†å½“æ•‘æŠ¤è½¦åˆ°è¾¾æ—¶ï¼Œä¸€åˆ‡éƒ½ç»“æŸäº†ã€‚</p><p>dog whines - ç‹—å‘œå‘œå£°ã€‚</p><p>generator - å‘ç”µæœºã€‚</p><p>marquee - å¸ç¯·ã€‚</p><p>You finished it, I take it? ï¼ˆè­¦å®˜ï¼‰ä½ çš„é—®è®¯ç»“æŸäº†å§ï¼Ÿæˆ‘å¯ä»¥åšå…¶ä»–çš„äº‹æƒ…å§ï¼Ÿ</p><p>He was a sort of guardian. ä»–æ˜¯æŸç§å®ˆæŠ¤è€…ã€‚</p><p>We wonâ€™t take up any more or your time. æˆ‘ä»¬ä¸å†å ç”¨æ‚¨çš„æ—¶é—´äº†ã€‚</p><p>exhale - å‘¼æ°”ã€‚</p><p>But I do what I can even Iâ€™m quite worn out. - æˆ‘å°½æˆ‘æ‰€èƒ½å¸®å¿™ï¼Œå³ä½¿æˆ‘ç´¯åäº†ã€‚wear ç£¨æŸã€‚</p><p>mistress - å¥³ä¸»äººï¼Œå…·æœ‰æƒå¨æˆ–æ§åˆ¶åœ°ä½çš„å¥³äººï¼›æƒ…å¦‡ã€‚</p><p>Henry has a cottage on the estate and Iâ€™m being pensioned off there. Iâ€™m quite looking forward to it.</p><p>Pathetic. - å¯æ€œçš„ã€‚</p><p>She was scared shitless. - å¥¹è¢«å“å¾—å±æ»šå°¿æµã€‚</p><p>You do have a way with words, donâ€™t you?</p><p>What are we investigating, sir? Emily Simpson or Belly Trace?</p><p>Thereâ€™s no point asking me about it. æ²¡æœ‰å¿…è¦é—®æˆ‘è¿™ä¸ªé—®é¢˜ã€‚</p><p>I donâ€™t have anything to do with the village. And the village doesnâ€™t have much to do with me.æˆ‘å’Œé‚£æ‘å­æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚é‚£æ‘å­å’Œæˆ‘ä¹Ÿæ²¡æœ‰å¤ªå¤§å…³ç³»ã€‚</p><p>-Could you tell me where you were on last Wednesday?</p><p>-No. I donâ€™t know. Maybe Iâ€™m here, Iâ€™m most days. </p><p>-Not much of life. æ²¡ä»€ä¹ˆç”Ÿæ´»ã€‚</p><p>-My work is my life. You wouldnâ€™t understand that. æˆ‘çš„å·¥ä½œå°±æ˜¯æˆ‘çš„ç”Ÿæ´»ã€‚ä½ ä¸ä¼šç†è§£è¿™ä¸€ç‚¹ã€‚I might have gone for a walk or something, I donâ€™t remember.</p><p>Missis - Miss, Misses å°å§ã€‚</p><p>I ran hell for leather back to Tye House. - hellè¡¨ç¤ºç¨‹åº¦ï¼ŒåŠ å¼ºè¯­æ°”ã€‚</p><p>Iâ€™ll say one thing for Katherine. She certainly doesnâ€™t come cheap. æˆ‘è¦ä¸ºKatherineè¯´ä¸€ä»¶äº‹ï¼Œå¥¹çš„ä»·æ ¼å½“ç„¶ä¸ä¾¿å®œã€‚</p><h3 id="Barnabyå®¶-1"><a href="#Barnabyå®¶-1" class="headerlink" title="Barnabyå®¶"></a>Barnabyå®¶</h3><p>intense uneasy music - å¼ºçƒˆä¸å®‰çš„éŸ³ä¹ã€‚</p><p>-This noble creature was in every part. So angel-like, so glorious, that a woman, who was not human, as was I â€“ è¿™ä¸ªé«˜è´µçš„ç”Ÿç‰©æ— å¤„ä¸åœ¨ã€‚</p><p>-Had not been but human. åªä¸è¿‡æ˜¯äººç±»ã€‚</p><p>-Who had not been but human, as was I. Would have kneeled to him and begged for love. è°ä¸æ˜¯äººç±»ï¼Œå°±åƒæˆ‘ä¸€æ ·ã€‚ä¼šå‘ä»–ä¸‹è·ªå¹¶ä¹çˆ±ã€‚You, why you are not worthy once to name. His name without true worship, or indeed. Unless you kneeled, to have another name him. ä½ ï¼Œä¸ºä½•è¿ä¸€æ¬¡çš„åå­—éƒ½ä¸é…ã€‚ ä»–çš„åå­—æ²¡æœ‰çœŸæ­£çš„å´‡æ‹œï¼Œæˆ–è€…è¯´ç¡®å®å¦‚æ­¤ã€‚ é™¤éä½ è·ªä¸‹æ¥ç»™ä»–èµ·å¦ä¸€ä¸ªåå­—</p><p>-What was he called?</p><p>-We not come to that. æˆ‘ä»¬å¹¶æ²¡æœ‰è°ˆåˆ°è¿™ä¸ªã€‚Let it suffice that you shall have the glory. åªè¦ä½ æ‹¥æœ‰è£è€€å°±è¶³å¤Ÿäº†ã€‚To father what so brave a father got. å¯¹äºçˆ¶äº²æ¥è¯´ï¼Œä¸€ä¸ªçˆ¶äº²æœ‰å¤šä¹ˆå‹‡æ•¢ã€‚</p><p>That sounded good. Itâ€™s coming along.</p><p>Sheâ€™s wonderful. Weâ€™re gonna have to go up and see it.</p><p>-If I ever manage to learn it all. å¦‚æœæˆ‘èƒ½å­¦ä¼šè¿™ä¸€åˆ‡å°±å¥½äº†ã€‚manage to do è®¾æ³•åšï¼Œï¼ˆå°½ç®¡æœ‰å›°éš¾ï¼‰æˆåŠŸåšã€‚</p><p>Iâ€™ve got a nice Pot-au-feu in the deep freeze. æˆ‘æœ‰ä¸€ä»½ç¾å‘³çš„å†·å†»ç‚–é”…ã€‚<a href="https://en.wikipedia.org/wiki/Pot-au-feu">Pot-au-feu</a> (&#x2F;ËŒpÉ’toÊŠËˆfÉœËr&#x2F;; French: [pÉ”tâ€¿o fÃ¸] ( listen); â€œpot on the fireâ€) is a French dish of slowly boiled meat and vegetables, usually served as two courses: first the broth (bouillon) and then the meat (bouilli) and vegetables.</p><p>horse nickers - nicker: 1, (of a horse) give a soft, low, breathy whinny. 2, a nickering sound.</p><p>white lilies - ç™½ç™¾åˆã€‚</p><p>This is the Satin Service.</p><p>Whimsical sombre music - å¼‚æƒ³å¤©å¼€çš„å¿§éƒéŸ³ä¹ã€‚</p><p>Youâ€™ve withdrawn 500 pounds from our joint reserve account. æ‚¨å·²ç»ä»æˆ‘ä»¬çš„è”åˆå‚¨è“„è´¦æˆ·ä¸­æå–äº†500è‹±é•‘ã€‚</p><p>overdraw - é€æ”¯ã€‚</p><p>I thought Iâ€™d leave you two to bicker in private. æˆ‘æƒ³æˆ‘åº”è¯¥è®©ä½ ä¿©ç§ä¸‹æ–—å˜´ã€‚</p><p>I know that my redeemer liveth, and that he shall stand upon the last on the earth. Whom I shall see for myself, and mine eyes shall behold, and not another.ï¼ˆç¥·å‘Šï¼‰æˆ‘çŸ¥é“æˆ‘çš„æ•‘ä¸–ä¸»è¿˜æ´»ç€ã€‚- mine ç”¨åœ¨å…ƒéŸ³ä¹‹å‰ï¼Œç›¸å½“äºmy.</p><p>Missis Rainbird no more a bird-wather than I am. - Rainbirdå¥³å£«å’Œæˆ‘ä¸€æ ·éƒ½ä¸æ˜¯é¸Ÿç±»è§‚å¯Ÿè€…ã€‚</p><p>personalised Porsche. ä¸ªæ€§åŒ–çš„ä¿æ—¶æ·ã€‚</p><p>Rain stopped play. é›¨åœæ­¢äº†æ¯”èµ›ã€‚</p><p>His wifeâ€™s just as bad. ä»–çš„å¦»å­åŒæ ·ç³Ÿç³•ã€‚</p><p>Itâ€™s early closing. å…³é—¨è¿˜æ—©å‘€ã€‚</p><p>Thereâ€™s something wrong and something that doesnâ€™t add up. æœ‰äº›åœ°æ–¹å‡ºäº†é—®é¢˜ï¼Œæœ‰äº›åœ°æ–¹ä¸åˆé€»è¾‘ã€‚</p><p>Maybe he was. Maybe he simply mistaken in his account. But he wasnâ€™t telling us the truth. ä»–å¯èƒ½æ˜¯ï¼ˆåœ¨æ’’è°ï¼‰ï¼Œä¹Ÿå¯èƒ½åªæ˜¯è®°é”™äº†ã€‚ä½†æ˜¯ä»–æ²¡æœ‰å‘Šè¯‰æˆ‘ä»¬äº‹å®ã€‚</p><p>Why did he run all the way back to Tye House to call the ambullance when the accident happened on the other side of the village? äº‹æ•…å‘ç”Ÿåœ¨æ‘å­çš„å¦ä¸€è¾¹ï¼Œä¸ºä»€ä¹ˆä»–è¿˜è¦åƒé‡Œè¿¢è¿¢è·‘å›The Houseå«æ•‘æŠ¤è½¦å‘¢ï¼Ÿ</p><p>-It seems theyâ€™re all bloody liars. çœ‹èµ·æ¥ä»–ä»¬éƒ½æ˜¯è¯¥æ­»çš„æ’’è°è€…ã€‚bloody - used to express anger or to emphasize what you are saying in a slightly rude way.</p><p>-One of them is something more. å…¶ä¸­ä¸€ä¸ªæœ‰æ›´å¤šä¸œè¥¿ã€‚</p><p>Forasmuch as it hath pleased Almighty God of his great mercy to take unto himself, the soul of our dear sister here departed, we therefore commit her body to the ground; earth to earth, ashes to ashes, dust to dust; Amen.</p><p>Itâ€™s early days yet. ç°åœ¨è¿˜æ—©å‘¢ã€‚</p><p>Not for poor Emily.</p><p>Come and have sherry. æ¥å–æ¯é›ªè‰é…’å§ï¼I feel the need of a drink. Iâ€™m afraid funerals do that for me. æˆ‘è§‰å¾—éœ€è¦å–ä¸€æ¯ï¼Œææ€•è‘¬ç¤¼å¯¹æˆ‘æ¥è¯´å°±æ˜¯è¿™æ ·ã€‚</p><p>polio - è„Šé«“ç°è´¨ç‚ã€‚</p><p>pensive music - pensiveæ²‰æ€çš„ã€‚</p><p>She adored him. Still does for all I know. - å¥¹å´‡æ‹œ&#x2F;å–œæ¬¢ä»–ï¼Œæ®æˆ‘æ‰€çŸ¥ï¼ˆfor all I knowï¼‰ä»ç„¶å¦‚æ­¤ã€‚</p><p>She was Herryâ€™s ward. å¥¹æ˜¯Herryçš„è¢«ç›‘æŠ¤äººã€‚</p><p>Herry sort of adopted them. - Herryæœ‰ç‚¹æ”¶å…»äº†ä»–ä»¬ã€‚</p><p>set them up in a gamekeeperâ€™s cottage on the estate. - æŠŠä»–ä»¬æ”¾åœ¨åº„å›­çš„çŒåœºçœ‹å®ˆäººçš„å°å±‹é‡Œã€‚</p><p>They are very young then, barely in their teens. - ä»–ä»¬é‚£æ—¶å€™è¿˜å¾ˆå°ï¼Œæ‰åå‡ å²ã€‚</p><p>nanny - ä¿å§†ã€‚</p><p>There was a nanny, Mary Sharpe, Nanny Sharpe, which was meant to look after them. - æœ‰ä¸€ä¸ªä¿å§†ï¼Œå«Sharpeï¼Œæ˜¯ä¸ºäº†ç…§é¡¾ä»–ä»¬ã€‚</p><p>-But she had a terrible time. ä½†æ˜¯å¥¹åº¦è¿‡äº†ä¸€æ®µç³Ÿç³•çš„æ—¶å…‰ã€‚</p><p>-In what way? ä»¥ä»€ä¹ˆæ ·çš„æ–¹å¼ï¼Ÿ</p><p>-The children were always fighting. Endless rows. - å­©å­ä»¬æ€»æ˜¯æ‰“æ¶ï¼Œæ— ä¼‘æ­¢åœ°äº‰åµã€‚row å¯æ•°åè¯ï¼Œäº‰åµï¼š<a href="https://www.collinsdictionary.com/zh/dictionary/english/row">A row is a serious disagreement between people or organizations</a>.</p><p>In the end, Mary upped and left. - æœ€åï¼ŒMaryèµ·èº«ç¦»å¼€äº†ã€‚up åŠ¨è¯ï¼Œå¢åŠ ï¼›çªç„¶ç¦»å¼€ï¼š<a href="https://www.collinsdictionary.com/zh/dictionary/english/up">If you up and leave a place, you go away from it, often suddenly or unexpectedly</a>.</p><p>Now sheâ€™s retired down on the coast. ç°åœ¨å¥¹åœ¨æµ·è¾¹é€€ä¼‘äº†ã€‚</p><p>-If you ask me, Katherine is the one to look out for. å¦‚æœä½ é—®æˆ‘ï¼Œå‡¯ç‘Ÿç³æ˜¯å€¼å¾—ç•™æ„çš„äººã€‚</p><p>-Meaning? æ„æ€æ˜¯ï¼Ÿ</p><p>-That girl is far too beautiful for other peopleâ€™s good. é‚£ä¸ªå¥³å­©å¤ªæ¼‚äº®äº†ï¼Œä¸åˆ©äºåˆ«äººã€‚That girl is far too beautiful for other peopleâ€™s good. If she was found bonking in the wood, she has the most to lose. å¦‚æœå¥¹è¢«å‘ç°åœ¨æ ‘æ—é‡Œæ‰“æ»šï¼ˆæ€§äº¤ï¼‰ï¼Œå¥¹çš„æŸå¤±å°†æ˜¯æœ€å¤§çš„ã€‚</p><p>Sheâ€™s got a point. å¥¹è¯´å¾—æœ‰é“ç†ã€‚</p><p>it barks its head off. å®ƒæ‹¼å‘½ç‹‚å«ã€‚its headåœ¨è¿™é‡Œè¡¨ç¤ºå¼ºçƒˆç¨‹åº¦ã€‚Youâ€™d have heard it a mile away! ä½ ä¸€è‹±é‡Œå¤–éƒ½èƒ½å¬è§å®ƒã€‚</p><p>Damn! Do you know, for a minute I thought I had the whole thing solved. è¯¥æ­»ï¼ä½ çŸ¥é“å—ï¼Œæœ‰ä¸€ç¬é—´æˆ‘ä»¥ä¸ºæˆ‘å·²ç»è§£å†³äº†æ•´ä¸ªé—®é¢˜ã€‚</p><p>I think I deserve another Marron Lyonnaise. - æˆ‘è®¤ä¸ºæˆ‘å€¼å¾—å†æ¥ä¸€ä»½æˆ‘å€¼å¾—å†æ¥ä¸€ä»½é©¬é¾™Â·é‡Œæ˜‚é…±ã€‚</p><p>I want their clothes bagged and down forensics. - æˆ‘æƒ³æŠŠä»–ä»¬çš„è¡£æœæ‰“åŒ…å¹¶å–è¯ã€‚forensicsæ³•åŒ»ã€‚</p><p>What a mess. - çœŸæ˜¯ä¸€å›¢ç³Ÿã€‚</p><p>Sheâ€™s being treated for shock outside, no surprise. - å¥¹ä¼‘å…‹äº†ï¼Œæ­£åœ¨å¤–é¢æ¥å—æ²»ç–—ï¼Œè¿™å¹¶ä¸å¥‡æ€ªã€‚shockä¼‘å…‹ã€‚</p><p>Donâ€™t expect to get much sense. - ä¸è¦æŒ‡æœ›å¾—åˆ°å¤ªå¤šæ„ä¹‰ã€‚</p><p>Youâ€™d better come up and take a look at this. ä½ æœ€å¥½è¿‡æ¥çœ‹çœ‹è¿™ä¸ªã€‚</p><p>-Youâ€™re not going to believe it. ä½ ä¸ä¼šç›¸ä¿¡çš„ã€‚</p><p>-On the contrary, Troy, I rather think I will. æ°æ°ç›¸åï¼Œæˆ‘è§‰å¾—æˆ‘ä¼šç›¸ä¿¡çš„ã€‚</p><p>What was it she said, sir? å…ˆç”Ÿï¼Œå¥¹è¯´äº†ä»€ä¹ˆï¼Ÿ</p><p>Listen to this: At 10:30 a.m. Mister and Missis W crossed over by post box to avoid Miss G. 10ç‚¹30åˆ†ï¼ŒWå…ˆç”Ÿå’ŒWå°å§ç©¿è¿‡é‚®æ”¿ä¿¡ç®±ä»¥é¿å…Gå°å§ã€‚</p><p>11:00 a.m. A called on Miss S., stayed 15 minutes. ä¸Šåˆ11:00ï¼ŒAæ‹œè®¿äº†Så°å§ï¼Œåœç•™äº†15åˆ†é’Ÿã€‚</p><p>There must be a couple of hundred entries in this file alone. ä»…è¿™ä¸ªæ–‡ä»¶ä¸­å°±å¾—æœ‰ä¸Šç™¾ä¸ªæ¡ç›®ã€‚May thousands of them over the years. å¯èƒ½æœ‰è¿™å‡ å¹´çš„ä¸Šåƒæ¡è®°å½•ã€‚</p><p>I want them all taken down. æˆ‘å¸Œæœ›ä»–ä»¬éƒ½è¢«è®°å½•ä¸‹æ¥äº†ã€‚<a href="https://www.collinsdictionary.com/zh/dictionary/english-chinese/take-down">take down</a> 1, è®°å½•write down; 2, æ‹†é™¤dismantle: wall, fence etc.</p><p>Weâ€™re gonna have to go through the whole lot of them. æˆ‘ä»¬ä¸å¾—ä¸è¦æŠŠå®ƒä»¬å…¨éƒ¨æµè§ˆä¸€éã€‚</p><p>blackmail - n. &amp; vt. å‹’ç´¢ã€‚</p><p>She wasnâ€™t a bad old stick. å¥¹ä¸æ˜¯ä¸€ä¸ªå¾ˆåçš„äººã€‚</p><p>She is a bit perculiar, her and her son. Him being au undertaker and all. - å¥¹å’Œå¥¹çš„å„¿å­æœ‰ç‚¹å¥‡æ€ªã€‚ä»–æ˜¯æ®¡ä»ªé¦†çš„æ‰¿åŠäººç­‰ç­‰ã€‚perculiar - å¥‡ç‰¹çš„ã€‚</p><p>But she was very good for me, in her own way, very good to me.</p><p>One is getting wed. å°†è¦ç»“å©šçš„é‚£ä¸ªã€‚</p><p>-Thatâ€™s a bend just ahead. å‰é¢å°±æ˜¯ä¸€ä¸ªè½¬å¼¯ã€‚</p><p>-Now, Iâ€™ve seen it, sir. æˆ‘çœ‹åˆ°äº†ã€‚</p><p>And do me a favor, Troy, when we get there, if we get there, park at the bottom of the lane. å¸®æˆ‘ä¸€ä¸ªå¿™ï¼Œç‰¹æ´›ä¼Šï¼Œå½“æˆ‘ä»¬åˆ°è¾¾é‚£é‡Œæ—¶ï¼Œå¦‚æœæˆ‘ä»¬åˆ°è¾¾é‚£é‡Œï¼Œè¯·å°†è½¦åœåœ¨è½¦é“çš„åº•éƒ¨ã€‚</p><p>yells - å‘¼å–Šã€‚</p><p>Sometimes you really make me sick. æœ‰æ—¶ä½ çœŸçš„è®©æˆ‘æ„Ÿåˆ°æ¶å¿ƒã€‚</p><p>I donâ€™t care if you marry him for money, but why canâ€™t you come clean and admit it? æˆ‘ä¸åœ¨ä¹ä½ å«ç»™ä»–æ˜¯ä¸æ˜¯ä¸ºäº†é’±ï¼Œä½†ä½ ä¸å¦ç™½æ‰¿è®¤ã€‚come clean å¦ç™½è¯´å‡ºæ¥ã€‚admit æ‰¿è®¤ã€‚</p><p>Itâ€™s not like that. ä¸æ˜¯é‚£æ ·çš„ã€‚</p><p>So what is it like? Tying yourself to a bloody cripple at your age. åœ¨ä½ è¿™ä¸ªå¹´çºªï¼ŒæŠŠè‡ªå·±ç»‘åœ¨ä¸€ä¸ªè¯¥æ­»çš„ç˜¸å­èº«ä¸Šã€‚tying - tieçš„ç°åœ¨åˆ†è¯ã€‚</p><p>That bloody cripple looked after us. If it hadnâ€™t been for him, we wouldnâ€™t have had a home. We wouldnâ€™t have had anything.</p><p>Yes, heâ€™s getting his pound of flesh, isnâ€™t he? - æ˜¯çš„ï¼Œä»–æ­£åœ¨å¾—åˆ°ä¸€ç£…è‚‰ï¼ˆæ„æ€æ˜¯ä¹°åˆ°å›æŠ¥ï¼‰ã€‚</p><p>Heâ€™s not buying me, Michael.</p><p>So what is he doing then? Renting you by the hour? é‚£ä»–ç°åœ¨æ˜¯åšä»€ä¹ˆï¼ŸæŒ‰å°æ—¶ç§Ÿèµä½ å—ï¼Ÿ</p><p>slaps - æ‹å‡»ã€‚</p><p>Alright, then. Donâ€™t come to our wedding. Henry and I are better off without you. é‚£å¥½å§ã€‚ä¸è¦æ¥å‚åŠ æˆ‘ä»¬çš„å©šç¤¼ã€‚æ²¡æœ‰ä½ ï¼Œäº¨åˆ©å’Œæˆ‘ä¼šè¿‡å¾—æ›´å¥½ã€‚be better off - If you say that someone would be better off doing something, you are advising them to do it or expressing the opinion that it would benefit them to do it: If youâ€™ve got bags youâ€™re better off taking a taxi.</p><p>I wonâ€™t bother buying a present, then!</p><p>-Do you want to go follow her, sir?</p><p>-No, Troy, Iâ€™d like to take a closer look in here.</p><p>-What? Go in without a warrant? Isnâ€™t that a bit? - ä»€ä¹ˆï¼Ÿæ²¡æœ‰æœæŸ¥ä»¤å°±è¿›å»ï¼Ÿwarrant - ä¿è¯ï¼›å€¼å¾—ï¼Œæœ‰å¿…è¦ï¼›æœæŸ¥ä»¤ï¼›åšæŸäº‹çš„ä¾æ®ã€‚</p><p>-You have a problem, Troy?</p><p>-No, no. Just glad I didnâ€™t suggest it. åªæ˜¯åº†å¹¸æˆ‘æ²¡å¦‚æ­¤å»ºè®®ã€‚</p><p>-If anybody finds us, you did.</p><p>-Pity. çœŸé—æ†¾ã€‚</p><p>-Locked? é”ä¸Šäº†ï¼Ÿ</p><p>-Yep.</p><p>-I can force it. æˆ‘å¯ä»¥å¼ºè¡Œå¼„å¼€å®ƒã€‚</p><p>Thank you all the same.</p><p>-Mom gone to bed? å¦ˆå¦ˆå·²ç»ç¡äº†å—ï¼Ÿ</p><p>-Hours ago. å‡ å°æ—¶å‰ï¼ˆå°±ç¡äº†ï¼‰ã€‚Whatâ€™s all this? è¿™åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>-Notebooks. Iris Rainbrid took a Neighbourhood Watch to unheard of extremes. - Iris Rainbridå°†é‚»é‡Œå®ˆæœ›è€…ç»„ç»‡å¸¦åˆ°äº†å‰æ‰€æœªé—»çš„æç«¯ã€‚extreme - æç«¯ã€‚</p><p>You wouldnâ€™t think that one small village could have so much trouble bubbling under the surface.</p><p>-Was it very horrid? The bodies.</p><p>-Iâ€™ve seen worse.</p><p>Iâ€™m one more step further down the road. - æˆ‘åœ¨è·¯ä¸Šåˆå‘å‰è¿ˆè¿›äº†ä¸€æ­¥ã€‚</p><p>-I havenâ€™t read lines with you. Howâ€™s it going?</p><p>-Oh well, four acts down, one to go. - å››å¹•å·²ç»“æŸï¼Œè¿˜å‰©ä¸€å¹•ã€‚</p><p>-Yes, I suppost itâ€™s the last act that really matters. æ˜¯çš„ï¼Œæˆ‘è®¤ä¸ºçœŸæ­£é‡è¦çš„æ˜¯æœ€åä¸€å¹•ã€‚</p><p>car rumbles - è½¦éš†éš†åœ°ã€‚</p><p>peacock hoots - å­”é›€å«ã€‚</p><p>Itâ€™s out of the question. - è¿™æ˜¯ä¸å¯èƒ½çš„ã€‚</p><p>Voice of sanity. ç†æ™ºçš„å£°éŸ³ã€‚</p><p>Parish Council - æ•™åŒºè®®ä¼šã€‚</p><p>It was only later I realised. åæ¥æˆ‘æ‰æ„è¯†åˆ°ã€‚</p><p>Everythingâ€™s over, itâ€™s all slipping away. ä¸€åˆ‡éƒ½ç»“æŸäº†ï¼Œä¸€åˆ‡éƒ½è¿‡å»äº†ã€‚</p><p>-I donâ€™t suppose you saw anyone in the woods? æˆ‘æƒ³ä½ åœ¨æ ‘æ—é‡Œæ²¡æœ‰çœ‹åˆ°ä»»ä½•äººå§ï¼Ÿ</p><p>-No. æ²¡æœ‰çœ‹åˆ°ã€‚</p><p>Phillips Codell, Iâ€™m here arresting you on suspicion of the murder of Bella Trace on 26th of June 1995.</p><p>You donâ€™t have to say anything, but it may harm your defence if you do not mention when questioned something that you reply on in court. Anything you do say may be given in evidence.</p><p>He was in that wheelchair and she just couldnâ€™t cope.</p><p>Itâ€™s something one does in the country. è¿™æ˜¯å›½å†…æ¯ä¸ªäººéƒ½ä¼šåšçš„äº‹æƒ…ã€‚</p><p>I took a hip flask, filled with vodka and I kept on drinking. It was the only that I could get the courge.</p><p>All the dead birds. The noise, the blood that made me feel sick and dizzy. åˆ°å¤„éƒ½æ˜¯æ­»é¸Ÿã€‚å™ªéŸ³ã€è¡€æ¶²è®©æˆ‘æ„Ÿåˆ°æ¶å¿ƒå’Œå¤´æ™•ã€‚</p><p>I didnâ€™t think I was gonna be able to do it.</p><p>I doubled back behind the trees and managed to hide. - æˆ‘æŠ˜å›æ ‘åå¹¶è®¾æ³•èº²äº†èµ·æ¥ã€‚double back, to turn and go back in the direction you have come from.</p><p>Then I waited until I had a clear shot. And then. I shot her. ç„¶åæˆ‘å°±ç­‰åˆ°äº†æ¸…æ™°çš„è§†è§’ã€‚ç„¶åï¼Œæˆ‘å°±å¼€æªæ‰“äº†å¥¹ã€‚ç¬¬ä¸€ä¸ªshotæ˜¯â€œé•œå¤´â€çš„æ„æ€ï¼Œç¬¬äºŒä¸ªshotï¼Œæ˜¯shootçš„è¿‡å»å¼åŠè¿‡å»åˆ†è¯ã€‚</p><p>It was terrible. I saw her pitch forward and fall to the ground. - å¤ªå¯æ€•äº†ã€‚æˆ‘çœ‹åˆ°å¥¹å‘å‰å€¾å€’ï¼Œå€’åœ¨äº†åœ°ä¸Šã€‚pitch, to move or be moved suddenly, especially by throwing or being thrown.</p><p>And then, I just panicked. ç„¶åï¼Œæˆ‘å°±æƒŠæ…Œå¤±æªäº†ã€‚panickis a common misspelling of panic.</p><p>I got up and I ran and I ran.</p><p>I thought then that Iâ€™d done it, that I got away with it. é‚£æ—¶æˆ‘æƒ³æˆ‘å·²ç»åšåˆ°äº†ï¼Œæˆ‘é€ƒè„±äº†æƒ©ç½šã€‚</p><p>How could I have known that Iâ€™d been seen? æˆ‘æƒ³çŸ¥é“ï¼Œæˆ‘æ˜¯æ€ä¹ˆè¢«çœ‹è§çš„ï¼Ÿ</p><p>She put it all in those notebooks, didnâ€™t she? I had to go to that revolting house.</p><p>I expect youâ€™ll be needed more than ever at Tye House now. æˆ‘é¢„è®¡Tye Houseç°åœ¨æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ›´éœ€è¦ä½ ã€‚Quite the chatelaine youâ€™ll be, wonâ€™t you? Now, what will you have?</p><p>dramatic siniter music - æˆå‰§æ€§çš„é™©æ¶éŸ³ä¹</p><p>The diamonds are marmite, the spades are jam, the hearts are tuna and the clubs are sandwich spread. æ–¹å—æ˜¯é©¬éº¦é…±ï¼Œé»‘æ¡ƒæ˜¯æœé…±ï¼Œçº¢å¿ƒæ˜¯é‡‘æªé±¼ï¼Œæ¢…èŠ±æ˜¯ä¸‰æ˜æ²»ã€‚</p><p>spread - æ”¾åœ¨é¢åŒ…æˆ–é¥¼å¹²ä¸Šçš„è½¯è´¨é£Ÿç‰©ï¼ˆé…±ï¼‰ã€‚a soft food for putting on bread and crackers:</p><p>cheese&#x2F;chocolate&#x2F;fish spread</p><p>Thereâ€™s bread and various spreads for tea.</p><p>voiceover - ç”»å¤–éŸ³ã€‚</p><p>How much did they take? ä»–ä»¬æ‹¿äº†å¤šå°‘é’±ï¼Ÿ</p><p>Theyâ€™d even stopped asking me. They knew I was cleaned out. ä»–ä»¬ç”šè‡³ä¸å†æ‰¾æˆ‘è¦äº†ã€‚ä»–ä»¬çŸ¥é“æˆ‘è¢«æç©ºäº†ã€‚</p><p>Sir, thereâ€™s someone here for you in reception. å…ˆç”Ÿï¼Œæœ‰äººåœ¨æ¥å¾…å¤„ç­‰å€™æ‚¨ã€‚</p><p>Thereâ€™s something about that story, the shooting party, that still not right.</p><p>You know you featured in here? ä½ çŸ¥é“ä½ è‡ªå·±è¢«åŒ…æ‹¬åœ¨è¿™ä¸ªç¬”è®°æœ¬ä¸­äº†å—ï¼Ÿ</p><p>He was wearing his denims and that cap he wears. é‚£ä¸ªäººç©¿ç€ä»–çš„ç‰›å­è£¤å’Œå¸½å­ã€‚</p><p>brutal - é‡è›®çš„ã€‚</p><p>-You again. You donâ€™t give up, do you?</p><p>-Mister Lacey, weâ€™re here in connection with the death of Iris Rainbird.</p><p>-In connection with. You policemen have a wonderful way of expressing yourselves.</p><p>-As you may know, Mister Lacey, she was murdered in a particularly brutal fashion. ä½ å¯èƒ½çŸ¥é“ï¼Œè±è¥¿å…ˆç”Ÿï¼Œå¥¹æ˜¯è¢«ä»¥ä¸€ç§ç‰¹åˆ«æ®‹é…·çš„æ–¹å¼è°‹æ€çš„ã€‚</p><p>-I hope youâ€™re not looking for insincere expressions of regret on my part, Chief Inspector. æˆ‘å¸Œæœ›ä½ ä¸æ˜¯åœ¨å¯»æ‰¾æˆ‘ä¸çœŸè¯šçš„é—æ†¾è¡¨ç¤ºï¼Œæ€»ç£å¯Ÿã€‚She was a very nasty woman. å¥¹æ˜¯ä¸ªä»¤äººè®¨åŒçš„å¥³äººã€‚</p><p>-Did you ever go to her house?</p><p>-No.</p><p>-So what would you say if I told you that somebody had been you entering her front door shortly after four oâ€™clock yesterday afternoon?</p><p>-I would say they needed their eyes testing.</p><p>-(Troy) Mister Lacey, we have a warrant here to search these premises. - premises, æŸäººï¼ˆä¸€èˆ¬æ˜¯å…¬å¸æˆ–ç»„ç»‡ï¼‰æ‹¥æœ‰çš„åœŸåœ°å’Œå»ºç­‘the land and buildings owned by someone, especially by a company or organization. premise, å‰æã€‚</p><p>-So how do you explain this, Sir?</p><p>-I canâ€™t! Of course I canâ€™t!</p><p>-Where have you put the clothes?</p><p>-What clothes?</p><p>-The dungarees, the cap and the golves. å·¥ä½œæœã€å¸½å­å’Œæ‰‹å¥—ã€‚</p><p>-What?</p><p>-The clothes you wore to kill Iris Rainbird.</p><p>-Youâ€™re raving mad! ä½ ç–¯äº†å§ï¼rave, to speak in an uncontrolled way, usually because you are upset or angry, or because you are sick.</p><p>Iâ€™ve been framed. æˆ‘è¢«é™·å®³äº†ã€‚</p><p>a custody death.</p><p>-Maybe we should have put her on suicide watch, sir?</p><p>-Is that a reprimant, Troy? â€˜Cause youâ€™re right. This is my fault.</p><p>-Maybe sheâ€™s better off this way. All things considered.</p><p>-That is not the point.</p><p>Lacey has been shouting  his mouth off, sir. è±è¥¿ä¸€ç›´åœ¨å¤§å–Šå¤§å«ã€‚</p><p>door clanks. é—¨å®å½“å“ã€‚</p><p>How nice of you to look in, Chief Inspector.</p><p>-You say what youâ€™ve got to say and get on with it. ä½ è¯´å‡ºä½ å¿…é¡»è¯´çš„è¯ï¼Œç„¶åç»§ç»­è¯´ä¸‹å»ã€‚</p><p>-I want to go home.</p><p>-Arenâ€™t you, Mister Comedy? You want the truth, Mister Lacey. Iâ€™ve had you up to here. æˆ‘å‡ ä¹éƒ½æŸ¥å‡ºä½ çš„ç½ªäº†ã€‚</p><p>You were in such a hurry to drag me off yesterday. ä½ æ˜¨å¤©é‚£ä¹ˆæ€¥ç€æŠŠæˆ‘æ‹–èµ°ã€‚</p><p>mid-morning - ä¸Šåˆä¸­æ—¬ã€‚</p><p>Caped Crusader - æ–—ç¯·åå­—å†›</p><p>He only did the first sketches but they took all day. ä»–åªç”»äº†è‰å›¾ï¼Œä½†æ˜¯è¿™äº›è‰å›¾èŠ±äº†ä¸€å¤©çš„æ—¶é—´ã€‚</p><p>He said I had a wonderful complicated face.</p><p>Heâ€™s a surrealist, is he? ä»–æ˜¯è¶…ç°å®ä¸»ä¹‰è€…ï¼Œæ˜¯å—ï¼Ÿ</p><p>-And since everyoneâ€™s always picking on him, you might as well know he was there the night Emily Simpson died too. æ—¢ç„¶æ¯ä¸ªäººéƒ½åœ¨æ‰¾ä»–çš„èŒ¬ï¼Œä½ ä¸å¦¨çŸ¥é“è‰¾ç±³ä¸½Â·è¾›æ™®æ£®å»ä¸–çš„é‚£å¤©æ™šä¸Šä»–ä¹Ÿåœ¨ä»–çš„å·¥ä½œå®¤é‡Œã€‚</p><p>-Youâ€™ve seen quite a bit of him, is there something that I ought to know? ä½ å·²ç»å’Œä»–è§è¿‡ä¸å°‘æ¬¡é¢äº†ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆäº‹æ˜¯æˆ‘è¯¥çŸ¥é“çš„ï¼Ÿï¼ˆä½ æœ‰æ²¡æœ‰å’Œä»–å‘ç”Ÿè¿‡ä»€ä¹ˆï¼Ÿï¼‰</p><p>-What? Something like you and your Missis Whiplash? Or Barbara and all her boyfriends? No, dad, thereâ€™s nothing you need to know at all. ä»€ä¹ˆäº‹ï¼Ÿå°±åƒä½ å’ŒWhiplashå¤ªå¤ªé‚£æ ·å—ï¼Ÿæˆ–è€…Barbaraå’Œå¥¹çš„é‚£äº›ç”·æœ‹å‹ä¸€æ ·ï¼Ÿæ²¡æœ‰ï¼Œçˆ¸çˆ¸ï¼Œæ²¡æœ‰ä»€ä¹ˆäº‹æ˜¯ä½ åº”è¯¥çŸ¥é“çš„ï¼ˆæˆ‘å’Œä»–æ²¡æœ‰å‘ç”Ÿé‚£æ ·çš„äº‹ï¼‰ã€‚</p><p>In fact I think she may have told us more than she meant to. äº‹å®ä¸Šæˆ‘è®¤ä¸ºå¥¹å‘Šè¯‰äº†æˆ‘ä»¬æ¯”å¥¹æœ¬æ„æ›´å¤šçš„äº‹æƒ…ã€‚</p><p>-Itâ€™s very good.</p><p>-Itâ€™s only Marks and Sparks, Iâ€™m afraid. You should have told me you were coming.</p><p>-Marks and Sparks is fine.</p><p>The Lessiter girl backed up his alibi. è±æ–¯ç‰¹å¥³å­©æ”¯æŒäº†ä»–çš„ä¸åœ¨åœºè¯æ®ã€‚</p><p>It had to be a trick. è¿™ä¸€å®šæ˜¯ä¸€ä¸ªè¯¡è®¡ã€‚</p><p>car honks. æ±½è½¦é¸£ç¬›ã€‚</p><p>I have to be off. æˆ‘è¦èµ°äº†ã€‚</p><p>Burnham Crescent - Burnhamå‘éŸ³ä¸º[BUR] + [NUHM]ã€‚crescenté›•åˆ»æˆçš„ç±»ä¼¼æ–°æœˆçš„å½¢çŠ¶ã€‚</p><p>Up ahead this road on the left. å¾€è¿™æ¡è·¯å‰é¢çš„å·¦è¾¹èµ°ã€‚</p><p>They were not easy children but of course under the circumstances, one had to make allowances. ä»–ä»¬ä¸æ˜¯å¥½å­©å­ï¼Œä½†å½“ç„¶åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œäººä»¬å¿…é¡»ä½“è°…ä»–ä»¬ã€‚</p><p>Every day it was a slanging match. æ¯å¤©éƒ½æ˜¯ä¸€åœºè°©éª‚æ¯”èµ›ã€‚Sheâ€™d scream at him and heâ€™d fling himself out of the house.</p><p>cup shatters. æ¯å­ç²‰ç¢ã€‚</p><p>How could Iâ€™ve betrayed them? æˆ‘æ€ä¹ˆå¯èƒ½èƒŒå›ä»–ä»¬ï¼Ÿ</p><p>All she had to do was to hand the dog over to her brother. å¥¹æ‰€è¦åšçš„å°±æ˜¯æŠŠç‹—äº¤ç»™å¥¹å“¥å“¥ã€‚</p><p>Why wouldnâ€™t he open the door. Because then sheâ€™d have seen the dog and that would have spoiled the whole set-up. é‚£ä¼šç ´åæ•´ä¸ªè®¾è®¡ã€‚</p><p>If it hadnâ€™t been for an observant neighbour and an unlocked tricycle, weâ€™d have never been any the wiser. å¦‚æœæ²¡æœ‰ç»†å¿ƒçš„é‚»å±…å’Œä¸€è¾†æ²¡ä¸Šé”çš„ä¸‰è½®è½¦ï¼Œæˆ‘ä»¬æ°¸è¿œä¸ä¼šå˜å¾—æ›´èªæ˜ã€‚</p><p>Yes, theyâ€™re clever, werenâ€™t they? Always working off one another.</p><p>Whoever went to the house was wearing overalls and a cap and they probably made sure they were seen at least from behind. - overallså·¥ä½œæœã€‚</p><p>Katherine stabbed them and then she put the knife and the blood-soaked overalls into the basket.</p><p>Bella Trace was just a freak change, wrong place, wrong time.</p><p>makesman - åˆ¶é€ è€…ã€‚</p><p>bludgeon, poison, stab</p><p>sheep bleat - ç¾Šå’©å’©å«ã€‚</p><p>â€œIâ€™ve been framed.â€ And he made this sign. It was a coded message. He was warning her to remove the picture. - æˆ‘æŠŠç”»è£…åœ¨æ¡†é‡Œäº†ã€‚frame, æŠŠç”»è£…æ¡†ï¼ŒWhen a picture or photograph is framed, it is put in a frame.</p><p>Itâ€™d have given the game away, wouldnâ€™t it? è¿™å¹…ç”»æ³„éœ²äº†è¿™ä¸ªæ¸¸æˆï¼Œä¸æ˜¯å—ï¼Ÿgive awayæ³„éœ²ï¼ŒIf you give away information that should be kept secret, you reveal it to other people.</p><p>-Itâ€™s powerful. Itâ€™s brilliant even in its own way.</p><p>-He had talent.</p><p>-But so twisted.</p><p>-I almost guessed it when we came here. The three bedrooms and only one bed slept in. They pulled the wool right over my eyes.</p><p>-(Troy) When?</p><p>-That time we came here and they were arguing. They really did seem to hate each other, didnâ€™t they? And they couldnâ€™t have staged it for our benefit. Because they didnâ€™t know we were here. Except they did. They saw us in the mirror. And they did put on a show.</p><p>-Poor Emily.</p><p>-(Troy) And poor Annabella. Who was she?</p><p>-I donâ€™t suppose weâ€™ll ever know. </p><p>I hope youâ€™re not gonna fall asleep in this.</p><p>I wouldnâ€™t dream of it.</p><p>Anyway, after what youâ€™ve just been through, a start of incest should be right up your street.</p><p>Come this in sadness from you.</p><p>Let some mystery befall me soon if I dissemble all.</p>]]></content>
      
      
      <categories>
          
          <category> English </category>
          
      </categories>
      
      
        <tags>
            
            <tag> movie </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VSCode Usage</title>
      <link href="/blog/2024/01/24/misc/VSCode-Usage/"/>
      <url>/blog/2024/01/24/misc/VSCode-Usage/</url>
      
        <content type="html"><![CDATA[<h2 id="Reduce-the-disk-usage-of-VSCode"><a href="#Reduce-the-disk-usage-of-VSCode" class="headerlink" title="Reduce the disk usage of VSCode"></a>Reduce the disk usage of VSCode</h2><p>ä»¥ä¸‹æ–‡ä»¶å¯ä»¥åˆ é™¤ï¼š</p><ul><li><p>.vscode-server&#x2F;data&#x2F;User&#x2F;workspaceStorage&#x2F;*ï¼šå‡ åGB.</p></li><li><p>.vscode-serverï¼š<a href="https://stackoverflow.com/questions/58453967/vscode-remote-ssh-vscode-server-taking-up-a-lot-of-space">å‚è€ƒ</a></p></li><li><p>.config: å¯ä»¥é’ˆå¯¹æ¯ä¸ªç›®å½•æ‰¾åˆ°ç›¸åº”çš„ç¨‹åºï¼Œæ¯”å¦‚ Chromeï¼Œç„¶åæœ‰é’ˆå¯¹æ€§åœ°åˆ é™¤ä¸€äº›æ–‡ä»¶ã€‚å‚è€ƒ<a href="https://stackoverflow.com/questions/58453967/vscode-remote-ssh-vscode-server-taking-up-a-lot-of-space">è¿™é‡Œ</a>ã€‚</p></li><li><p>.cache: å’Œ .config ç±»ä¼¼å¤„ç†ï¼Œå‚è€ƒ<a href="https://superuser.com/questions/366771/what-does-cache-do-it-consumes-a-huge-disk-space">è¿™é‡Œ</a>ã€‚</p><p>  .cache&#x2F;vscode-cpptools: This cache folder stores cached precompiled headers or â€œipchâ€ files that the IntelliSense engine uses to improve performance. You can limit the size of the cache by changing the setting value of C_Cpp.intelliSenseCacheSize. å‚è€ƒ<a href="https://github.com/microsoft/vscode-cpptools/issues/6594">è¿™é‡Œ</a>ï¼š<br>  <img src="/blog/image.png" alt="C_Cpp.intelliSenseCacheSize"></p></li></ul><h2 id="Hot-keys"><a href="#Hot-keys" class="headerlink" title="Hot keys"></a>Hot keys</h2><ol><li>è·³è½¬åˆ°å¯¹åº”å¤§æ‹¬å·ï¼š<code>Ctrl Shift \</code></li></ol><h2 id="Debug-code-in-VSCode"><a href="#Debug-code-in-VSCode" class="headerlink" title="Debug code in VSCode"></a>Debug code in VSCode</h2><ul><li><a href="https://code.visualstudio.com/Docs/editor/debugging#_multitarget-debugging">Debug multiple processes in VSCode</a></li><li><a href="https://stackoverflow.com/questions/60515935/visual-studio-code-does-not-attach-debugger-to-multi-processes-in-python-using-p">Debug Python Subprocess</a></li></ul><h2 id="Useful-plugins"><a href="#Useful-plugins" class="headerlink" title="Useful plugins"></a>Useful plugins</h2><ul><li><code>Remote - SSH</code>: Windows è¿æ¥ Linuxã€‚å‰ç½®æ¡ä»¶ï¼šWindows æœ¬èº«éœ€è¦å®‰è£… ssh å‘½ä»¤è¡Œå·¥å…·ã€‚</li><li><code>Perforce for VS Code</code>: perforce å·¥å…·ã€‚</li><li><code>intent-rainbow</code>: ç”¨å½©è‰²æ˜¾ç¤ºç¼©è¿›ã€‚</li><li><code>C/C++</code></li><li><code>Makefile Tools</code></li><li><code>Verilog Format</code></li><li><code>All in one</code></li><li><code>c/c++ definition generator</code></li><li><code>KoroFileHeader</code>: å‚è€ƒ<a href="https://zhuanlan.zhihu.com/p/610490070">è¿™é‡Œ</a>ã€‚</li></ul><h2 id="Useful-configurations"><a href="#Useful-configurations" class="headerlink" title="Useful configurations"></a>Useful configurations</h2><p><a href="https://www.cxyzjd.com/article/weixin_45461426/105936955">è‡ªåŠ¨å¡«å……å¤´æ–‡ä»¶ï¼Œæ¯”å¦‚ifndefå®</a></p><p>é…ç½®æ–‡ä»¶ï¼š</p><ul><li>launch.json</li><li>tasks.json: <a href="https://stackoverflow.com/questions/48273346/vscode-command-for-user-input-in-debug-launch-config">ref</a>, <a href="https://code.visualstudio.com/updates/v1_30#_improved-user-input-variables-for-task-and-debug-configurations">ref</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Print The Stack Trace of A Process</title>
      <link href="/blog/2024/01/23/cplusplus/Print-The-Stack-Trace-of-A-Process/"/>
      <url>/blog/2024/01/23/cplusplus/Print-The-Stack-Trace-of-A-Process/</url>
      
        <content type="html"><![CDATA[<h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><p><a href="https://www.gnu.org/software/libc/manual/html_node/Backtraces.html">glic Functions</a></p><pre><code>backtracebacktrace_symbolsbacktrace_symbols_fd</code></pre><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;execinfo.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print_trace</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">int</span> SIZE = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">void</span>* buffer[SIZE];</span><br><span class="line">    <span class="type">char</span>** strings;</span><br><span class="line">    <span class="type">int</span> size, i;</span><br><span class="line"></span><br><span class="line">    size = <span class="built_in">backtrace</span>(buffer, SIZE);</span><br><span class="line">    strings = <span class="built_in">backtrace_symbols</span>(buffer, size);</span><br><span class="line">    <span class="keyword">if</span> (strings != <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Obtained %d stack frames.\n&quot;</span>, size);</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; size; ++i)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, strings[i]);</span><br><span class="line">        <span class="built_in">free</span>(strings);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> syntax </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Build Linux Kernel Module</title>
      <link href="/blog/2024/01/23/linux/Build-Linux-Kernel-Module/"/>
      <url>/blog/2024/01/23/linux/Build-Linux-Kernel-Module/</url>
      
        <content type="html"><![CDATA[<h2 id="å†…æ ¸ç¼–è¯‘"><a href="#å†…æ ¸ç¼–è¯‘" class="headerlink" title="å†…æ ¸ç¼–è¯‘"></a>å†…æ ¸ç¼–è¯‘</h2><p>obj-m: <a href="https://stackoverflow.com/questions/57839941/what-is-the-meaning-of-obj-m-in-linux-device-driver-makefile">é“¾æ¥</a></p><p>make modules: <a href="https://askubuntu.com/questions/1363530/what-does-make-and-make-modules-do-when-compiling-building-the-kernel">é“¾æ¥</a></p><h2 id="ç¼–è¯‘å†…æ ¸æ¨¡å—"><a href="#ç¼–è¯‘å†…æ ¸æ¨¡å—" class="headerlink" title="ç¼–è¯‘å†…æ ¸æ¨¡å—"></a>ç¼–è¯‘å†…æ ¸æ¨¡å—</h2><p><a href="https://tldp.org/LDP/lkmpg/2.6/html/x181.html">æ–‡æ¡£</a></p><p>Makefile:</p><pre><code>obj-m += hello-1.oall:    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modulesclean:    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean</code></pre><p><code>make -C</code> changes to a new directory where the new makefiles will be run.</p><p><code>M=$(PWD)</code> defines a variable <code>M</code> which the child makefiles can use.</p><h2 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h2><ul><li><code>insmod</code>: æ’å…¥ä¸€ä¸ªæ¨¡å—ï¼ˆ.koï¼‰åˆ°kernelä¸­ã€‚</li><li><code>rmmod</code>: ä»å†…æ ¸ä¸­åˆ é™¤ä¸€ä¸ªæ¨¡å—ã€‚</li><li><code>modprobe</code>: ä»å†…æ ¸ä¸­å¢åˆ æ¨¡å—ã€‚<code>modprobe</code>ä»<code>/lib/modules/`uname -r`</code>ä¸­æœç´¢æ‰€æœ‰çš„æ¨¡å—å’Œå…¶ä»–æ–‡ä»¶ï¼Œé™¤äº†<code>/etc/modprobe.d</code>ç›®å½•ä¸­çš„å¯é€‰é…ç½®æ–‡ä»¶ï¼ˆå‚è§<code>modprobe.d(5)</code>ï¼‰ã€‚</li><li><code>lsmod</code>: æ˜¾ç¤ºå½“å‰åŠ è½½çš„å†…æ ¸æ¨¡å—çš„çŠ¶æ€ï¼ˆå³å¯¹<code>/proc/modules</code>å†…å®¹çš„æ ¼å¼åŒ–ï¼‰ã€‚</li><li><code>modinfo</code>: ä»å‘½ä»¤è¡ŒæŒ‡å®šçš„å†…æ ¸æ¨¡å—ä¸­æå–ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰ç»™å‡ºæ¨¡å—åç§°ï¼Œé‚£ä¹ˆä¼šæœç´¢<code>/lib/modules/version</code>ç›®å½•ï¼Œå°±åƒ<code>modprobe</code>åŠ è½½æ¨¡å—æ—¶ä¸€æ ·ã€‚</li><li><code>depmod</code>: ç”Ÿæˆ<code>modules.dep</code>å’Œæ˜ å°„æ–‡ä»¶ã€‚</li><li><code>dmesg</code>: æ‰“å°æˆ–æ§åˆ¶å†…æ ¸ring bufferï¼ˆå­˜å‚¨kernel messageï¼‰ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Introducation to PCIE</title>
      <link href="/blog/2024/01/23/misc/PCIE/"/>
      <url>/blog/2024/01/23/misc/PCIE/</url>
      
        <content type="html"><![CDATA[<h1 id="è¯æ±‡è¡¨ï¼ˆGlossaryï¼‰"><a href="#è¯æ±‡è¡¨ï¼ˆGlossaryï¼‰" class="headerlink" title="è¯æ±‡è¡¨ï¼ˆGlossaryï¼‰"></a>è¯æ±‡è¡¨ï¼ˆGlossaryï¼‰</h1><ul><li>BAR: base address register.</li><li>PCI configuration space.</li><li>sba: system bus address.</li></ul><p><a href="https://wiki.osdev.org/PCI">PCI</a></p><p><a href="https://en.wikipedia.org/wiki/PCI_configuration_space">PCI configurtation space</a></p><pre><code>PCIè®¾å¤‡æœ‰ä¸€ç»„è¢«ç§°ä¸ºconfiguratin spaceçš„å¯„å­˜å™¨ï¼Œå¹¶ä¸”PCI Expresså¼•å…¥äº†Extended configuration spaceã€‚configuration spaceå¯„å­˜å™¨è¢«æ˜ å°„åˆ°memory locationsã€‚é©±åŠ¨è®¾å¤‡å’Œè¯Šæ–­è½¯ä»¶å¿…é¡»è¦æœ‰æƒé™è®¿é—®configuration spaceï¼Œæ“ä½œç³»ç»Ÿé€šå¸¸ä½¿ç”¨APIsæ¥æˆæƒè®¿é—®è®¾å¤‡configuration spaceã€‚</code></pre><p>PCI configuration spaceæœ‰ä¸¤ç§ç±»å‹çš„Headerï¼ˆ64 bytesï¼‰ï¼š</p><h2 id="Header-Type-0x0"><a href="#Header-Type-0x0" class="headerlink" title="Header Type 0x0"></a>Header Type 0x0</h2><style type="text/css">.tg  {border-collapse:collapse;border-spacing:0;}.tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;  overflow:hidden;padding:10px 5px;word-break:normal;}.tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;  font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}.tg .tg-rcf9{background-color:#F9F9F9;text-align:left;vertical-align:middle}.tg .tg-tbl0{background-color:#F9F9F9;font-weight:bold;text-align:center;vertical-align:middle}</style><table class="tg"><thead>  <tr>    <th class="tg-tbl0">Register</th>    <th class="tg-tbl0">Offset</th>    <th class="tg-tbl0">Bits 31-24</th>    <th class="tg-tbl0">Bits 23-16</th>    <th class="tg-tbl0">Bits 15-8</th>    <th class="tg-tbl0">Bits 7-0</th>  </tr></thead><tbody>  <tr>    <td class="tg-rcf9">0x0</td>    <td class="tg-rcf9">0x0</td>    <td class="tg-rcf9" colspan="2">Device ID</td>    <td class="tg-rcf9" colspan="2">Vendor ID</td>  </tr>  <tr>    <td class="tg-rcf9">0x1</td>    <td class="tg-rcf9">0x4</td>    <td class="tg-rcf9" colspan="2">Status</td>    <td class="tg-rcf9" colspan="2">Command</td>  </tr>  <tr>    <td class="tg-rcf9">0x2</td>    <td class="tg-rcf9">0x8</td>    <td class="tg-rcf9">Class code</td>    <td class="tg-rcf9">Subclass</td>    <td class="tg-rcf9">Prog IF</td>    <td class="tg-rcf9">Revision ID</td>  </tr>  <tr>    <td class="tg-rcf9">0x3</td>    <td class="tg-rcf9">0xC</td>    <td class="tg-rcf9">BIST</td>    <td class="tg-rcf9">Header type</td>    <td class="tg-rcf9">Latency Timer</td>    <td class="tg-rcf9">Cache Line Size</td>  </tr>  <tr>    <td class="tg-rcf9">0x4</td>    <td class="tg-rcf9">0x10</td>    <td class="tg-rcf9" colspan="4">Base address #0 (BAR0)</td>  </tr>  <tr>    <td class="tg-rcf9">0x5</td>    <td class="tg-rcf9">0x14</td>    <td class="tg-rcf9" colspan="4">Base address #1 (BAR1)</td>  </tr>  <tr>    <td class="tg-rcf9">0x6</td>    <td class="tg-rcf9">0x18</td>    <td class="tg-rcf9">Secondary Latency Timer</td>    <td class="tg-rcf9">Subordinate Bus Number</td>    <td class="tg-rcf9">Secondary Bus Number</td>    <td class="tg-rcf9">Primary Bus Number</td>  </tr>  <tr>    <td class="tg-rcf9">0x7</td>    <td class="tg-rcf9">0x1C</td>    <td class="tg-rcf9" colspan="2">Secondary Status</td>    <td class="tg-rcf9">I/O Limit</td>    <td class="tg-rcf9">I/O Base</td>  </tr>  <tr>    <td class="tg-rcf9">0x8</td>    <td class="tg-rcf9">0x20</td>    <td class="tg-rcf9" colspan="2">Memory Limit</td>    <td class="tg-rcf9" colspan="2">Memory Base</td>  </tr>  <tr>    <td class="tg-rcf9">0x9</td>    <td class="tg-rcf9">0x24</td>    <td class="tg-rcf9" colspan="2">Prefetchable Memory Limit</td>    <td class="tg-rcf9" colspan="2">Prefetchable Memory Base</td>  </tr>  <tr>    <td class="tg-rcf9">0xA</td>    <td class="tg-rcf9">0x28</td>    <td class="tg-rcf9" colspan="4">Prefetchable Base Upper 32 Bits</td>  </tr>  <tr>    <td class="tg-rcf9">0xB</td>    <td class="tg-rcf9">0x2C</td>    <td class="tg-rcf9" colspan="4">Prefetchable Limit Upper 32 Bits</td>  </tr>  <tr>    <td class="tg-rcf9">0xC</td>    <td class="tg-rcf9">0x30</td>    <td class="tg-rcf9" colspan="2">I/O Limit Upper 16 Bits</td>    <td class="tg-rcf9" colspan="2">I/O Base Upper 16 Bits</td>  </tr>  <tr>    <td class="tg-rcf9">0xD</td>    <td class="tg-rcf9">0x34</td>    <td class="tg-rcf9" colspan="3">Reserved</td>    <td class="tg-rcf9">Capability Pointer</td>  </tr>  <tr>    <td class="tg-rcf9">0xE</td>    <td class="tg-rcf9">0x38</td>    <td class="tg-rcf9" colspan="4">Expansion ROM base address</td>  </tr>  <tr>    <td class="tg-rcf9">0xF</td>    <td class="tg-rcf9">0x3C</td>    <td class="tg-rcf9" colspan="2">Bridge Control</td>    <td class="tg-rcf9">Interrupt PIN</td>    <td class="tg-rcf9">Interrupt Line</td>  </tr></tbody></table><h2 id="Header-Type-0x1"><a href="#Header-Type-0x1" class="headerlink" title="Header Type 0x1"></a>Header Type 0x1</h2><style type="text/css">.tg  {border-collapse:collapse;border-spacing:0;}.tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;  overflow:hidden;padding:10px 5px;word-break:normal;}.tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;  font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}.tg .tg-rcf9{background-color:#F9F9F9;text-align:left;vertical-align:middle}.tg .tg-tbl0{background-color:#F9F9F9;font-weight:bold;text-align:center;vertical-align:middle}</style><table class="tg"><thead>  <tr>    <th class="tg-tbl0">Register</th>    <th class="tg-tbl0">Offset</th>    <th class="tg-tbl0">Bits 31-24</th>    <th class="tg-tbl0">Bits 23-16</th>    <th class="tg-tbl0">Bits 15-8</th>    <th class="tg-tbl0">Bits 7-0</th>  </tr></thead><tbody>  <tr>    <td class="tg-rcf9">0x0</td>    <td class="tg-rcf9">0x0</td>    <td class="tg-rcf9" colspan="2">Device ID</td>    <td class="tg-rcf9" colspan="2">Vendor ID</td>  </tr>  <tr>    <td class="tg-rcf9">0x1</td>    <td class="tg-rcf9">0x4</td>    <td class="tg-rcf9" colspan="2">Status</td>    <td class="tg-rcf9" colspan="2">Command</td>  </tr>  <tr>    <td class="tg-rcf9">0x2</td>    <td class="tg-rcf9">0x8</td>    <td class="tg-rcf9">Class code</td>    <td class="tg-rcf9">Subclass</td>    <td class="tg-rcf9">Prog IF</td>    <td class="tg-rcf9">Revision ID</td>  </tr>  <tr>    <td class="tg-rcf9">0x3</td>    <td class="tg-rcf9">0xC</td>    <td class="tg-rcf9">BIST</td>    <td class="tg-rcf9">Header type</td>    <td class="tg-rcf9">Latency Timer</td>    <td class="tg-rcf9">Cache Line Size</td>  </tr>  <tr>    <td class="tg-rcf9">0x4</td>    <td class="tg-rcf9">0x10</td>    <td class="tg-rcf9" colspan="4">Base address #0 (BAR0)</td>  </tr>  <tr>    <td class="tg-rcf9">0x5</td>    <td class="tg-rcf9">0x14</td>    <td class="tg-rcf9" colspan="4">Base address #1 (BAR1)</td>  </tr>  <tr>    <td class="tg-rcf9">0x6</td>    <td class="tg-rcf9">0x18</td>    <td class="tg-rcf9">Secondary Latency Timer</td>    <td class="tg-rcf9">Subordinate Bus Number</td>    <td class="tg-rcf9">Secondary Bus Number</td>    <td class="tg-rcf9">Primary Bus Number</td>  </tr>  <tr>    <td class="tg-rcf9">0x7</td>    <td class="tg-rcf9">0x1C</td>    <td class="tg-rcf9" colspan="2">Secondary Status</td>    <td class="tg-rcf9">I/O Limit</td>    <td class="tg-rcf9">I/O Base</td>  </tr>  <tr>    <td class="tg-rcf9">0x8</td>    <td class="tg-rcf9">0x20</td>    <td class="tg-rcf9" colspan="2">Memory Limit</td>    <td class="tg-rcf9" colspan="2">Memory Base</td>  </tr>  <tr>    <td class="tg-rcf9">0x9</td>    <td class="tg-rcf9">0x24</td>    <td class="tg-rcf9" colspan="2">Prefetchable Memory Limit</td>    <td class="tg-rcf9" colspan="2">Prefetchable Memory Base</td>  </tr>  <tr>    <td class="tg-rcf9">0xA</td>    <td class="tg-rcf9">0x28</td>    <td class="tg-rcf9" colspan="4">Prefetchable Base Upper 32 Bits</td>  </tr>  <tr>    <td class="tg-rcf9">0xB</td>    <td class="tg-rcf9">0x2C</td>    <td class="tg-rcf9" colspan="4">Prefetchable Limit Upper 32 Bits</td>  </tr>  <tr>    <td class="tg-rcf9">0xC</td>    <td class="tg-rcf9">0x30</td>    <td class="tg-rcf9" colspan="2">I/O Limit Upper 16 Bits</td>    <td class="tg-rcf9" colspan="2">I/O Base Upper 16 Bits</td>  </tr>  <tr>    <td class="tg-rcf9">0xD</td>    <td class="tg-rcf9">0x34</td>    <td class="tg-rcf9" colspan="3">Reserved</td>    <td class="tg-rcf9">Capability Pointer</td>  </tr>  <tr>    <td class="tg-rcf9">0xE</td>    <td class="tg-rcf9">0x38</td>    <td class="tg-rcf9" colspan="4">Expansion ROM base address</td>  </tr>  <tr>    <td class="tg-rcf9">0xF</td>    <td class="tg-rcf9">0x3C</td>    <td class="tg-rcf9" colspan="2">Bridge Control</td>    <td class="tg-rcf9">Interrupt PIN</td>    <td class="tg-rcf9">Interrupt Line</td>  </tr></tbody></table><pre><code>BAR0Memory-mapped I/O (MMIO) registersBAR1Device memory windows.BAR2/3Complementary space of BAR1.BAR5I/O port.BAR6PCI ROM.</code></pre><h1 id="Commands"><a href="#Commands" class="headerlink" title="Commands"></a>Commands</h1><p>lspci</p><p><a href="https://diego.assencio.com/?index=649b7a71b35fc7ad41e03b6d0e825f07">Interpreting the output of lspci</a></p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://insujang.github.io/2017-04-03/pci-express-i/o-system/">PCI Express I&#x2F;O System</a></li><li><a href="https://www.pcmag.com/encyclopedia/term/pci-express">PCI Express</a></li><li><a href="https://www.trentonsystems.com/blog/what-is-pcie">What is PCIe</a></li><li><a href="https://stackoverflow.com/questions/30190050/what-is-the-base-address-register-bar-in-pcie">What is the Base Address Register (BAR) in PCIe?</a></li><li><a href="https://utcc.utoronto.ca/~cks/space/blog/linux/PCIeLspciBusAddresses">PCIe bus addresses, lspci, and working out your PCIe bus topology</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PCIE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LDAP</title>
      <link href="/blog/2024/01/23/misc/LDAP/"/>
      <url>/blog/2024/01/23/misc/LDAP/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>LDAP, Lightweight Directory Access Protocol.</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://support.bull.com/documentation/byproduct/infra/sw-extremcomp/sw-extremcomp-com/g">Bull Support</a></p>]]></content>
      
      
      <categories>
          
          <category> Misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LDAP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Drive</title>
      <link href="/blog/2024/01/23/linux/Drive/"/>
      <url>/blog/2024/01/23/linux/Drive/</url>
      
        <content type="html"><![CDATA[<h1 id="é©±åŠ¨"><a href="#é©±åŠ¨" class="headerlink" title="é©±åŠ¨"></a>é©±åŠ¨</h1><p>æœ¬æ–‡ä»‹ç»é©±åŠ¨ã€‚</p><h2 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h2><ul><li><p><code>lsmod</code> - Show status of modules in the Linux kernel.</p><p><code>lsmod</code> is a trivial program which nicely formats the contents of the <code>/proc/odules</code>,<br>showing what kernel modules are currently loaded.</p></li><li><p><code>dmesg</code> - examine or control the kernel ring buffer.</p><p>  The kernel buffer is a data structure used for keeping the log messages of the kernel and the kernel modules.<br>  Itâ€™s a ring buffer with a fixed size. Once itâ€™s full, new messages overwrite the oldest messages.<br>  During boot, the kernel saves the messages into the kernel buffer.</p></li><li><p><code>lsscsi</code> - Uses information in sysfs (Linux kernel series 2.6 and later) to list SCSI devices (or hosts) currently attached to the system.</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git Usage</title>
      <link href="/blog/2024/01/23/personal_site/git-Usage/"/>
      <url>/blog/2024/01/23/personal_site/git-Usage/</url>
      
        <content type="html"><![CDATA[<h2 id="gitignoreä¸ç”Ÿæ•ˆ"><a href="#gitignoreä¸ç”Ÿæ•ˆ" class="headerlink" title="gitignoreä¸ç”Ÿæ•ˆ"></a>gitignoreä¸ç”Ÿæ•ˆ</h2><p>å‚è€ƒï¼š<a href="https://www.python100.com/html/32VIQ026UL7U.html">é“¾æ¥</a>ã€‚</p><h2 id="file-mode-10064çš„å«ä¹‰"><a href="#file-mode-10064çš„å«ä¹‰" class="headerlink" title="file mode 10064çš„å«ä¹‰"></a>file mode 10064çš„å«ä¹‰</h2><p>å‚è€ƒ<a href="https://blog.csdn.net/flyd1005/article/details/43824473">åšå®¢</a></p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Environment Variables</title>
      <link href="/blog/2024/01/23/linux/Environment-Variables/"/>
      <url>/blog/2024/01/23/linux/Environment-Variables/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h2><ul><li><p><code>environ</code> - ç”¨æˆ·ç¯å¢ƒï¼Œä¸€ä¸ªå…¨å±€å˜é‡ã€‚å¤´æ–‡ä»¶ <code>&lt;unistd.h&gt;</code>ã€‚å¯ä»¥é€šè¿‡ <code>man environ</code> æŸ¥çœ‹æ‰‹å†Œã€‚</p>  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;program environment: &quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span>** entry = environ; *entry; ++entry) &#123;</span><br><span class="line">        cout &lt;&lt; *entry &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>getenv</code> - è·å–ç¯å¢ƒå˜é‡ã€‚å¤´æ–‡ä»¶ <code>&lt;stdlib.h&gt;</code>ã€‚</p></li><li><p><code>setenv</code> - è®¾ç½®ç¯å¢ƒå˜é‡ã€‚å¤´æ–‡ä»¶ <code>stdlib.h</code>ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> syntax </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Thread</title>
      <link href="/blog/2024/01/23/thread/Thread/"/>
      <url>/blog/2024/01/23/thread/Thread/</url>
      
        <content type="html"><![CDATA[<h2 id="sched-setaffinity"><a href="#sched-setaffinity" class="headerlink" title="sched_setaffinity"></a><code>sched_setaffinity</code></h2><p>å‚è€ƒ<a href="https://man7.org/linux/man-pages/man2/sched_setaffinity.2.html">manpage</a>.</p>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> thread </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GNU Introducation</title>
      <link href="/blog/2024/01/23/misc/GNU-Introducation/"/>
      <url>/blog/2024/01/23/misc/GNU-Introducation/</url>
      
        <content type="html"><![CDATA[<ul><li><a href="https://www.gnu.org/">GNU</a></li><li><a href="https://www.gnu.org/software/">GNU Software</a></li><li><a href="https://www.gnu.org/software/gnulib/">Gnulib</a></li><li><a href="https://www.gnu.org/software/make/">Gnumake</a></li></ul><h2 id="libc"><a href="#libc" class="headerlink" title="libc"></a>libc</h2><h3 id="Memory-Protection"><a href="#Memory-Protection" class="headerlink" title="Memory Protection"></a>Memory Protection</h3><p>å‚è§ï¼š<a href="https://www.gnu.org/software/libc/manual/html_node/Memory-Protection.html">æ–‡æ¡£</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> gnu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gdb Usage</title>
      <link href="/blog/2024/01/23/cplusplus/gdb-Usage/"/>
      <url>/blog/2024/01/23/cplusplus/gdb-Usage/</url>
      
        <content type="html"><![CDATA[<h2 id="gdbå®ç°åŸç†"><a href="#gdbå®ç°åŸç†" class="headerlink" title="gdbå®ç°åŸç†"></a>gdbå®ç°åŸç†</h2><p>å‚è€ƒ<a href="https://www.zhihu.com/people/bi-an-60-46">é“¾æ¥</a>ã€‚</p><h2 id="gdbå‘½ä»¤"><a href="#gdbå‘½ä»¤" class="headerlink" title="gdbå‘½ä»¤"></a>gdbå‘½ä»¤</h2><ul><li><p><code>thread apply [threadno] [all] args</code> - å°†å‘½ä»¤ä¼ é€’ç»™ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ï¼Œå‚è§<a href="https://developer.apple.com/library/archive/documentation/DeveloperTools/gdb/gdb/gdb_5.html">é“¾æ¥</a>ã€‚<br>æ¯”å¦‚ï¼Œ<code>thread apply all continue</code>è¡¨ç¤ºå°†<code>continue</code>å‘½ä»¤ä¼ é€’ç»™æ‰€æœ‰çº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯è®©æ‰€æœ‰çº¿ç¨‹éƒ½ç»§ç»­è¿è¡Œã€‚</p></li><li><p><code>rbreak</code> - Set a breakpoint for all functions matching REGEXP. å‚è€ƒ<a href="https://blog.csdn.net/zdl1016/article/details/8708077">é“¾æ¥</a>ã€‚</p><p>  e.g. <code>rbreak file.C:.*</code> - ç»™file.Cçš„æ‰€æœ‰å‡½æ•°åŠ ä¸Šæ–­ç‚¹ã€‚</p></li><li><p><code>info</code></p><ul><li><code>info inferior</code> - å¯ä»¥æŸ¥çœ‹å½“å‰è°ƒè¯•çš„è¿›ç¨‹çš„PIDã€‚å¦å¤–ä¸€ç§æ–¹æ³•æ˜¯åœ¨gdbå‘½ä»¤è¡Œä¸­ç›´æ¥è°ƒç”¨Cå‡½æ•°ï¼š<code>print (int)getpid()</code>ã€‚å‚è€ƒï¼š<a href="https://www.qiniu.com/qfans/qnso-36704270">é“¾æ¥</a>ã€‚</li><li><code>info source</code> - å½“å‰è°ƒè¯•çš„æºæ–‡ä»¶è·¯å¾„ã€‚</li><li><code>info proc</code> - <a href="https://sourceware.org/gdb/onlinedocs/gdb/Process-Information.html">å½“å‰è¿›ç¨‹ä¿¡æ¯</a>ã€‚<ul><li><code>info proc files</code> - å½“å‰è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶ï¼ˆå’Œæ–‡ä»¶æè¿°ç¬¦ï¼‰ã€‚</li></ul></li></ul></li><li><p><code>attach</code> - è¿æ¥åˆ°æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ã€‚ä¸<code>gdb -p</code>æ•ˆæœç›¸åŒã€‚</p></li><li><p><code>detach</code> - å–æ¶ˆè¿æ¥çš„è¿›ç¨‹ã€‚</p></li><li><p><code>handle &lt;signal&gt; print pass nostop</code> - æ•è·ä¿¡å·ï¼ˆæ¯”å¦‚<code>SIGSEGV</code>ï¼‰å¹¶ä¸”å¿½ç•¥å®ƒã€‚<code>handle &lt;signal nostop</code>ã€‚</p></li><li><p><code>set</code> - ä¿®æ”¹å˜é‡çš„å€¼ï¼Œæ¯”å¦‚<code>set x=10</code>ï¼ˆæˆ–<code>set var x=10</code>ï¼‰å°†å˜é‡<code>x</code>çš„å€¼æ”¹ä¸º<code>10</code>ã€‚å‚è€ƒ<a href="https://blog.csdn.net/yasi_xi/article/details/12784507">åšå®¢</a>ã€‚</p></li><li><p><code>show directories</code></p></li><li><p><code>print</code> - gdbé»˜è®¤è®¾ç½®æ‰“å°å­—ç¬¦ä¸²çš„é•¿åº¦ä¸º200ï¼›æ›´æ”¹æ‰“å°æœ€å¤§é•¿åº¦ï¼š<code>set print elements &lt;number-of-elements&gt;</code>ï¼Œ<code>0</code>è¡¨ç¤ºunlimited.</p></li><li><p><code>ptype &lt;variable name&gt;</code> - æ‰“å°å˜é‡ç±»å‹ã€‚</p></li><li><p><code>finish</code> - ä»å‡½æ•°ä¸­è¿”å›ï¼Œå¹¶æ‰“å°å‡½æ•°è¿”å›å€¼ï¼ˆå³ä½¿å‡½æ•°çš„returnè¯­å¥å¾ˆå¤æ‚ï¼Œä¹Ÿå¯ä»¥è·å–è¿”å›å€¼ï¼‰ã€‚</p></li></ul><h2 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h2><p>è§<a href="https://www.irya.unam.mx/computo/sites/manuales/fce12/debugger/cl/commandref/gdb_mode/cmd_set_environm.htm">é“¾æ¥</a></p><h2 id="æ–­ç‚¹"><a href="#æ–­ç‚¹" class="headerlink" title="æ–­ç‚¹"></a>æ–­ç‚¹</h2><p>æ·»åŠ æ–­ç‚¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">break file:line_no</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ–­ç‚¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">info break</span><br></pre></td></tr></table></figure><p>åˆ é™¤ç¬¬2ä¸ªæ–­ç‚¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete 2</span><br></pre></td></tr></table></figure><h3 id="æ¡ä»¶æ–­ç‚¹"><a href="#æ¡ä»¶æ–­ç‚¹" class="headerlink" title="æ¡ä»¶æ–­ç‚¹"></a>æ¡ä»¶æ–­ç‚¹</h3><p>å‚è€ƒï¼š<a href="http://c.biancheng.net/view/8255.html">åšå®¢</a>ã€<a href="https://ftp.gnu.org/old-gnu/Manuals/gdb/html_node/gdb_28.html">æ–‡æ¡£</a>ã€‚</p><p><code>break ... if cond</code></p><h3 id="è§‚å¯Ÿæ–­ç‚¹"><a href="#è§‚å¯Ÿæ–­ç‚¹" class="headerlink" title="è§‚å¯Ÿæ–­ç‚¹"></a>è§‚å¯Ÿæ–­ç‚¹</h3><h3 id="æ•æ‰æ–­ç‚¹"><a href="#æ•æ‰æ–­ç‚¹" class="headerlink" title="æ•æ‰æ–­ç‚¹"></a>æ•æ‰æ–­ç‚¹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">try...catch</span><br></pre></td></tr></table></figure><h3 id="æ‰“å°é•¿åº¦çš„é™åˆ¶"><a href="#æ‰“å°é•¿åº¦çš„é™åˆ¶" class="headerlink" title="æ‰“å°é•¿åº¦çš„é™åˆ¶"></a>æ‰“å°é•¿åº¦çš„é™åˆ¶</h3><ul><li>Value sizes - å‚è€ƒï¼š<a href="https://sourceware.org/gdb/onlinedocs/gdb/Value-Sizes.html">æ–‡æ¡£</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> max-value-size bytes</span><br><span class="line"><span class="built_in">set</span> max-value-size unlimited</span><br></pre></td></tr></table></figure><ul><li><p>æ‰“å°å­—ç¬¦é•¿åº¦é™åˆ¶</p><p>gdbé»˜è®¤è®¾ç½®æ‰“å°å­—ç¬¦ä¸²çš„é•¿åº¦ä¸º200ï¼›æ›´æ”¹æ‰“å°æœ€å¤§é•¿åº¦ï¼š<code>set print elements</code></p></li></ul><h2 id="coredump"><a href="#coredump" class="headerlink" title="coredump"></a>coredump</h2><p>gdbå‘½ä»¤ï¼š<code>gcore</code>ã€‚</p><p><a href="https://man7.org/linux/man-pages/man5/core.5.html">Reference</a></p><h2 id="WSLæ— æ³•ä½¿ç”¨gdb"><a href="#WSLæ— æ³•ä½¿ç”¨gdb" class="headerlink" title="WSLæ— æ³•ä½¿ç”¨gdb"></a>WSLæ— æ³•ä½¿ç”¨gdb</h2><p>WSLæŒ‡Windowsè™šæ‹Ÿæœºã€‚</p><p><a href="https://github.com/microsoft/WSL/issues/8516">è§£å†³æ–¹æ³•</a>ï¼š</p><p>å®‰è£…<a href="https://launchpad.net/~ubuntu-support-team/+archive/ubuntu/gdb">PPAçš„daily buildç‰ˆæœ¬</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:ubuntu-support-team/gdb</span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install gdb</span><br></pre></td></tr></table></figure><h2 id="gdb-attach-æƒé™æŠ¥é”™"><a href="#gdb-attach-æƒé™æŠ¥é”™" class="headerlink" title="gdb attach æƒé™æŠ¥é”™"></a>gdb attach æƒé™æŠ¥é”™</h2><p>This is due to kernel hardening in Linux; you can disable this behavior by <code>echo 0 &gt; /proc/sys/kernel/yama/ptrace_scope</code> or by modifying it in <code>/etc/sysctl.d/10-ptrace.conf</code>.</p><p><a href="https://stackoverflow.com/questions/19215177/how-to-solve-ptrace-operation-not-permitted-when-trying-to-attach-gdb-to-a-pro">How to solve â€œptrace operation not permittedâ€ when trying to attach GDB to a process?</a></p><h2 id="gdb-debug-forks"><a href="#gdb-debug-forks" class="headerlink" title="gdb debug forks"></a>gdb debug forks</h2><p><a href="https://www-zeuthen.desy.de/unix/unixguide/infohtml/gdb/Forks.html">Reference</a></p><p>By default, when a program forks, gdb will continue to debug the parent process and the child process will run unimpeded.</p><p>If you want to follow the child process instead of the parent process, use the command set <code>follow-fork-mode</code>.</p><p><code>set follow-fork-mode mode</code><br>Set the debugger response to a program call of fork or vfork. A call to fork or vfork creates a new process. The mode argument can be:<br><code>parent</code><br>The original process is debugged after a fork. The child process runs unimpeded. This is the default.<br><code>child</code><br>The new process is debugged after a fork. The parent process runs unimpeded.</p><p><code>show follow-fork-mode</code><br>Display the current debugger response to a fork or vfork call.<br>On Linux, if you want to debug both the parent and child processes, use the command set detach-on-fork.</p><p><code>set detach-on-fork mode</code><br>Tells gdb whether to detach one of the processes after a fork, or retain debugger control over them both.<br><code>on</code><br>The child process (or parent process, depending on the value of follow-fork-mode) will be detached and allowed to run independently. This is the default.<br><code>off</code><br>Both processes will be held under the control of gdb. One process (child or parent, depending on the value of follow-fork-mode) is debugged as usual, while the other is held suspended.</p><p><code>show detach-on-fork</code><br>Show whether detach-on-fork mode is on&#x2F;off.</p><p>If you issue a run command to gdb after an exec call executes, the new target restarts. To restart the parent process, use the file command with the parent executable name as its argument. By default, after an exec call executes, gdb discards the symbols of the previous executable image. You can change this behaviour with the set follow-exec-mode command.</p><p>set follow-exec-mode mode<br>Set debugger response to a program call of exec. An exec call replaces the program image of a process.<br>follow-exec-mode can be:</p><p><code>new</code><br>gdb creates a new inferior and rebinds the process to this new inferior. The program the process was running before the exec call can be restarted afterwards by restarting the original inferior.<br>For example:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(gdb) info inferiors</span><br><span class="line">(gdb) info inferior</span><br><span class="line">  Id   Description   Executable</span><br><span class="line">* 1    &lt;null&gt;        prog1</span><br><span class="line">(gdb) run</span><br><span class="line">process 12020 is executing new program: prog2</span><br><span class="line">Program exited normally.</span><br><span class="line">(gdb) info inferiors</span><br><span class="line">  Id   Description   Executable</span><br><span class="line">* 2    &lt;null&gt;        prog2</span><br><span class="line">  1    &lt;null&gt;        prog1</span><br></pre></td></tr></table></figure><p><code>same</code><br>gdb keeps the process bound to the same inferior. The new executable image replaces the previous executable loaded in the inferior. Restarting the inferior after the exec call, with e.g., the run command, restarts the executable the process was running after the exec call. This is the default mode.<br>For example:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(gdb) info inferiors</span><br><span class="line">  Id   Description   Executable</span><br><span class="line">* 1    &lt;null&gt;        prog1</span><br><span class="line">(gdb) run</span><br><span class="line">process 12020 is executing new program: prog2</span><br><span class="line">Program exited normally.</span><br><span class="line">(gdb) info inferiors</span><br><span class="line">  Id   Description   Executable</span><br><span class="line">* 1    &lt;null&gt;        prog2</span><br></pre></td></tr></table></figure><h2 id="Setting-Catchpoints"><a href="#Setting-Catchpoints" class="headerlink" title="Setting Catchpoints"></a>Setting Catchpoints</h2><p><a href="https://www-zeuthen.desy.de/unix/unixguide/infohtml/gdb/Set-Catchpoints.html#Set-Catchpoints">Reference</a></p><h2 id="gdb-redirect-to-a-log-file"><a href="#gdb-redirect-to-a-log-file" class="headerlink" title="gdb redirect to a log file"></a>gdb redirect to a log file</h2><p>You need to enable logging:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(gdb) set logging on</span><br><span class="line">Now GDB will log to ./gdb.txt. You can tell it which file to use:</span><br><span class="line"></span><br><span class="line">(gdb) set logging file my_god_object.log</span><br><span class="line">And you can examine the current logging configuration:</span><br><span class="line"></span><br><span class="line">(gdb) show logging</span><br></pre></td></tr></table></figure><p><a href="https://stackoverflow.com/questions/5941158/gdb-print-to-file-instead-of-stdout">Refercence</a></p>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> gdb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gcc Usage</title>
      <link href="/blog/2024/01/23/cplusplus/gcc-Usage/"/>
      <url>/blog/2024/01/23/cplusplus/gcc-Usage/</url>
      
        <content type="html"><![CDATA[<h2 id="å±æ€§è¯­æ³•ï¼ˆAttribute-Syntaxï¼‰"><a href="#å±æ€§è¯­æ³•ï¼ˆAttribute-Syntaxï¼‰" class="headerlink" title="å±æ€§è¯­æ³•ï¼ˆAttribute Syntaxï¼‰"></a>å±æ€§è¯­æ³•ï¼ˆAttribute Syntaxï¼‰</h2><p>å‚è€ƒï¼š<a href="https://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Attribute-Syntax.html#Attribute%20Syntax">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><h3 id="å‡½æ•°å±æ€§ï¼ˆFunction-Attributesï¼‰"><a href="#å‡½æ•°å±æ€§ï¼ˆFunction-Attributesï¼‰" class="headerlink" title="å‡½æ•°å±æ€§ï¼ˆFunction Attributesï¼‰"></a>å‡½æ•°å±æ€§ï¼ˆFunction Attributesï¼‰</h3><p>å‚è€ƒï¼š</p><ul><li><a href="https://stackoverflow.com/questions/11621043/how-should-i-properly-use-attribute-format-printf-x-y-inside-a-class">stackoverflow</a></li><li><a href="https://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Function-Attributes.html">gccå®˜æ–¹æ–‡æ¡£ï¼šFunction Attributes</a></li></ul><p>å±æ€§åˆ—ä¸¾ï¼š</p><ul><li><p><code>format (archetype, string-index, first-to-check)</code></p><p>  format å±æ€§ï¼ŒæŒ‡å®šå‡½æ•°é‡‡ç”¨ printfã€scanfã€strftime æˆ– strfmon é£æ ¼çš„å‚æ•°ï¼Œ<br>  è¿™äº›å‚æ•°åº”æ ¹æ®æ ¼å¼å­—ç¬¦ä¸²ï¼ˆformat stringï¼‰è¿›è¡Œç±»å‹æ£€æŸ¥ï¼ˆtype-checkedï¼‰ã€‚<br>  ç±»å‹æ£€æŸ¥å‘ç”Ÿåœ¨ç¼–è¯‘æœŸã€‚</p><p>  ä¸¾ä¾‹ï¼š</p>  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">extern</span> <span class="type">int</span></span></span><br><span class="line"><span class="function"><span class="title">my_printf</span> <span class="params">(<span class="type">void</span> *my_object, <span class="type">const</span> <span class="type">char</span> *my_format, ...)</span></span></span><br><span class="line"><span class="function">    __<span class="title">attribute__</span> <span class="params">((format (printf, <span class="number">2</span>, <span class="number">3</span>)))</span></span>;</span><br></pre></td></tr></table></figure><ul><li><code>archetype</code>å†³å®šformat stringåº”è¯¥å¦‚ä½•è§£é‡Šã€‚<br>å¯é€‰ä¸º<code>printf</code>ã€<code>scanf</code>ã€<code>strftime</code>æˆ–<code>strfmon</code>ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨<code>__printf__</code>ã€<code>__scanf__</code>ã€<code>__strftime__</code>æˆ–<code>__strfmon__</code>ï¼‰ã€‚</li><li><code>string-index</code>æŒ‡å®šå“ªä¸ªå‚æ•°æ˜¯format stringï¼ˆä»1å¼€å§‹ï¼‰ã€‚</li><li><code>first-to-check</code>æŒ‡å®šformat stringå¯¹åº”çš„ç¬¬ä¸€ä¸ªå‚æ•°çš„åºå·ã€‚<br>å¯¹äºé‚£äº›æ— æ³•æ£€æŸ¥å‚æ•°çš„å‡½æ•°ï¼ˆæ¯”å¦‚<code>vprintf</code>ï¼‰ï¼Œè¯¥å‚æ•°æŒ‡å®šä¸º<code>0</code>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨ä»…æ£€æŸ¥format stringçš„ä¸€è‡´æ€§ã€‚å¯¹äº<code>strftime</code>æ ¼å¼ï¼Œè¯¥å‚æ•°å¿…é¡»ä¸º<code>0</code>ã€‚</li></ul></li></ul><h2 id="é€‰é¡¹"><a href="#é€‰é¡¹" class="headerlink" title="é€‰é¡¹"></a>é€‰é¡¹</h2><ul><li><code>-save-temps</code>: å¯ä»¥ä¿ç•™æ‰€æœ‰ä¸­é—´æ–‡ä»¶ï¼Œä¾‹å¦‚é¢„ç¼–è¯‘æ–‡ä»¶ã€æ±‡ç¼–æ–‡ä»¶ã€ç›®æ ‡æ–‡ä»¶ç­‰ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> gcc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Coredump</title>
      <link href="/blog/2024/01/23/cplusplus/Coredump/"/>
      <url>/blog/2024/01/23/cplusplus/Coredump/</url>
      
        <content type="html"><![CDATA[<h2 id="ulimit"><a href="#ulimit" class="headerlink" title="ulimit"></a><code>ulimit</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹é…ç½®</span></span><br><span class="line"><span class="built_in">ulimit</span> -a</span><br><span class="line"><span class="comment">#è®¾ç½®core file size</span></span><br><span class="line"><span class="built_in">ulimit</span> -c unlimited</span><br></pre></td></tr></table></figure><p><code>ulimit</code>åªå¯¹å½“å‰ç»ˆç«¯æœ‰æ•ˆã€‚</p><p>ä»¥ä¸‹ä¸¤ç§æ–¹æ³•å¯¹æ‰€æœ‰ç”¨æˆ·å’Œç»ˆç«¯æœ‰æ•ˆï¼š</p><ol><li>åœ¨<code>/etc/security/limits.conf</code>ä¸­è®¾ç½®ï¼ˆredhatè¡ç”Ÿç³»linuxï¼‰ã€‚</li><li>æˆ–æ³¨é‡Šæ‰<code>/etc/profile</code>ä¸­çš„è¿™ä¸€è¡Œï¼š <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># No core files by default</span></span><br><span class="line"><span class="built_in">ulimit</span> -S -c 0 &gt; /dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure></li></ol><h2 id="core-pattern"><a href="#core-pattern" class="headerlink" title="core_pattern"></a>core_pattern</h2><h3 id="core-patternè§£é‡Š"><a href="#core-patternè§£é‡Š" class="headerlink" title="core_patternè§£é‡Š"></a>core_patternè§£é‡Š</h3><p>è§<a href="https://stackoverflow.com/questions/2065912/core-dumped-but-core-file-is-not-in-the-current-directory">é“¾æ¥</a>ã€‚</p><p>Read <a href="http://www.kernel.org/doc/Documentation/sysctl/kernel.txt">&#x2F;usr&#x2F;src&#x2F;linux&#x2F;Documentation&#x2F;sysctl&#x2F;kernel.txt</a>.</p><pre><code>core_pattern is used to specify a core dumpfile pattern name.</code></pre><p>åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œ<a href="https://wiki.ubuntu.com/Apport">Apport</a>ï¼ˆcrash reporting serviceï¼‰ä¼šç”Ÿæˆé…ç½®æ–‡ä»¶<code>/proc/sys/kernel/core_pattern</code>ã€‚å‚è€ƒ<a href="https://askubuntu.com/questions/420410/how-to-permanently-edit-the-core-pattern-file">è¿™é‡Œ</a>ã€‚</p><p>Apport uses <code>/proc/sys/kernel/core_pattern</code> to directly pipe the core dump into <code>apport</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> /proc/sys/kernel/core_pattern</span><br><span class="line">|/usr/share/apport/apport %p %s %c</span><br><span class="line">$ </span><br></pre></td></tr></table></figure><p>Note that even if <code>ulimit</code> is set to disabled core files (by specyfing a core file size of zero using <code>ulimit -c 0</code>), <code>apport</code> will still capture the crash.</p><p>For intercepting Python crashes it installs a <code>/etc/python*/sitecustomize.py</code> to call apport on unhandled exceptions.</p><p>å…¶ä¸­ï¼Œ<code>/usr/share/apport/apport</code>æ˜¯ä¸€ä¸ªpythonè„šæœ¬ã€‚</p><p>ä»¥ä¸‹æ˜¯core_patternæ–‡ä»¶çš„å‚æ•°è¯´æ˜ï¼ˆå‚è€ƒLinux Manual Pageï¼š<code>man core</code>ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">%c - Core file size soft resource limit of crashing process (since Linux 2.6.24).</span><br><span class="line">%p - insert pid into filename æ·»åŠ pid</span><br><span class="line">%u - insert current uid into filename æ·»åŠ å½“å‰uid</span><br><span class="line">%g - insert current gid into filename æ·»åŠ å½“å‰gid</span><br><span class="line">%s - insert signal that caused the coredump into the filename æ·»åŠ å¯¼è‡´äº§ç”Ÿcoreçš„ä¿¡å·</span><br><span class="line">%t - insert UNIX time that the coredump occurred into filename æ·»åŠ coreæ–‡ä»¶ç”Ÿæˆæ—¶çš„unixæ—¶é—´</span><br><span class="line">%h - insert hostname where the coredump happened into filename æ·»åŠ ä¸»æœºå</span><br><span class="line">%e - insert coredumping executable name into filename æ·»åŠ å‘½ä»¤å</span><br><span class="line"></span><br><span class="line">If the first character of the pattern is a &#x27;|&#x27;, the kernel will treat the rest of the pattern as a command to run. The core dump will be written to the standard input of that program instead of to a file.</span><br></pre></td></tr></table></figure><p>Apportçš„æ‹¦æˆªç»„ä»¶é»˜è®¤æ˜¯å…³é—­çš„ï¼š</p><p>Apport itself is running at all times because it collects crash data for whoopsie (see <a href="https://wiki.ubuntu.com/ErrorTracker">ErrorTracker</a>). However, the crash interception component is still disabled. To enable it permanently, do:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/apport/crashdb.conf</span><br></pre></td></tr></table></figure><p>â€¦ and add a hash symbol # in the beginning of the following line:</p><pre><code>&#39;problem_types&#39;: [&#39;Bug&#39;, &#39;Package&#39;],</code></pre><p>To disable crash reporting just remove the hash symbol.</p><h3 id="è®¾ç½®core-pattern"><a href="#è®¾ç½®core-pattern" class="headerlink" title="è®¾ç½®core_pattern"></a>è®¾ç½®core_pattern</h3><p>è§<a href="https://www.cnblogs.com/xiaodoujiaohome/p/6222895.html">é“¾æ¥</a>ã€‚</p><ol><li><p>&#x2F;proc&#x2F;sys&#x2F;kernel&#x2F;core_uses_pidå¯ä»¥æ§åˆ¶äº§ç”Ÿçš„coreæ–‡ä»¶çš„æ–‡ä»¶åä¸­æ˜¯å¦æ·»åŠ pidä½œä¸ºæ‰©å±•ï¼Œå¦‚æœæ·»åŠ åˆ™æ–‡ä»¶å†…å®¹ä¸º1ï¼Œå¦åˆ™ä¸º0ï¼›</p></li><li><p>&#x2F;proc&#x2F;sys&#x2F;kernel&#x2F;core_patternå¯ä»¥è®¾ç½®æ ¼å¼åŒ–çš„coreæ–‡ä»¶ä¿å­˜ä½ç½®æˆ–æ–‡ä»¶åï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> /proc/sys/kernel/core_pattern</span><br><span class="line">|/usr/share/apport/apport %p %s %c</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;/corefile/core-%e-%p-%t&quot;</span> &gt; /proc/sys/kernel/core_pattern</span><br></pre></td></tr></table></figure><p> ä½ å¯ä»¥ç”¨ä¸‹åˆ—æ–¹å¼æ¥å®Œæˆï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹æ‰€æœ‰sysctlæ‰€æœ‰å˜é‡çš„å€¼ã€‚</span></span><br><span class="line">sysctl -a</span><br><span class="line"><span class="comment">#è®¾ç½®å˜é‡kernel.core_patternä¸ºå¦‚ä¸‹å€¼ã€‚</span></span><br><span class="line">sudo sysctl -w kernel.core_pattern=/tmp/core-%e.%p.%h.%t</span><br></pre></td></tr></table></figure><p> è¿™äº›æ“ä½œä¸€æ—¦è®¡ç®—æœºé‡å¯ï¼Œåˆ™ä¼šä¸¢å¤±ï¼Œå¦‚æœä½ æƒ³æŒä¹…åŒ–è¿™äº›æ“ä½œï¼Œå¯ä»¥åœ¨ &#x2F;etc&#x2F;sysctl.confæ–‡ä»¶ä¸­å¢åŠ ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kernel.core_pattern=/tmp/core%p</span><br></pre></td></tr></table></figure><p> åŠ å¥½åï¼Œå¦‚æœä½ æƒ³ä¸é‡å¯çœ‹çœ‹æ•ˆæœçš„è¯ï¼Œåˆ™ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl -p /etc/sysctl.conf</span><br></pre></td></tr></table></figure></li></ol><h2 id="ç›¸å…³å‘½ä»¤è¡Œå·¥å…·"><a href="#ç›¸å…³å‘½ä»¤è¡Œå·¥å…·" class="headerlink" title="ç›¸å…³å‘½ä»¤è¡Œå·¥å…·"></a>ç›¸å…³å‘½ä»¤è¡Œå·¥å…·</h2><p>å‚è€ƒèµ„æ–™ï¼š</p><p>Linux Manual Page: <a href="https://man7.org/linux/man-pages/man5/core.5.html"><code>man core</code></a></p><pre><code>SEE ALSO    bash(1),  coredumpctl(1),  gdb(1),  getrlimit(2), mmap(2), prctl(2), sigaction(2), elf(5), proc(5), pthreads(7), signal(7), systemd-coredump(8)</code></pre><h2 id="Segment-Faultæ’æŸ¥"><a href="#Segment-Faultæ’æŸ¥" class="headerlink" title="Segment Faultæ’æŸ¥"></a>Segment Faultæ’æŸ¥</h2><p>å‚è€ƒ<a href="https://www.wtango.com/%E6%AE%B5%E9%94%99%E8%AF%AFsegmentation-fault%E4%BA%A7%E7%94%9F%E7%9A%84%E5%8E%9F%E5%9B%A0%E4%BB%A5%E5%8F%8A%E8%B0%83%E8%AF%95%E6%96%B9%E6%B3%95/">é“¾æ¥</a>ã€‚</p><ol><li><p>dmesg + nm + addr2line</p><p>addr2lineåªèƒ½æ‰¾å‡ºexecutableçš„è¡Œå·ï¼›å¦‚æœæ˜¯shared librariesï¼Œè¯·ä½¿ç”¨gdbã€‚å‚è€ƒ<a href="https://stackoverflow.com/questions/2549214/interpreting-segfault-messages">è¿™é‡Œ</a>ã€‚</p><p>dmesgè¾“å‡ºçš„å«ä¹‰ï¼š</p><p>ip: è¡¨ç¤ºinstruction pointer.</p></li><li><p>fprintf</p></li><li><p>gdb</p></li><li><p>signal(SIGSEGV,handler)</p></li><li><p>valgrind<br>å‚è€ƒï¼š<br> <a href="https://jvns.ca/blog/2018/04/28/debugging-a-segfault-on-linux/">åšå®¢</a><br> <a href="https://valgrind.org/docs/manual/ms-manual.html">æ–‡æ¡£</a><br> <a href="https://courses.cs.washington.edu/courses/cse326/05wi/valgrind-doc/ms_main.html">å¯ä»¥ä½¿ç”¨PostScriptæŸ¥çœ‹å›¾å½¢åŒ–ç»“æœ</a></p></li><li><p>heaptrack</p><p> è§<a href="https://github.com/KDE/heaptrack">githubä»“åº“</a></p></li><li><p>Jemalloc</p><p> è§<a href="https://jemalloc.net/">å®˜ç½‘</a></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> debug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Compilation Principle</title>
      <link href="/blog/2024/01/23/cplusplus/Compilation-Principle/"/>
      <url>/blog/2024/01/23/cplusplus/Compilation-Principle/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¼–è¯‘ä¸»è¦æ­¥éª¤"><a href="#ç¼–è¯‘ä¸»è¦æ­¥éª¤" class="headerlink" title="ç¼–è¯‘ä¸»è¦æ­¥éª¤"></a>ç¼–è¯‘ä¸»è¦æ­¥éª¤</h2><p>å‚è€ƒ<a href="https://blog.csdn.net/chen1415886044/article/details/104537547">åšå®¢</a></p><ol><li>é¢„å¤„ç†</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -E test.c -o test.i</span><br></pre></td></tr></table></figure><ol start="2"><li><p>ç¼–è¯‘</p><p> ç¼–è¯‘æ˜¯å°†é«˜çº§è¯­è¨€ï¼ˆä¾‹å¦‚Cã€C++ã€Javeç­‰ï¼‰ä»£ç è½¬æ¢æˆæœºå™¨ç çš„è¿‡ç¨‹ã€‚<br> ç¼–è¯‘å¯ä»¥åˆ†æˆå¤šä¸ªé˜¶æ®µï¼ŒåŒ…æ‹¬è¯æ³•åˆ†æã€è¯­æ³•åˆ†æã€è¯­ä¹‰åˆ†æã€ä¼˜åŒ–å’Œä»£ç ç”Ÿæˆã€‚<br> ç¼–è¯‘å™¨é¦–å…ˆå°†æºä»£ç è½¬æ¢ä¸€ç§ä¸­é—´è¡¨ç¤ºï¼ˆé€šå¸¸æ˜¯æ±‡ç¼–ä»£ç æˆ–å­—èŠ‚ç ï¼‰ï¼Œç„¶åå†å°†å…¶è½¬æ¢ä¸ºç›®æ ‡æœºå™¨çš„æœºå™¨ä»£ç ã€‚<br> ç»è¿‡ç¼–è¯‘çš„ä»£ç é€šå¸¸æ˜¯äºŒè¿›åˆ¶çš„ï¼Œå¯ä»¥ç›´æ¥åœ¨ç›®æ ‡æœºå™¨ä¸Šæ‰§è¡Œã€‚</p></li></ol><p>å…ˆç”Ÿæˆæ±‡ç¼–ä»£ç ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -S test.i -o test.s</span><br></pre></td></tr></table></figure><ol start="3"><li><p>æ±‡ç¼–</p><p> å°†æ±‡ç¼–ä»£ç è½¬æˆæœºå™¨ç ã€‚</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -c test.s -o test.o</span><br></pre></td></tr></table></figure><ol start="4"><li><p>é“¾æ¥</p><p> è¯¥ç›®æ ‡æ–‡ä»¶ä¸å…¶ä»–ç›®æ ‡æ–‡ä»¶ã€åº“æ–‡ä»¶ã€å¯åŠ¨æ–‡ä»¶ç­‰é“¾æ¥èµ·æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc test.o -o <span class="built_in">test</span></span><br></pre></td></tr></table></figure><p>Note: å¯ä»¥ä½¿ç”¨ <code>-save-temps</code> é€‰é¡¹ä»¥ä¿ç•™ç¼–è¯‘è¿‡ç¨‹ä¸­çš„æ‰€æœ‰ä¸­é—´æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -save-temps test.c</span><br></pre></td></tr></table></figure><h2 id="é“¾æ¥"><a href="#é“¾æ¥" class="headerlink" title="é“¾æ¥"></a>é“¾æ¥</h2><h2 id="C-åç§°ä¿®é¥°"><a href="#C-åç§°ä¿®é¥°" class="headerlink" title="C++åç§°ä¿®é¥°"></a>C++åç§°ä¿®é¥°</h2><p><code>Name mangling (C++ only)</code>: åç§°ä¿®é¥°ï¼Œä¹Ÿç§°ä¸ºåç§°é‡æ•´ã€åç§°æ”¹ç¼–ã€‚å‚è§é“¾æ¥<a href="https://www.ibm.com/docs/en/i/7.2?topic=linkage-name-mangling-c-only">1</a>ã€<a href="https://zh.wikipedia.org/wiki/%E5%90%8D%E5%AD%97%E4%BF%AE%E9%A5%B0">2</a>ã€‚</p><h3 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h3><p>å‚è€ƒï¼š<code>man ld.so</code></p><pre><code>PATHLD_LIBRARY_PATHLD_PRELOAD</code></pre><h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><h3 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h3><p>å‚è€ƒï¼š<code>man ld.so</code>, <code>man vdso</code>, <code>man elf</code>, <a href="https://linux.die.net/man/1/scanelf">scanelf</a></p><pre><code>ld(1), ldd(1), pldd(1), sprof(1), dlopen(3),getauxval(3), elf(5), capabilities(7),rtld-audit(7), ldconfig(8), sln(8), vdso(7), as(1), elfedit(1), gdb(1), nm(1),objcopy(1), objdump(1), patchelf(1), readelf(1), size(1), strings(1), strip(1),execve(2), dl_iterate_phdr(3), core(5), ld.so(8)</code></pre><p>ldconfig</p><pre><code>é…ç½®åŠ¨æ€è¿æ¥å™¨ï¼ˆdynamic linkerï¼‰çš„è¿è¡Œæ—¶ç»‘å®šï¼ˆdynamic bindingsï¼‰ã€‚å¦‚æœä½ åˆšåˆšå®‰è£…å¥½å…±äº«åº“ï¼Œå¯èƒ½éœ€è¦è¿è¡Œldconfigï¼š    sudo ldconfigé€šå¸¸éœ€è¦è¶…çº§ç”¨æˆ·æ¥è¿è¡Œldconfigï¼Œå› ä¸ºå¯èƒ½å¯¹éœ€è¦æŸäº›rootç”¨æˆ·æ‰€æœ‰çš„ç›®å½•å’Œæ–‡ä»¶æœ‰å†™å…¥æƒé™ã€‚lddconfig ä¸ºä»ä»¥ä¸‹ç›®å½•æ‰¾åˆ°çš„å…±äº«åº“åˆ›å»ºå¿…è¦çš„ links å’Œ cache ï¼š    command lineæŒ‡å®šçš„ç›®å½•ï¼›    /etc/ld.so.confæ–‡ä»¶ä¸­æŒ‡å®šçš„ç›®å½•ï¼›    å—ä¿¡ä»»çš„ç›®å½•: /lib, /lib64, /usr/lib, /usr/lib64 ã€‚è¯¥ cache è¢«è¿è¡Œæ—¶è¿æ¥å™¨ï¼ˆrun-time linkerï¼‰ ld.so æˆ– ld-linux.so ä½¿ç”¨ã€‚ldconfig å°è¯•åŸºäºè¯¥åº“è¿æ¥çš„ C åº“æ¥æ¨æ–­ ELF åº“ï¼ˆæ¯”å¦‚ libc5 æˆ– libc6/glibcï¼‰çš„ç±»å‹ã€‚ä¸€äº›ç°æœ‰çš„åº“æ²¡æœ‰åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯æ¥æ¨æ–­å…¶ç±»å‹ã€‚å› æ­¤ï¼Œ /etc/ld.so.conf æ–‡ä»¶æ ¼å¼å…è®¸æŒ‡å®šæœŸæœ›çš„ç±»å‹ã€‚è¿™åªåœ¨è¿™äº› ELF åº“ä¸èƒ½è¢«è§£å†³çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚ldconfig æœŸæœ›çš„ç¬¦å·é“¾æ¥æœ‰æŸç§ç‰¹å®šçš„å½¢å¼ï¼Œæ¯”å¦‚ï¼š    libfoo.so -&gt; libfoo.so.1 -&gt; libfoo.so.1.12å…¶ä¸­ï¼Œä¸­é—´çš„æ–‡ä»¶ libfoo.so.1 æ˜¯åº“çš„ SONAME ã€‚å¦‚æœä¸éµå¾ªè¿™ç§æ ¼å¼å¯èƒ½ä¼šå¯¼è‡´å‡çº§åçš„å…¼å®¹æ€§é—®é¢˜ã€‚</code></pre><p>ldd</p><pre><code>æè¿°ï¼š    lddè°ƒç”¨æ ‡å‡†åŠ¨æ€è¿æ¥å™¨ï¼ˆè§ ld.so(8)ï¼‰ï¼Œå¹¶ä¸”å°†ç¯å¢ƒå˜é‡ LD_TRACE_LODADED_OBJECTS ä¸º 1 ã€‚    è¿™ä¼šè®©åŠ¨æ€è¿æ¥å™¨æ£€æŸ¥ç¨‹åºçš„åŠ¨æ€ä¾èµ–ï¼Œå¹¶ä¸”å¯»æ‰¾ï¼ˆæ ¹æ® ld.so(8) æè¿°çš„è§„åˆ™ï¼‰    å’ŒåŠ è½½æ»¡è¶³è¿™äº›ä¾èµ–çš„ç›®æ ‡ã€‚å¯¹äºæ¯ä¸€æ¡ä¾èµ–ï¼Œ    ldd æ˜¾ç¤ºåŒ¹é…çš„ç›®æ ‡çš„ä½ç½®å’Œå…¶è½½å…¥å¤„çš„16è¿›åˆ¶åœ°å€ã€‚    ï¼ˆlinux-vdsoå’Œld-linuxå…±äº«ä¾èµ–æ˜¯ç‰¹æ®Šçš„ï¼›è§vdso(7)å’Œld.so(8)ï¼‰å®‰å…¨æ€§ï¼š    æ³¨æ„ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸€äº›ç‰ˆæœ¬çš„lddå¯èƒ½ä¼šå°è¯•é€šè¿‡ç›´æ¥è¿è¡Œç¨‹åºï¼ˆå¯èƒ½å¯¼è‡´ç¨‹åºä¸­çš„ELFè§£é‡Šå™¨    æˆ–ç¨‹åºæœ¬èº«çš„è¿è¡Œï¼‰æ¥è·å–ä¾èµ–ä¿¡æ¯ã€‚    å› æ­¤ï¼Œæ°¸è¿œä¸è¦åœ¨ä¸å—ä¿¡ä»»çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸Šä½¿ç”¨lddï¼Œå› ä¸ºä¼šå¯¼è‡´éšæ„ä»£ç çš„è¿è¡Œã€‚æ›´å®‰å…¨æ›¿ä»£æ–¹æ³•ä¸ºï¼š        $ objdump -p /path/to/program | grep NEEDED    æ³¨æ„ï¼Œè¿™ç§æ›¿ä»£æ–¹æ³•åªä¼šæ˜¾ç¤ºè¯¥å¯æ‰§è¡Œæ–‡ä»¶çš„ç›´æ¥ä¾èµ–ï¼Œè€Œlddæ˜¾ç¤ºè¯¥å¯æ‰§è¡Œæ–‡ä»¶çš„æ•´ä¸ªä¾èµ–æ ‘ã€‚è§£é‡Šlddçš„è¾“å‡º:$ ldd -v libibsupport_real.so ./libibsupport_real.so: /usr/lib64/libibverbs.so.1: version `IBVERBS_1.8&#39; not found (required by ./libibsupport_real.so)    linux-vdso.so.1 =&gt;  (0x00002ad3e49e3000)    libibverbs.so.1 =&gt; /usr/lib64/libibverbs.so.1 (0x00002ad3e589b000)    ...    Version information:    ./libibsupport_real.so:            libgcc_s.so.1 (GCC_3.0) =&gt; /usr/lib64/libgcc_s.so.1            libibverbs.so.1 (IBVERBS_1.8) =&gt; not found            libibverbs.so.1 (IBVERBS_1.1) =&gt; /usr/lib64/libibverbs.so.1            ...    /usr/lib64/libnl-3.so.200:                libm.so.6 (GLIBC_2.2.5) =&gt; /usr/lib64/libm.so.6                ...åœ¨&quot;Version information&quot;ä¸­ï¼Œ&quot;libgcc_s.so.1 (GCC_3.0) =&gt; /usr/lib64/libgcc_s.so.1&quot;è¡¨ç¤ºï¼š    &quot;libgcc_s.so.1&quot;æŒ‡å®šä¸€ä¸ªshared libraryçš„åå­—ï¼ˆlibgcc_s.so.1æ˜¯GCC runtime libraryçš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œè¯¥shared libraryä¸º&quot;./libibsupport_real.so&quot;æ‰€ä¾èµ–ï¼›    &quot;(GCC_3.0)&quot;è¡¨æ˜&quot;libgcc_s.so.1&quot;éœ€è¦3.0ç‰ˆæœ¬åŠä»¥ä¸Šçš„GNU Compiler Collection (GCC)ï¼›    &quot;=&gt;&quot;æŒ‡å‡ºæ»¡è¶³ä¾èµ–çš„shared libraryï¼›    &quot;/usr/lib64/libgcc_s.so.1&quot;æ˜¯æ»¡è¶³è¦æ±‚çš„shared libraryçš„è·¯å¾„ã€‚</code></pre><p>  <a href="https://stackoverflow.com/questions/34428037/how-to-interpret-the-output-of-the-ldd-program">ldd outputè¯´æ˜</a></p><p>sprof</p><p>å‚è€ƒï¼š<a href="https://stackoverflow.com/questions/881074/how-to-use-sprof">stackoverflows</a></p><p>objdump</p><pre><code>[-p|--private-headers][-x|--all-headers]</code></pre><p>readelf</p><pre><code>[-d|--dynamic]</code></pre><h3 id="æ–‡ä»¶"><a href="#æ–‡ä»¶" class="headerlink" title="æ–‡ä»¶"></a>æ–‡ä»¶</h3><pre><code>/lib/ld.so    Run-time linker/loader./etc/ld.so.conf    File containing a list of directories, one per line, in which to search for libraries./etc/ld.so.cache    File containing an ordered list of libraries found in the directories specified in /etc/ld.so.conf, as well as those found in the trusted directories.The trusted directories:    /lib    /lib64    /usr/lib    /usr/lib64</code></pre><p>ld.so</p><pre><code>åå­—    ld.so, ld-linux.so - åŠ¨æ€è¿æ¥/åŠ è½½å™¨ã€‚ç®€ä»‹    åŠ¨æ€è¿æ¥å™¨å¯ä»¥è¢«é—´æ¥è¿è¡Œæˆ–ç›´æ¥è¿è¡Œã€‚    é—´æ¥è¿è¡Œï¼š        è¿è¡ŒæŸäº›åŠ¨æ€è¿æ¥ç¨‹åºæˆ–å…±äº«åº“ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸èƒ½å‘åŠ¨æ€è¿æ¥å™¨ä¼ é€’å‘½ä»¤è¡Œé€‰é¡¹ï¼›å¹¶ä¸”åœ¨ELFæƒ…å†µä¸‹ï¼Œå­˜å‚¨åœ¨ç¨‹åºçš„.interp sectionä¸­çš„åŠ¨æ€è¿æ¥å™¨è¢«æ‰§è¡Œã€‚    ç›´æ¥è¿è¡Œï¼š        /lib/ld-linux.so.* [OPTIONS] [PRAGRAM [ARGUMENTS]]æè¿°    ld.so å’Œ ld-linux.so* å¯»æ‰¾å’ŒåŠ è½½ç¨‹åºæ‰€éœ€çš„å…±äº«å¯¹è±¡ï¼ˆå…±äº«åº“ï¼‰ï¼Œå‡†å¤‡ç¨‹åºçš„è¿è¡Œï¼Œç„¶åè¿è¡Œå®ƒã€‚    å¦‚æœåœ¨ç¼–è¯‘æœŸæ²¡æœ‰å‘ ld(1) æŒ‡å®š -static é€‰é¡¹ï¼Œåˆ™LinuxäºŒè¿›åˆ¶æ–‡ä»¶éœ€è¦åŠ¨æ€è¿æ¥ï¼ˆåœ¨è¿è¡Œæ—¶è¿æ¥ï¼‰ã€‚</code></pre><h3 id="SONAME"><a href="#SONAME" class="headerlink" title="SONAME"></a>SONAME</h3><p>å‚è€ƒï¼š<code>man ldconfig</code><br>å‚è€ƒï¼š<a href="https://en.wikipedia.org/wiki/Soname">SONAME Wiki</a></p><blockquote><p>GNU linkerä½¿ç”¨ -hname æˆ– -soname&#x3D;name æ¥æŒ‡å®šè¯¥åº“çš„library name fieldã€‚<br>åœ¨å†…éƒ¨ï¼Œlinkerä¼šåˆ›å»ºä¸€ä¸ª DT_SONAME fieldå¹¶ä¸”ç”¨ name æ¥å¡«å……å®ƒã€‚</p></blockquote><ol><li>æŒ‡å®šSONAMEï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Use ld:</span></span><br><span class="line">$ ld -shared -soname libexample.so.1 -o libexample.so.1.2.3 file1.o file2.o</span><br><span class="line"><span class="comment">#Use gcc or g++:</span></span><br><span class="line">$ gcc -shared -Wl,-soname,libexample.so.1 -o libexample.so.1.2.3 file1.o file2.o</span><br></pre></td></tr></table></figure><ol start="2"><li>å®‰è£…æ—¶åˆ›å»ºè½¯é“¾æ¥ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s libexample.so.1.2.3 libexample.so.1</span><br><span class="line"><span class="built_in">ln</span> -s libexample.so.1 libexample.so</span><br></pre></td></tr></table></figure><ol start="3"><li>æŸ¥çœ‹SONAMEï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Use objdump</span></span><br><span class="line">$ objdump -p libexample.so.1.3 | grep SONAME</span><br><span class="line">  SONAME               libexample.so.1</span><br><span class="line"><span class="comment">#Use readelf</span></span><br><span class="line">$ readelf -d libexample.so | grep SONAME</span><br><span class="line"> 0x000000000000000e (SONAME)             Library soname: [libexample.so.1]</span><br></pre></td></tr></table></figure><h3 id="versioning-information"><a href="#versioning-information" class="headerlink" title="versioning information"></a>versioning information</h3><p>å®šåˆ¶å‡½æ•°ç‰ˆæœ¬ï¼š</p><ol><li>example.cä¸­å®šä¹‰å‡½æ•°<code>my_printf</code>ï¼š</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">my_printf</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* format)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>, format);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>version_script.txtä¸­å®šä¹‰å‡½æ•°çš„ç‰ˆæœ¬ä¸º<code>VERSION_1</code>ï¼š</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">VERSION_1 &#123;</span><br><span class="line"> global:</span><br><span class="line">   my_printf;</span><br><span class="line"> local:</span><br><span class="line">   *;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="3"><li>ç¼–è¯‘æ—¶æŒ‡å®š<code>version_script.txt</code>ä¸ºversion-scriptï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -shared -Wl,--version-script=version_script.txt -o libexample.so example.o</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>-Wl,</code>å¼•å‡ºè¿æ¥å™¨é€‰é¡¹ã€‚</p><ol start="4"><li>ä½¿ç”¨<code>readelf -sW libexample.so</code>æŸ¥çœ‹å‡½æ•°<code>my_printf</code>çš„ç‰ˆæœ¬å·ï¼ˆâ€VERSION_1â€ï¼‰ï¼š</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Symbol table &#x27;.dynsym&#x27; contains 8 entries:</span><br><span class="line">   Num:    Value          Size Type    Bind   Vis      Ndx Name</span><br><span class="line">     0: 0000000000000000     0 NOTYPE  LOCAL  DEFAULT  UND </span><br><span class="line">     1: 0000000000000000     0 NOTYPE  WEAK   DEFAULT  UND _ITM_deregisterTMCloneTable</span><br><span class="line">     2: 0000000000000000     0 FUNC    GLOBAL DEFAULT  UND printf@GLIBC_2.2.5 (3)</span><br><span class="line">     3: 0000000000000000     0 NOTYPE  WEAK   DEFAULT  UND __gmon_start__</span><br><span class="line">     4: 0000000000000000     0 NOTYPE  WEAK   DEFAULT  UND _ITM_registerTMCloneTable</span><br><span class="line">     5: 0000000000000000     0 FUNC    WEAK   DEFAULT  UND __cxa_finalize@GLIBC_2.2.5 (3)</span><br><span class="line">     6: 0000000000001105    39 FUNC    GLOBAL DEFAULT   13 my_printf@@VERSION_1</span><br><span class="line">     7: 0000000000000000     0 OBJECT  GLOBAL DEFAULT  ABS VERSION_1</span><br></pre></td></tr></table></figure><h3 id="ELF"><a href="#ELF" class="headerlink" title="ELF"></a>ELF</h3><pre><code>ELF - Executable and Linking Format.ELFæè¿°äº†normal executable filesã€relocatable object filesã€core fileså’Œshared objectsçš„æ ¼å¼ã€‚</code></pre><p>å‚è€ƒï¼š<code>man elf</code>, <a href="http://chuquan.me/2018/05/21/elf-introduce/">åšå®¢:elfä»‹ç»</a>ã€‚</p><h3 id="é“¾æ¥å"><a href="#é“¾æ¥å" class="headerlink" title="é“¾æ¥å"></a>é“¾æ¥å</h3><p>å‚è€ƒï¼š<a href="https://littlebee1024.github.io/learning_book/booknotes/cxydzwxy/link/dynamic/#_16">ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»</a>, <code>man ld</code></p><p>GCCçš„æä¾›äº†ä¸åŒçš„æ–¹æ³•æŒ‡å®šé“¾æ¥çš„å…±äº«åº“ï¼š</p><ul><li><p><code>l&lt;link_name&gt;</code>å‚æ•°</p><p>  æŒ‡å®šéœ€è¦é“¾æ¥çš„å…±äº«åº“lib<link_name>.so</p></li><li><p><code>l:&lt;filename&gt;</code>å‚æ•°</p><p>  é€šè¿‡æ–‡ä»¶åæŒ‡å®šå…±äº«åº“ï¼Œå‚è€ƒLDæ‰‹å†Œ</p></li><li><p>å…¨è·¯å¾„æŒ‡å®š</p></li><li><p><code>Wl,-static</code>å‚æ•°</p><p>  æŒ‡å®šæŸ¥æ‰¾é™æ€åº“ï¼Œé€šè¿‡-Wl,-Bdynamicæ¢å¤æˆåŠ¨æ€åº“æŸ¥æ‰¾</p></li></ul><h3 id="é“¾æ¥å™¨é€‰é¡¹"><a href="#é“¾æ¥å™¨é€‰é¡¹" class="headerlink" title="é“¾æ¥å™¨é€‰é¡¹"></a>é“¾æ¥å™¨é€‰é¡¹</h3><p>å‚è€ƒï¼š<code>man ld</code></p><pre><code>ld - The GNU linker</code></pre><p>é€‰é¡¹ï¼š</p><pre><code>-rpath=dir    æ·»åŠ ä¸€ä¸ªç›®å½•åˆ°è¿è¡Œæ—¶åº“æœå¯»è·¯å¾„ä¸­ã€‚</code></pre><p>gccé€šè¿‡ <code>-Wl</code> å‰ç¼€æŒ‡å®šé“¾æ¥å™¨é€‰é¡¹ï¼Œä¾‹å¦‚ï¼š</p><pre><code> gcc -Wl,--start-group foo.o bar.o -Wl,--end-group gcc -Wl,-rpath,&#39;$ORIGIN/../lib&#39;</code></pre><h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><ol><li><a href="https://unix.stackexchange.com/questions/120015/how-to-find-out-the-dynamic-libraries-executables-loads-when-run">How to find out the dynamic libraries are loaded when running an executable?</a></li></ol><p>Answer:</p><ul><li><code>ldd /path/to/program</code></li><li><code>objdump -p /path/to/program | grep NEEDED</code></li><li><code>lddtree</code> (from <code>pax-utils</code>) or <code>readelf -d /bin/ls | grep &#39;NEEDED&#39;</code></li><li><code>lsof -p PID | grep mem</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ pidof nginx</span><br><span class="line">6920 6919</span><br><span class="line"></span><br><span class="line">$ lsof -p 6919 | grep mem</span><br></pre></td></tr></table></figure><ul><li><code>strace -e trace=open myprogram</code></li></ul><p><code>ldd</code> and <code>lsof</code> show the libraries loaded either directly or at a given moment. They do not account for libraries loaded via <code>dlopen</code> (or discarded by <code>dlclose</code>). You can get a better picture of this using <code>strace</code>.</p><ul><li><code>pmap &lt;pid&gt; -p</code></li></ul><h3 id="Notice"><a href="#Notice" class="headerlink" title="Notice"></a>Notice</h3><ol><li>ç”Ÿæˆsoæ—¶ï¼Œé“¾æ¥å™¨ä¸ä¼šå¯»æ‰¾å…¶soä¾èµ–ï¼›executableä¼šå¯»æ‰¾soçš„ä¾èµ–å…³ç³»ã€‚æ¢å¥è¯è¯´ï¼Œå³ä½¿soç”Ÿæˆè¿‡ç¨‹ä¸æŠ¥é”™ï¼Œä½†æ˜¯executableç”Ÿæˆæ—¶å¯èƒ½ä¼šæŠ¥é”™ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> compile </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cpp Defects</title>
      <link href="/blog/2024/01/23/cplusplus/Cpp-Defects/"/>
      <url>/blog/2024/01/23/cplusplus/Cpp-Defects/</url>
      
        <content type="html"><![CDATA[<h2 id="basic-string-M-construct-null-not-valid"><a href="#basic-string-M-construct-null-not-valid" class="headerlink" title="basic_string::_M_construct null not valid"></a>basic_string::_M_construct null not valid</h2><p>C++æœ‰ä¸€ä¸ªç¼ºé™·ï¼Œè¯·çœ‹ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//cpp defeat: basic_string::_M_construct null not valid</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;fun&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">fun</span>(<span class="number">0</span>); <span class="comment">// Run-time error: basic_string::_M_construct null not valid</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>fun(0)</code>çš„<code>0</code>ä¼šè¢«è§†ä¸º<code>const char*</code>ç±»å‹ï¼Œä¹Ÿå°±æ˜¯<code>nullptr</code>ï¼Œæ‰€ä»¥åœ¨ç¼–è¯‘æœŸå¯ä»¥é€šè¿‡ã€‚<br>ä½†æ˜¯è¿è¡ŒæœŸä¼šè§¦å‘<code>string</code>å¯¹è±¡çš„æ„é€ é”™è¯¯â€œbasic_string::_M_construct null not validâ€ã€‚</p><p>éšè”½ä¸€ç‚¹çš„ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span> * <span class="title">get_a_string</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Attention: Alaways take care that a parameter to a string should not be NULL!</span></span><br><span class="line">    <span class="built_in">fun</span>(<span class="built_in">get_a_string</span>()); <span class="comment">// Run-time error: basic_string::_M_construct null not valid</span></span><br><span class="line">    <span class="comment">// Better code</span></span><br><span class="line">    <span class="type">char</span> * str = <span class="built_in">get_a_string</span>();</span><br><span class="line">    <span class="built_in">fun</span>(str != <span class="literal">NULL</span>? str : <span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> debug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cpp Debug Tools</title>
      <link href="/blog/2024/01/23/cplusplus/Cpp-Debug-Tools/"/>
      <url>/blog/2024/01/23/cplusplus/Cpp-Debug-Tools/</url>
      
        <content type="html"><![CDATA[<h2 id="Unit-testing-framework"><a href="#Unit-testing-framework" class="headerlink" title="Unit testing framework"></a>Unit testing framework</h2><p><a href="https://cpptest.sourceforge.io/tutorial.html">CppTest</a></p><h2 id="Memory-check"><a href="#Memory-check" class="headerlink" title="Memory check"></a>Memory check</h2><p>valgrind<br>å‚è€ƒï¼š<br>    <a href="https://jvns.ca/blog/2018/04/28/debugging-a-segfault-on-linux/">åšå®¢</a><br>    <a href="https://valgrind.org/docs/manual/ms-manual.html">æ–‡æ¡£</a><br>    <a href="https://courses.cs.washington.edu/courses/cse326/05wi/valgrind-doc/ms_main.html">å¯ä»¥ä½¿ç”¨PostScriptæŸ¥çœ‹å›¾å½¢åŒ–ç»“æœ</a></p><p><a href="https://github.com/google/sanitizers/wiki/AddressSanitizer">AddressSanitizer</a></p><h2 id="Performance-analyzer"><a href="#Performance-analyzer" class="headerlink" title="Performance analyzer"></a>Performance analyzer</h2><p>Oracle Developer Studioï¼š</p><p><a href="https://www.oracle.com/application-development/technologies/developerstudio-features.html#performance-analyzer-tab">Performance Analyzer</a>ï¼š<a href="https://docs.oracle.com/cd/E77782_01/html/E77798/afagg.html#OSSPAgrkam">æ‰‹å†Œ</a></p><p><a href="https://www.oracle.com/application-development/technologies/developerstudio-features.html#thread-analyzer-tab">Thread Analyzer</a></p><p><a href="https://ftp.gnu.org/old-gnu/Manuals/gprof-2.9.1/html_mono/gprof.html">gprof</a>: <a href="https://blog.csdn.net/luronggui/article/details/118141262">ä½¿ç”¨æ–¹æ³•</a></p><h3 id="timer"><a href="#timer" class="headerlink" title="timer"></a>timer</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ /usr/bin/time -p <span class="built_in">ls</span></span><br></pre></td></tr></table></figure><p>Or,</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ time <span class="built_in">ls</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼ˆå‚è€ƒ<a href="https://ostechnix.com/how-to-find-the-execution-time-of-a-command-or-process-in-linux/">é“¾æ¥</a>ï¼‰ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">type</span> -a time</span><br><span class="line">time is a shell keyword</span><br><span class="line">time is /usr/bin/time</span><br></pre></td></tr></table></figure><h3 id="CPUæ—¶é—´"><a href="#CPUæ—¶é—´" class="headerlink" title="CPUæ—¶é—´"></a>CPUæ—¶é—´</h3><p>Functionâ€™s CPU time:</p><pre><code>* Inclusive time: total cpu time, include all functions it calls.* Exclusive time: only the time used by the function itself, exclusive all its children.Refer to [here](https://stackoverflow.com/questions/15760447/what-is-the-meaning-of-incl-cpu-time-excl-cpu-time-incl-real-cpu-time-excl-re/74426370).</code></pre><ol><li><p>Wall time: total time the process used, containing IO time.</p></li><li><p>CPU usage (CPUåˆ©ç”¨ç‡) &#x3D; CPU time &#x2F; Wall time.</p></li><li><p>real&#x2F;user&#x2F;system time</p><ul><li><strong>Real</strong> is wall clock time - time from start to finish of the call. This is all elapsed time including time slices used by other processes and time the process spends blocked (for example if it is waiting for I&#x2F;O to complete).</li><li><strong>User</strong> is the amount of CPU time spent in user-mode code (outside the kernel) within the process. This is only actual CPU time used in executing the process. Other processes and time the process spends blocked do not count towards this figure.</li><li><strong>Sys</strong> is the amount of CPU time spent in the kernel within the process. This means executing CPU time spent in system calls within the kernel, as opposed to library code, which is still running in user-space. Like â€˜userâ€™, this is only CPU time used by the process. See below for a brief description of kernel mode (also known as â€˜supervisorâ€™ mode) and the system call mechanism.</li></ul><p> Refer to <a href="https://stackoverflow.com/questions/556405/what-do-real-user-and-sys-mean-in-the-output-of-time1">here</a>.</p></li><li><p>CPU æ—¶é—´å¯èƒ½å¤§äºå¢™ä¸Šæ—¶é—´ï¼š</p><p>è¿™æ˜¯å› ä¸º CPU æ—¶é—´æ˜¯æ‰€æœ‰ CPU æ ¸çš„è¿è¡Œæ—¶é—´çš„ç´¯åŠ å’Œï¼Œå¢™ä¸Šæ—¶é—´åˆ™æ˜¯å®é™…çš„æ—¶é—´ã€‚æ­¤æ—¶ CPU åˆ©ç”¨ç‡å¤§äº 100%. ï¼ˆè¿™æ˜¯è‡ªå·±çš„ç†è§£ï¼‰</p></li><li><p>TODO: Is CPU time in flame graph sum of all the CPU time? Or is it the wall time when CPU works?</p></li></ol><h2 id="debug-tool"><a href="#debug-tool" class="headerlink" title="debug tool"></a>debug tool</h2><h3 id="gdb"><a href="#gdb" class="headerlink" title="gdb"></a>gdb</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(gdb) breakpoint exit</span><br><span class="line">(gdb) breakpoint _exit</span><br><span class="line">(gdb) breakpoint atexit</span><br><span class="line">(gdb) breakpoint abort</span><br></pre></td></tr></table></figure><p>Enable coredump: <a href="https://medium.com/@sourabhedake/core-dumps-how-to-enable-them-73856a437711">how to do</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ulimit</span> -c unlimited</span><br></pre></td></tr></table></figure><p>Where is the core dumped file:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">&#x27;kernel.core_pattern&#x27;</span> /etc/sysctl.conf</span><br></pre></td></tr></table></figure><h3 id="strace"><a href="#strace" class="headerlink" title="strace"></a>strace</h3><p>Example:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strace -f -o strace.log -tt -y -yy -e trace=desc,process,network</span><br></pre></td></tr></table></figure><p>Refer to <a href="https://gist.github.com/graste/929bb122c353bdd90c20">here</a></p><blockquote><p>-e trace&#x3D;ipc â€“ communication between processes (IPC)<br>-e trace&#x3D;memory â€“ memory syscalls<br>-e trace&#x3D;network â€“ network syscalls<br>-e trace&#x3D;process â€“ process calls (like fork, exec)<br>-e trace&#x3D;signal â€“ process signal handling (like HUP, exit)<br>-e trace&#x3D;file â€“ file related syscalls<br>-e trace&#x3D;desc â€“ all file descriptor related system calls</p></blockquote><h3 id="DDT"><a href="#DDT" class="headerlink" title="DDT"></a>DDT</h3><p><a href="https://www.linaroforge.com/linaroDdt">DDT</a></p>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> debug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mkdocs Configuration</title>
      <link href="/blog/2024/01/23/personal_site/Mkdocs-Configuration/"/>
      <url>/blog/2024/01/23/personal_site/Mkdocs-Configuration/</url>
      
        <content type="html"><![CDATA[<h2 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h2><p><code>mkdocs.yml</code> æ–‡ä»¶æ˜¯ MkDocs æ–‡æ¡£ç”Ÿæˆå™¨çš„é…ç½®æ–‡ä»¶ã€‚</p><p>ç¤ºä¾‹ï¼š<a href="https://github.com/squidfunk/mkdocs-material/blob/master/mkdocs.yml"><code>mkdocs.yml</code></a></p><h3 id="theme"><a href="#theme" class="headerlink" title="theme"></a>theme</h3><p>è¯¥æ–‡ä»¶ä¸­çš„ <code>theme</code> éƒ¨åˆ†ç”¨äºæŒ‡å®šç”¨äºç”Ÿæˆæ–‡æ¡£çš„ä¸»é¢˜ã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨çš„ä¸»é¢˜æ˜¯ Materialã€‚ <code>name</code> å­—æ®µæŒ‡å®šä¸»é¢˜çš„åç§°ï¼Œè€Œ <code>custom_dir</code> å­—æ®µæŒ‡å®šåŒ…å«ä¸»é¢˜è‡ªå®šä¹‰å†…å®¹çš„ç›®å½•ã€‚ <code>features</code> å­—æ®µæŒ‡å®šå¯ä»¥ä¸ºä¸»é¢˜å¯ç”¨çš„å¯é€‰åŠŸèƒ½åˆ—è¡¨ã€‚</p><p>ä»¥ä¸‹æ˜¯åœ¨æ­¤é…ç½®æ–‡ä»¶ä¸­åˆ—å‡ºçš„å¯é€‰åŠŸèƒ½ï¼š</p><ul><li><code>announce.dismiss</code>: å¯ç”¨å¯å…³é—­çš„å…¬å‘Šæ¨ªå¹…ï¼Œæ˜¾ç¤ºåœ¨æ–‡æ¡£çš„æ¯ä¸ªé¡µé¢é¡¶éƒ¨ã€‚</li><li><code>content.action.edit</code>: åœ¨æ¯ä¸ªé¡µé¢ä¸Šå¯ç”¨â€œç¼–è¾‘â€æŒ‰é’®ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥è½»æ¾ç¼–è¾‘é¡µé¢å†…å®¹ã€‚</li><li><code>content.action.view</code>: åœ¨æ¯ä¸ªé¡µé¢ä¸Šå¯ç”¨â€œæŸ¥çœ‹æºä»£ç â€æŒ‰é’®ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥æŸ¥çœ‹é¡µé¢çš„æºä»£ç ã€‚</li><li><code>content.code.annotate</code>: å¯ç”¨ä»£ç æ³¨é‡ŠåŠŸèƒ½ï¼Œä½¿ç”¨æˆ·å¯ä»¥æ·»åŠ æ³¨é‡Šä»¥è§£é‡Šä»£ç ã€‚</li><li><code>content.code.copy</code>: å¯ç”¨ä»£ç å¤åˆ¶åŠŸèƒ½ï¼Œä½¿ç”¨æˆ·å¯ä»¥è½»æ¾å¤åˆ¶ä»£ç ã€‚</li><li><code>content.tooltips</code>: å¯ç”¨å·¥å…·æç¤ºåŠŸèƒ½ï¼Œä½¿ç”¨æˆ·å¯ä»¥åœ¨é¼ æ ‡æ‚¬åœæ—¶æŸ¥çœ‹æœ‰å…³é¡µé¢å…ƒç´ çš„ä¿¡æ¯ã€‚</li><li><code>navigation.footer</code>: åœ¨æ¯ä¸ªé¡µé¢ä¸Šå¯ç”¨é¡µè„šå¯¼èˆªæ ã€‚</li><li><code>navigation.indexes</code>: å¯ç”¨ç´¢å¼•å¯¼èˆªæ ï¼Œä½¿ç”¨æˆ·å¯ä»¥è½»æ¾æµè§ˆæ–‡æ¡£ä¸­çš„ç´¢å¼•ã€‚</li><li><code>navigation.sections</code>: å¯ç”¨éƒ¨åˆ†å¯¼èˆªæ ï¼Œä½¿ç”¨æˆ·å¯ä»¥è½»æ¾æµè§ˆæ–‡æ¡£ä¸­çš„å„ä¸ªéƒ¨åˆ†ã€‚</li><li><code>navigation.tabs</code>: å¯ç”¨é€‰é¡¹å¡å¯¼èˆªæ ï¼Œä½¿ç”¨æˆ·å¯ä»¥è½»æ¾æµè§ˆæ–‡æ¡£ä¸­çš„å„ä¸ªé€‰é¡¹å¡ã€‚</li><li><code>navigation.top</code>: åœ¨æ¯ä¸ªé¡µé¢ä¸Šå¯ç”¨é¡¶éƒ¨å¯¼èˆªæ ã€‚</li><li><code>navigation.tracking</code>: å¯ç”¨å¯¼èˆªè·Ÿè¸ªåŠŸèƒ½ï¼Œä½¿ç”¨æˆ·å¯ä»¥è·Ÿè¸ªä»–ä»¬åœ¨æ–‡æ¡£ä¸­çš„ä½ç½®ã€‚</li><li><code>search.highlight</code>: å¯ç”¨æœç´¢ç»“æœé«˜äº®æ˜¾ç¤ºåŠŸèƒ½ã€‚</li><li><code>search.share</code>: å¯ç”¨å…±äº«æœç´¢ç»“æœåŠŸèƒ½ï¼Œä½¿ç”¨æˆ·å¯ä»¥è½»æ¾å…±äº«æœç´¢ç»“æœã€‚</li><li><code>search.suggest</code>: å¯ç”¨æœç´¢å»ºè®®åŠŸèƒ½ï¼Œä½¿ç”¨æˆ·å¯ä»¥åœ¨è¾“å…¥æœç´¢æŸ¥è¯¢æ—¶è·å¾—å»ºè®®ã€‚</li><li><code>toc.follow</code>: å¯ç”¨ç›®å½•è·ŸéšåŠŸèƒ½ï¼Œä½¿ç›®å½•å§‹ç»ˆä¿æŒå¯è§ã€‚</li></ul><p><code>palette</code> å­—æ®µæŒ‡å®šäº†ä¸€ä¸ªé¢œè‰²æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆåŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li><code>scheme</code>: æŒ‡å®šé¢œè‰²æ–¹æ¡ˆçš„åç§°ã€‚</li><li><code>primary</code>: æŒ‡å®šä¸»è¦é¢œè‰²ã€‚</li><li><code>accent</code>: æŒ‡å®šå¼ºè°ƒé¢œè‰²ã€‚</li><li><code>toggle</code>: æŒ‡å®šåˆ‡æ¢åˆ°æš—æ¨¡å¼æ—¶ä½¿ç”¨çš„å›¾æ ‡å’Œåç§°ã€‚</li></ul><p>ç¬¬ä¸€ä¸ªæ–¹æ¡ˆåä¸º defaultï¼Œå…¶ä¸­ä¸»è¦é¢œè‰²å’Œå¼ºè°ƒé¢œè‰²å‡ä¸º indigoã€‚åˆ‡æ¢åˆ°æš—æ¨¡å¼æ—¶ï¼Œä½¿ç”¨çš„å›¾æ ‡ä¸º material&#x2F;brightness-7ï¼Œåç§°ä¸ºâ€œåˆ‡æ¢åˆ°æš—æ¨¡å¼â€ã€‚</p><p>ç¬¬äºŒä¸ªæ–¹æ¡ˆåä¸º slateï¼Œå…¶ä¸­ä¸»è¦é¢œè‰²å’Œå¼ºè°ƒé¢œè‰²å‡ä¸º indigoã€‚åˆ‡æ¢åˆ°äº®æ¨¡å¼æ—¶ï¼Œä½¿ç”¨çš„å›¾æ ‡ä¸º material&#x2F;brightness-4ï¼Œåç§°ä¸ºâ€œåˆ‡æ¢åˆ°äº®æ¨¡å¼â€ã€‚</p><p>font å­—æ®µæŒ‡å®šäº†ç”¨äºæ–‡æœ¬å’Œä»£ç çš„å­—ä½“ã€‚åœ¨æ­¤é…ç½®æ–‡ä»¶ä¸­ï¼Œæ–‡æœ¬å­—ä½“ä¸º Robotoï¼Œä»£ç å­—ä½“ä¸º Roboto Monoã€‚ favicon å­—æ®µæŒ‡å®šäº†ç½‘ç«™å›¾æ ‡çš„è·¯å¾„ã€‚ icon å­—æ®µæŒ‡å®šäº†ç½‘ç«™æ ‡å¿—çš„è·¯å¾„ã€‚</p><p>favicon å’Œ icon æ˜¯ç½‘ç«™çš„ä¸¤ä¸ªä¸åŒå…ƒç´ ã€‚</p><p>favicon æ˜¯ç½‘ç«™çš„å›¾æ ‡ï¼Œé€šå¸¸æ˜¾ç¤ºåœ¨æµè§ˆå™¨æ ‡ç­¾é¡µä¸Šã€‚å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå°çš„å›¾åƒæ–‡ä»¶ï¼Œé€šå¸¸æ˜¯ .ico æ ¼å¼ã€‚åœ¨ mkdocs.yml æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ favicon å­—æ®µæ¥æŒ‡å®šç½‘ç«™å›¾æ ‡çš„è·¯å¾„ã€‚</p><p>icon æ˜¯ç½‘ç«™çš„æ ‡å¿—ï¼Œé€šå¸¸æ˜¾ç¤ºåœ¨ç½‘ç«™çš„æ ‡é¢˜æ æˆ–é¡µçœ‰ä¸­ã€‚å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå›¾åƒæ–‡ä»¶ï¼Œä¾‹å¦‚ .png æˆ– .jpg æ–‡ä»¶ã€‚åœ¨ mkdocs.yml æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ icon å­—æ®µæ¥æŒ‡å®šç½‘ç«™æ ‡å¿—çš„è·¯å¾„ã€‚</p><h3 id="plugin"><a href="#plugin" class="headerlink" title="plugin"></a>plugin</h3><p>è¿™é‡Œåˆ—å‡ºäº†ä¸‰ä¸ªæ’ä»¶ï¼šblogã€searchå’Œminifyã€‚å…¶ä¸­ï¼Œblogæ’ä»¶ç”¨äºæ”¯æŒåšå®¢åŠŸèƒ½ï¼Œsearchæ’ä»¶ç”¨äºæ”¯æŒæœç´¢åŠŸèƒ½ï¼Œè€Œminifyæ’ä»¶ç”¨äºå‹ç¼©HTMLæ–‡ä»¶ã€‚åœ¨searchæ’ä»¶ä¸­ï¼Œseparatorå‚æ•°æŒ‡å®šäº†æœç´¢æ—¶çš„åˆ†éš”ç¬¦ï¼Œè¿™é‡Œçš„åˆ†éš”ç¬¦åŒ…æ‹¬ç©ºæ ¼ã€è¿å­—ç¬¦ã€é€—å·ã€å†’å·ã€ç­‰å·ã€æ„Ÿå¹å·ã€æ–¹æ‹¬å·ã€æ‹¬å·ã€å¼•å·ã€åå¼•å·å’Œæ–œæ ç­‰ã€‚</p><h3 id="extra"><a href="#extra" class="headerlink" title="extra"></a>extra</h3><h4 id="analytics"><a href="#analytics" class="headerlink" title="analytics"></a>analytics</h4><p>analyticså‚æ•°ç”¨äºæŒ‡å®šç½‘ç«™åˆ†ææœåŠ¡æä¾›å•†å’Œå±æ€§IDï¼Œä¾‹å¦‚è¡¡é‡ç½‘ç«™æµé‡ã€‚</p><ul><li><a href="https://squidfunk.github.io/mkdocs-material/setup/setting-up-site-analytics/">Setting up site analytics</a></li><li><a href="https://analytics.google.com/analytics/academy/course/6">googleå…è´¹è¯¾ç¨‹</a></li></ul><h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h2><p>See <a href="https://mkdocs.readthedocs.io/en/0.10/user-guide/configuration/">the doc</a>.</p><ol><li>Keep underscore in file name</li></ol><p>refer to: </p><ul><li><a href="https://pypi.org/project/mkdocs-gen-nav-plugin/">https://pypi.org/project/mkdocs-gen-nav-plugin/</a></li><li><a href="https://github.com/mkdocs/mkdocs/issues/2017">https://github.com/mkdocs/mkdocs/issues/2017</a></li><li><a href="https://github.com/squidfunk/mkdocs-material/discussions/5977">https://github.com/squidfunk/mkdocs-material/discussions/5977</a></li><li><a href="https://www.mkdocs.org/user-guide/writing-your-docs/#meta-data">https://www.mkdocs.org/user-guide/writing-your-docs/#meta-data</a></li><li>No help: <a href="https://www.mkdocs.org/user-guide/custom-themes/#pagetitle">https://www.mkdocs.org/user-guide/custom-themes/#pagetitle</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mkdocs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>File System</title>
      <link href="/blog/2024/01/23/linux/File-System/"/>
      <url>/blog/2024/01/23/linux/File-System/</url>
      
        <content type="html"><![CDATA[<h2 id="æ–‡ä»¶ç¤ºä¾‹"><a href="#æ–‡ä»¶ç¤ºä¾‹" class="headerlink" title="æ–‡ä»¶ç¤ºä¾‹"></a>æ–‡ä»¶ç¤ºä¾‹</h2><ul><li><p><code>/proc</code>: æŸ¥çœ‹æ‰‹å†Œ <code>man proc</code>ã€‚</p></li><li><p><code>/proc/self/exe</code>: æ˜¯æŒ‡å‘å½“å‰è¿›ç¨‹çš„ç¨‹åºæ–‡ä»¶çš„è½¯é“¾æ¥ã€‚</p></li><li><p><code>/proc/&lt;pid&gt;/exe</code>: æ˜¯æŒ‡å‘è¿›ç¨‹<code>&lt;pid&gt;</code>çš„ç¨‹åºæ–‡ä»¶çš„è½¯é“¾æ¥ã€‚</p><p>  <a href="https://docs.oracle.com/cd/E19455-01/805-7228/bkuptasks2-78540/index.html">How to Find File System Names</a></p></li><li><p><code>/proc/[pid]/status</code>ï¼šå¯æŸ¥çœ‹è¿›ç¨‹çš„å†…å­˜ä½¿ç”¨å³°å€¼ç­‰ä¿¡æ¯ï¼Œå…³é”®å­—ä¸ºâ€VmHWMâ€ã€â€VmPeakâ€ã€â€VmRSSâ€ã€‚</p></li><li><p><code>/proc/[pid]/stat</code>ï¼šget current memory</p></li><li><p><code>/dev/shm</code>:</p><p>  <a href="https://www.cyberciti.biz/tips/what-is-devshm-and-its-practical-usage.html">What Is &#x2F;dev&#x2F;shm And Its Practical Usage</a></p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">df</span> -h</span><br></pre></td></tr></table></figure><p>  Sample outputs:</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Filesystem            Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/wks01-root</span><br><span class="line">                    444G   70G  351G  17% /</span><br><span class="line">tmpfs                 3.9G     0  3.9G   0% /lib/init/rw</span><br><span class="line">udev                  3.9G  332K  3.9G   1% /dev</span><br><span class="line">tmpfs                 3.9G  168K  3.9G   1% /dev/shm</span><br><span class="line">/dev/sda1             228M   32M  184M  15% /boot</span><br></pre></td></tr></table></figure></li></ul><h2 id="åˆ†åŒº-Partition-å’Œæ–‡ä»¶ç³»ç»Ÿ-Filesystem"><a href="#åˆ†åŒº-Partition-å’Œæ–‡ä»¶ç³»ç»Ÿ-Filesystem" class="headerlink" title="åˆ†åŒº(Partition)å’Œæ–‡ä»¶ç³»ç»Ÿ(Filesystem)"></a>åˆ†åŒº(Partition)å’Œæ–‡ä»¶ç³»ç»Ÿ(Filesystem)</h2><p>æœ¬å°èŠ‚å†…å®¹æ¥è‡ª <a href="https://www.linuxfordevices.com/tutorials/linux/partitions-and-filesystems">å‚è€ƒé“¾æ¥</a> ã€‚</p><h3 id="åˆ†åŒºï¼š"><a href="#åˆ†åŒºï¼š" class="headerlink" title="åˆ†åŒºï¼š"></a>åˆ†åŒºï¼š</h3><p>Linuxä¸Šçš„åˆ†åŒºæŒ‡ï¼šå­˜å‚¨è®¾å¤‡ä¸­åˆ’åˆ†å‡ºæ¥çš„ä¸€ä¸ªç‰‡æ®µï¼Œè¯¥ç‰‡æ®µä¸å…¶ä»–ç‰‡æ®µé€»è¾‘ä¸Šåˆ†ç¦»ï¼Œå¥½æ¯”ä¸€ä¸ªä¸ªç‹¬ç«‹çš„æˆ¿é—´ã€‚</p><h3 id="åˆ†åŒºè¡¨-partition-table-ï¼š"><a href="#åˆ†åŒºè¡¨-partition-table-ï¼š" class="headerlink" title="åˆ†åŒºè¡¨(partition table)ï¼š"></a>åˆ†åŒºè¡¨(partition table)ï¼š</h3><p>åˆ†åŒºè¡¨å­˜å‚¨å„ä¸ªåˆ†åŒºçš„å…ƒæ•°æ®ï¼Œæ¯”å¦‚èµ·å§‹ä½ç½®ã€ç»ˆæ­¢ä½ç½®ã€å¤§å°ç­‰ã€‚<br>æœ‰ä¸¤ç§ä¸»è¦çš„åˆ†åŒºè¡¨ç±»å‹ï¼ŒMBR(older)å’ŒGPT(newer)ï¼š</p><table><thead><tr><th>Partition tables</th><th>Maximum primary partitions</th><th>Maximum size for each partition</th><th>Security</th><th>Operating system Support</th></tr></thead><tbody><tr><td>Master Boot Record (MBR)</td><td>4</td><td>2TB</td><td>No such security features</td><td>Supports most modern OS</td></tr><tr><td>Guid Partition Table (GPT)</td><td>No such limit</td><td>18 Exabytes</td><td>CRC32 checksum mechanism to verify the integrity of files</td><td>Supports most modern OS</td></tr></tbody></table><p>ä»ä¸Šè¡¨å¯ä»¥å¾ˆæ˜æ˜¾åœ°çœ‹å‡ºï¼Œä¸ºä»€ä¹ˆGPTæ›´æ¨èã€‚</p><h2 id="æ–‡ä»¶ç³»ç»Ÿ"><a href="#æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿ"></a>æ–‡ä»¶ç³»ç»Ÿ</h2><p>æ–‡ä»¶ç³»ç»Ÿæ˜¯æˆ‘ä»¬åœ¨æ¯ä¸ªåˆ†åŒºä¸­ç®¡ç†æ•°æ®çš„æ–¹å¼ã€‚å®ƒè´Ÿè´£ç´¢å¼•ã€å­˜å‚¨ã€æ£€ç´¢ã€å‘½åæ–‡ä»¶å’Œç»´æŠ¤æ–‡ä»¶çš„å…ƒæ•°æ®ï¼ˆæ–‡ä»¶æ‰€æœ‰è€…ã€å¤§å°ã€æƒé™ç­‰ï¼‰ã€‚å­˜å‚¨åœ¨åˆ†åŒºä¸­ã€‚</p><p>ä¸€ä¸ªæ–‡ä»¶ä¿å­˜åœ¨å¤šä¸ªè¿ç»­çš„ <strong>æ‰‡åŒºï¼ˆsectorï¼‰</strong> ä¸­ï¼Œç°ä»£æ¯ä¸ªæ‰‡åŒºå¤§çº¦ä¸º4096å­—èŠ‚ã€‚<br>æ–‡ä»¶ç³»ç»Ÿè´Ÿè´£ç»„ç»‡å“ªäº›æ‰‡åŒºå‡†å¤‡å¥½ä½¿ç”¨äº†ã€ä¸€ä¸ªæ–‡ä»¶å¿…é¡»å­˜å‚¨åœ¨å“ªä¸ªæ‰‡åŒºã€å“ªä¸ªæ‰‡åŒºå­˜å‚¨äº†ä»€ä¹ˆæ–‡ä»¶ã€‚<br>å¦‚æœæ²¡æœ‰è¿™ç§ç»„ç»‡ï¼Œå°±æ— æ³•æ— æ³•æ£€ç´¢ä»»ä½•æ–‡ä»¶ï¼Œå› ä¸ºç³»ç»Ÿæ— æ³•å¾—çŸ¥æ–‡ä»¶çš„ä½ç½®ï¼ˆblockï¼Œå—ï¼‰ã€‚</p><p>ä¸»è¦çš„æ–‡ä»¶ç³»ç»Ÿåˆ†ç±»ï¼š</p><ul><li>FAT</li></ul><p>æ–‡ä»¶åˆ†é…è¡¨ï¼ˆFATï¼ŒFile Allocation Tableï¼‰æ˜¯Microsoftå¼€å‘çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚<br>ä»1997å‘å¸ƒä¹‹åï¼Œæœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œç§°ä¸ºFAT12ã€FAT16ã€FAT32ï¼Œè¿ç»­åœ°å¢åŠ äº†æœ€å¤§æ”¯æŒæ–‡ä»¶å¤§å°ï¼ˆfile sizeï¼‰å’Œé©±åŠ¨å™¨å¤§å°ï¼ˆdrive sizeï¼‰ã€‚</p><p>FAT32å…è®¸çš„æœ€å¤§æ–‡ä»¶å¤§å°ä¸º4Gbã€‚ç›´è‡³WindowsXPï¼ŒFAT32æ˜¯é»˜è®¤çš„æ–‡ä»¶ç³»ç»Ÿï¼Œä¹‹åè¢«NTFSå–ä»£ã€‚<br>è™½ç„¶FATéå¸¸åŸºç¡€ï¼Œä½†æ˜¯å®ƒæ”¯æŒå‡ ä¹æ‰€æœ‰çš„è®¾å¤‡å’Œæ“ä½œç³»ç»Ÿã€‚</p><p><strong>æ³¨ï¼š</strong> é©±åŠ¨å™¨ï¼ˆ<a href="https://www.computerhope.com/jargon/d/drive.htm">drive</a>ï¼‰ï¼Œæ˜¯ä¸€ä¸ªèƒ½å­˜å‚¨å’Œè¯»å–éæ˜“å¤±ä¿¡æ¯çš„ä½ç½®ï¼Œæ¯”å¦‚ç£ç›˜ï¼ˆdiskï¼‰æˆ–å…‰ç›˜ï¼ˆdiscï¼‰ã€‚</p><p>å¦‚ä¸‹å›¾ï¼Œé©±åŠ¨å™¨A:æ˜¯ä¸€ä¸ªè½¯ç›˜ï¼ˆ<a href="https://www.computerhope.com/jargon/f/fdd.htm">floppy drive</a>ï¼‰ï¼Œ<br>é©±åŠ¨å™¨C:æ˜¯ä¸»ç¡¬ç›˜ï¼ˆprimary hard drivceï¼‰ï¼Œ<br>é©±åŠ¨å™¨D:å’ŒE:æ˜¯åˆ†åŒºï¼ŒF:æ˜¯<a href="https://www.computerhope.com/jargon/c/cdrom.htm">CD-ROM</a>ã€‚<br>CD-ROMå¸¸å¸¸æ˜¯æœ€åä¸€ä¸ªç›˜ç¬¦ï¼ˆdrive letterï¼‰ã€‚<br>åœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œç¡¬ç›˜æ˜¯C:é©±åŠ¨å™¨ï¼ŒCD-ROMæˆ–å…¶ä»–å…‰ç›˜æ˜¯D:é©±åŠ¨å™¨ã€‚</p><p><img src="/blog/my-compu-drive.webp" alt="é©±åŠ¨å™¨ç¤ºä¾‹" title="é©±åŠ¨å™¨ç¤ºä¾‹å›¾"></p><ul><li>NTFS</li></ul><p>æ–°æŠ€æœ¯æ–‡ä»¶ç³»ç»Ÿï¼ˆNew Technology File Systemï¼ŒNTFSï¼‰æ˜¯FATçš„ç°ä»£æ›¿ä»£è€…ã€‚<br>é™¤äº†æ”¯æŒé«˜è¾¾16EBï¼ˆå¤§äº170äº¿GBï¼‰çš„é©±åŠ¨å™¨å¤§å°å’Œ256TBçš„å•æ–‡ä»¶å¤§å°å¤–ï¼Œè¿˜æ”¯æŒæ—¥å¿—ç³»ç»Ÿï¼ˆ<a href="https://en.wikipedia.org/wiki/Journaling_file_system">journaling system</a>ï¼‰ã€‚</p><ul><li>ext&#x2F;ext2&#x2F;ext3&#x2F;ext4</li></ul><p>Linuxçš„æ‰©å±•æ–‡ä»¶ç³»ç»Ÿï¼ˆextended file systemï¼‰æˆ–extäº1992å¹´å‘å¸ƒã€‚ä¹‹åæœ‰äº†3æ¬¡æ›´æ–°ï¼š</p><p>ext2å¼•å…¥äº†æ–‡ä»¶å±æ€§ï¼ˆæ–‡ä»¶æƒé™ï¼‰ï¼Œext3å¼•å…¥äº†æ—¥å¿—åŠŸèƒ½ï¼ˆ<a href="https://en.wikipedia.org/wiki/Journaling_file_system">journaling</a>ï¼‰ã€‚</p><p>ext4å¯¹ext2å’Œext3å‘åå…¼å®¹ï¼Œå¢åŠ äº†å­˜å‚¨é™åˆ¶å’Œä¸€äº›æ€§èƒ½è°ƒæ•´ã€‚<br>å¯ä»¥æ”¯æŒé«˜è¾¾1EBçš„å·ï¼ˆvolumnï¼‰ï¼Œå•ä¸ªæ–‡ä»¶å¯ä»¥è¾¾16TBã€‚</p><p>ext4ä¹Ÿå¼•å…¥äº†å»¶è¿Ÿå†…å­˜åˆ†é…çš„æ¦‚å¿µï¼Œå³åœ¨æ–‡ä»¶è¢«å¼ºåˆ¶åˆ·æ–°åˆ°å­˜å‚¨è®¾å¤‡æ—¶æ‰ä¸ºå…¶åˆ†é…æ‰‡åŒºã€‚<br>è¿™æé«˜äº†CPUçš„æ€§èƒ½å¹¶å‡å°‘äº†åçš„æ‰‡åŒºã€‚<br>ä»Šå¤©å‡ ä¹æ‰€æœ‰çš„ç°ä»£Linuxå‘è¡Œç‰ˆéƒ½ä½¿ç”¨ext4ä½œä¸ºé»˜è®¤çš„æ–‡ä»¶ç³»ç»Ÿã€‚</p><ul><li><p>ZFS</p></li><li><p>Btrfs</p></li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ä¸‹å›¾æ˜¯ä¸€ä¸ªåˆ†åŒºå’Œæ–‡ä»¶ç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„ç¤ºä¾‹ï¼š</p><p><img src="/blog/Example-of-partition-and-filesystem1-768x340.png.webp" alt="åˆ†åŒºå’Œæ–‡ä»¶ç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„ç¤ºä¾‹å›¾" title="åˆ†åŒºå’Œæ–‡ä»¶ç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„ç¤ºä¾‹å›¾"></p><p>æˆ‘æœ‰ä¸€ä¸ª500GBçš„SSDï¼Œåˆ†æˆ3ä¸ªåˆ†åŒºï¼ˆbootã€homeã€rootï¼‰ï¼Œä½¿ç”¨GPTä½œä¸ºåˆ†åŒºè¡¨ã€‚</p><p>æˆ‘æ²¡æœ‰åˆ†å‡ºswapåˆ†åŒºã€‚æ‰€æœ‰çš„åˆ†åŒºéƒ½è·‘åœ¨ext4æ–‡ä»¶ç³»ç»Ÿä¸Šã€‚</p><p>åœ¨ä¸€ä¸ªåŒå¯åŠ¨ï¼ˆdual-bootedï¼‰å­˜å‚¨è®¾å¤‡ï¼ˆWindowså’ŒLinuxï¼‰ä¸Šï¼Œè¿˜æœ‰å‡ ä¸ªé€‚ç”¨äºWindwowsçš„NTFSåˆ†åŒºã€‚</p><p>ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨ä»»æ„å­˜å‚¨è®¾å¤‡ä¸ŠæŸ¥çœ‹åˆ†åŒºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsblk</span><br></pre></td></tr></table></figure><p>æ›´å¤šèµ„æºè¯·è®¿é—®ï¼š</p><ul><li><a href="https://www.linuxfordevices.com/tutorials/ubuntu/install-zfs-on-ubuntu">How to install ZFS on Ubuntu â€“ A Setup and Usage Guide</a></li><li><a href="https://www.linuxfordevices.com/tutorials/linux/ext4-vs-btrfs-filesystem">Ext4 vs Btrfs Filesystems â€“ Which one should you choose?</a></li><li><a href="https://www.linuxfordevices.com/tutorials/linux/btrfs-on-ubuntu">How to install and format a partition with the Btrfs on Ubuntu?</a></li><li><a href="https://ext4.wiki.kernel.org/index.php/Frequently_Asked_Questions">Frequently Asked Questions regarding ext4</a></li></ul><h2 id="æŒ‚è½½"><a href="#æŒ‚è½½" class="headerlink" title="æŒ‚è½½"></a>æŒ‚è½½</h2><p>æŒ‚è½½ï¼šä½¿è®¾å¤‡ä¸Šçš„æ–‡ä»¶å’Œç›®å½•å¯ä»¥é€šè¿‡æ–‡ä»¶ç³»ç»Ÿè®¿é—®çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚è§<a href="https://zh.wikipedia.org/zh-cn/%E6%8C%82%E8%BD%BD">ç»´åŸºç™¾ç§‘</a>ã€‚</p><p>æŒ‚è½½ç‚¹ï¼šA mount point is a location in the partition used as a root filesystem.</p><h2 id="é©±åŠ¨"><a href="#é©±åŠ¨" class="headerlink" title="é©±åŠ¨"></a>é©±åŠ¨</h2><h2 id="ç›¸å…³å‘½ä»¤ä¸€è§ˆè¡¨"><a href="#ç›¸å…³å‘½ä»¤ä¸€è§ˆè¡¨" class="headerlink" title="ç›¸å…³å‘½ä»¤ä¸€è§ˆè¡¨"></a>ç›¸å…³å‘½ä»¤ä¸€è§ˆè¡¨</h2><p>lsblk</p><pre><code>lsblk [options] [device...]list all avaivable or specified block devices.Reads the sysfs filesystem to gather information.</code></pre><p>df</p><pre><code>df [OPTION]... [FILE]...report file system disk space usage on which each FILE resides.df -T æ‰“å°æ–‡ä»¶ç³»ç»Ÿçš„ç±»å‹ã€‚</code></pre><p>du</p><pre><code>du [OPTION]... [FILE]...estimate file space usage.</code></pre><p>quota</p><pre><code>quota -s -u user...display users&#39; disk usage and limits.quota reports the quotas of all the filesystems listed in /etc/mtab.For filesystems that are NFS-mounted a call to the rpc.rquotad on the server machine is performed to get the information.-s, --human-readable</code></pre><p>repquota</p><pre><code>prints a summary of disc usage and quotas for the specified file system.</code></pre><p>mount</p><p>lsof - list open files</p><pre><code>https://unix.stackexchange.com/questions/11238/how-to-get-over-device-or-resource-busy</code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> filesystem </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Introducation to RPC</title>
      <link href="/blog/2024/01/21/net/RPC/"/>
      <url>/blog/2024/01/21/net/RPC/</url>
      
        <content type="html"><![CDATA[<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><ul><li><a href="https://www.ibm.com/docs/ssw_ibm_i_72/rzahp/rzahppdf.pdf">libtirpc(Transport Independent RPC)</a></li><li></li></ul>]]></content>
      
      
      <categories>
          
          <category> Network </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RPC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dead Lock</title>
      <link href="/blog/2024/01/15/thread/Dead-Lock/"/>
      <url>/blog/2024/01/15/thread/Dead-Lock/</url>
      
        <content type="html"><![CDATA[<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://cloud.tencent.com/developer/article/1161103">å…³äºçº¿ç¨‹æ­»é”ï¼Œæ´»é”å’Œé¥¥é¥¿é—®é¢˜</a></p>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> thread </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reentrant Function</title>
      <link href="/blog/2024/01/14/misc/Reentrant-Function/"/>
      <url>/blog/2024/01/14/misc/Reentrant-Function/</url>
      
        <content type="html"><![CDATA[<h2 id="Concept"><a href="#Concept" class="headerlink" title="Concept"></a>Concept</h2><p><strong>å¯é‡å…¥å‡½æ•°</strong>ï¼šå¦‚æœä¸€ä¸ªå‡½æ•°åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¢«ä¸­æ–­æœåŠ¡ç¨‹åºæ‰“æ–­ï¼Œæ‰§è¡Œä¸­æ–­æœåŠ¡ç¨‹åºä¹‹åæ¢å¤æ‰§è¡Œï¼Œè¿˜èƒ½ä¸å¦¨ç¢ä¹‹å‰çš„æ‰§è¡Œï¼Œå°±ç§°è¯¥å‡½æ•°æ˜¯<strong>å¯é‡å…¥çš„</strong>ã€‚</p><p>å¯é‡å…¥å‡½æ•°ä¸€èˆ¬ç”¨äº<strong>ç¡¬ä»¶ä¸­æ–­å¤„ç†</strong>æˆ–<strong>é€’å½’</strong>ç­‰åº”ç”¨ç¨‹åºä¸­ã€‚</p><p><strong>å¯é‡å…¥ç¨‹åº&#x2F;å¯é‡å…¥å­ä¾‹ç¨‹</strong>ï¼šåœ¨å¤šä¸ªå¤„ç†å™¨ä¸Šèƒ½è¢«å®‰å…¨åœ°å¤šæ¬¡å¹¶å‘è°ƒç”¨ã€‚</p><p><strong>ä¸çº¿ç¨‹å®‰å…¨çš„åŒºåˆ«</strong>ï¼šå¯é‡å…¥å‡½æ•°çš„æ¦‚å¿µåœ¨å¤šä»»åŠ¡æ“ä½œç³»ç»Ÿå‡ºç°ä¹‹å‰å°±å­˜åœ¨äº†ï¼Œæ‰€ä»¥è¯¥æ¦‚å¿µä»…ä»…é’ˆå¯¹çš„æ˜¯å•çº¿ç¨‹æ‰§è¡Œè¿‡ç¨‹ã€‚<br>ä¸€ä¸ªå‡½æ•°å¯ä»¥æ˜¯çº¿ç¨‹å®‰å…¨ä½†éå¯é‡å…¥çš„ï¼Œä¾‹å¦‚ï¼Œè¯¥å‡½æ•°æ¯æ¬¡éƒ½ä½¿ç”¨äº’æ–¥é‡æ¥åŒ…è£¹ã€‚ä½†æ˜¯ï¼Œå¦‚æœè¯¥å‡½æ•°ç”¨äºä¸­æ–­æœåŠ¡ç¨‹åºï¼Œé‚£ä¹ˆï¼Œå®ƒå¯èƒ½åœ¨ç­‰å¾…ç¬¬ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹é‡Šæ”¾äº’æ–¥é‡æ—¶é™·å…¥é¥¥é¥¿ã€‚<strong>TODOï¼šé™·å…¥é¥¥é¥¿ä¸ºä»€ä¹ˆå°±ä¸æ˜¯å¯é‡å…¥äº†ï¼Ÿ</strong></p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a href="https://www.geeksforgeeks.org/reentrant-function/">Reentrant Function</a></li><li><a href="https://en.wikipedia.org/wiki/Reentrancy_(computing)">Reentrancy</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> concepts </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Network discovery</title>
      <link href="/blog/2024/01/09/net/Network-Discovery/"/>
      <url>/blog/2024/01/09/net/Network-Discovery/</url>
      
        <content type="html"><![CDATA[<h2 id="Get-IP-from-the-host-name"><a href="#Get-IP-from-the-host-name" class="headerlink" title="Get IP from the host name"></a>Get IP from the host name</h2><p>Key function: <code>getaddrinfo</code>.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _POSIX_C_SOURCE 200112L</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;netdb.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;strings.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">addrinfo</span> hints;</span><br><span class="line">    <span class="built_in">bzero</span>(&amp;hints, <span class="keyword">sizeof</span> hints);</span><br><span class="line">    <span class="comment">// hints.ai_family = AF_INET;</span></span><br><span class="line">    hints.ai_socktype = SOCK_STREAM;</span><br><span class="line">    hints.ai_protocol = IPPROTO_TCP;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">addrinfo</span> *res = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// The following 3 hostnames are legal.</span></span><br><span class="line">    <span class="type">int</span> rc = <span class="built_in">getaddrinfo</span>(<span class="string">&quot;www.baidu.com&quot;</span>, <span class="literal">NULL</span>, &amp;hints, &amp;res);</span><br><span class="line">    <span class="comment">// int rc = getaddrinfo(&quot;localhost&quot;, NULL, &amp;hints, &amp;res);</span></span><br><span class="line">    <span class="comment">// int rc = getaddrinfo(&quot;PC-XXX&quot;, NULL, &amp;hints, &amp;res); // PC-XXX is a hostname</span></span><br><span class="line">    <span class="keyword">if</span> (rc != <span class="number">0</span>)</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;getaddrinfo failed&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">struct</span> addrinfo* res_i = res; res_i != <span class="literal">NULL</span>; res_i = res_i-&gt;ai_next) &#123;</span><br><span class="line">        <span class="keyword">if</span> (res_i-&gt;ai_addr) &#123;</span><br><span class="line">            <span class="keyword">if</span> (res_i-&gt;ai_addr-&gt;sa_family == AF_INET) &#123;</span><br><span class="line">                <span class="type">char</span> ip4[INET_ADDRSTRLEN];</span><br><span class="line">                <span class="built_in">inet_ntop</span>(AF_INET, &amp;(((<span class="keyword">struct</span> sockaddr_in*)(res_i-&gt;ai_addr))-&gt;sin_addr), ip4, INET_ADDRSTRLEN);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;IP: %s\n&quot;</span>, ip4);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">char</span> ip6[INET6_ADDRSTRLEN];</span><br><span class="line">                <span class="built_in">inet_ntop</span>(AF_INET6, &amp;(((<span class="keyword">struct</span> sockaddr_in6*)(res_i-&gt;ai_addr))-&gt;sin6_addr), ip6, INET_ADDRSTRLEN);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;IP: %s\n&quot;</span>, ip6);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Network </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tcp/ip </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Preprocessing</title>
      <link href="/blog/2024/01/07/cplusplus/preprocessing/"/>
      <url>/blog/2024/01/07/cplusplus/preprocessing/</url>
      
        <content type="html"><![CDATA[<h2 id="é¢„å®šä¹‰å®"><a href="#é¢„å®šä¹‰å®" class="headerlink" title="é¢„å®šä¹‰å®"></a>é¢„å®šä¹‰å®</h2><p><code>#if defined(__linux)</code><br><code>#ifdef LINUX2</code></p><h2 id="Cæ ‡å‡†é¢„å®šä¹‰å®"><a href="#Cæ ‡å‡†é¢„å®šä¹‰å®" class="headerlink" title="Cæ ‡å‡†é¢„å®šä¹‰å®"></a>Cæ ‡å‡†é¢„å®šä¹‰å®</h2><ul><li><code>__LINE__</code></li><li><code>__func__</code></li><li><code>__FILE__</code></li><li><code>NDEBUG</code>ï¼šå‚è€ƒ<a href="https://stackoverflow.com/questions/2290509/debug-vs-ndebug">_DEBUGå’ŒNDEBUGçš„åŒºåˆ«</a>ï¼Œå…¶ä¸­ï¼Œ<code>_DEBUG</code>æ˜¯Visual Studioå®šä¹‰çš„ï¼Œ<code>NDEBUG</code>æ˜¯C&#x2F;C++æ ‡å‡†ã€‚</li></ul><h2 id="GNU-Cé¢„å®šä¹‰å®"><a href="#GNU-Cé¢„å®šä¹‰å®" class="headerlink" title="GNU Cé¢„å®šä¹‰å®"></a>GNU Cé¢„å®šä¹‰å®</h2><p><a href="https://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html">å®˜æ–¹æ–‡æ¡£</a></p><ul><li><p><code>__COUNTER__</code>: æ‰©å±•ä¸ºä»<code>0</code>å¼€å§‹çš„è¿ç»­æ•´æ•°å€¼ï¼Œæ¯æ¬¡åœ¨æºç ä¸­å‡ºç°ï¼Œåˆ™åŠ <code>1</code>ã€‚ä¸åŒæºæ–‡ä»¶çš„<code>__COUNTER__</code>äº’ä¸å½±å“ã€‚</p><p>å¯ä»¥ç”¨æ¥ç”Ÿæˆå”¯ä¸€çš„å‘½åã€‚<br>å‚è€ƒ<a href="https://stackoverflow.com/questions/652815/has-anyone-ever-had-a-use-for-the-counter-pre-processor-macro">é“¾æ¥</a>ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> CONCAT_IMPL(x,y) x##y</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CONCAT(x,y) CONCAT_IMPL(x,y)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> VAR(name) CONCAT(name,__COUNTER__)</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">VAR</span><span class="params">(myvar)</span></span>; <span class="comment">// å±•å¼€ä¸º int myvar0;</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">VAR</span><span class="params">(myvar)</span></span>; <span class="comment">// å±•å¼€ä¸º int myvar1;</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">VAR</span><span class="params">(myvar)</span></span>; <span class="comment">// å±•å¼€ä¸º int myvar2;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>program_invocation_name</code>ï¼šå‚è€ƒ<a href="https://man7.org/linux/man-pages/man3/program_invocation_name.3.html">man page</a></p></li><li></li></ul><h2 id="pragma"><a href="#pragma" class="headerlink" title="#pragma"></a>#pragma</h2><h3 id="pragma-weak"><a href="#pragma-weak" class="headerlink" title="#pragma weak"></a>#pragma weak</h3><h4 id="Synopsis"><a href="#Synopsis" class="headerlink" title="Synopsis"></a>Synopsis</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> weak function-name1 [= function-name2]</span></span><br></pre></td></tr></table></figure><p><code>#pragma weak</code> means that even if the definition of the symbol is not found, no error will be reported.</p><h4 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// It is not an error for symbol to never be defined at all.</span></span><br><span class="line"><span class="comment">// Without this line, the address of &quot;foo&quot; will always evaluate to &quot;true&quot;,</span></span><br><span class="line"><span class="comment">// so the linker will report an &quot;undefined reference to &#x27;foo&#x27;&quot; error.</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> weak foo</span></span><br><span class="line"><span class="comment">// The declaration is needed.</span></span><br><span class="line"><span class="comment">/* extern */</span> <span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (foo)</span><br><span class="line">        <span class="built_in">foo</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Reference: <a href="https://alberand.com/weak-directive.html">1</a>ã€<a href="https://gcc.gnu.org/onlinedocs/gcc-4.5.4/gcc/Weak-Pragmas.html">2</a>ã€<a href="https://docs.oracle.com/cd/E19059-01/wrkshp50/805-4955/auto6/index.html">3</a></p>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> syntax </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Set up your personal site</title>
      <link href="/blog/2024/01/03/personal_site/Personal-Site/"/>
      <url>/blog/2024/01/03/personal_site/Personal-Site/</url>
      
        <content type="html"><![CDATA[<h2 id="Host-site"><a href="#Host-site" class="headerlink" title="Host site"></a>Host site</h2><p>æœ‰ä¸¤ä¸ªæ‰˜ç®¡ä¸ªäººç«™ç‚¹çš„ç½‘ç«™ï¼š<code>Github pages</code>å’Œ<code>reathedocs</code>.</p><h3 id="Github-Pages"><a href="#Github-Pages" class="headerlink" title="Github Pages"></a>Github Pages</h3><p>ä½¿ç”¨<a href="https://docs.github.com/en/pages">github pages</a>å¯ä»¥æ­å»ºä¸ªäººä¸»é¡µã€‚</p><p>github pagesç®€ä»‹ï¼š<a href="https://docs.github.com/en/pages/getting-started-with-github-pages/about-github-pages">å®˜æ–¹é“¾æ¥</a>ã€‚</p><p>github pagesä½¿ç”¨äº†<a href="https://en.wikipedia.org/wiki/CNAME_record">CNAME record</a>æŠ€æœ¯ï¼Œå‚è€ƒï¼š<a href="https://www.zhihu.com/question/39301250">é“¾æ¥1</a>ã€<a href="https://www.zhihu.com/question/26609475">é“¾æ¥2</a>ã€<a href="https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages#using-a-subdomain-for-your-github-pages-site">Custom domains in Github Pages</a>ã€‚</p><p>æ³¨ï¼š<a href="https://readthedocs.org/">Read the Docs</a>ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ­å»ºä¸ªäººä¸»é¡µçš„ç½‘ç«™ã€‚</p><h4 id="Github-Pages-ç«™ç‚¹ç±»å‹"><a href="#Github-Pages-ç«™ç‚¹ç±»å‹" class="headerlink" title="Github Pages ç«™ç‚¹ç±»å‹"></a>Github Pages ç«™ç‚¹ç±»å‹</h4><p>æœ‰3ç§ç±»å‹çš„ Github Pages ç«™ç‚¹ï¼ˆsitesï¼‰ï¼šproject, user å’Œ organization ã€‚</p><p>Project sites è¿æ¥åˆ° github ä¸Šç‰¹å®š project ï¼Œæ¯”å¦‚ Javascript library æˆ– recipe collectionã€‚user æˆ– organization sites è¿æ¥åˆ° github.com çš„ç‰¹å®šè´¦æˆ·ã€‚</p><p>å‘å¸ƒ user site ï¼Œä½ å¿…é¡»åˆ›å»ºä¸€ä¸ªä½ çš„ä¸ªäººè´¦æˆ·ä¸‹çš„ä¸€ä¸ªåä¸º <code>&lt;username&gt;.github.io</code> çš„ repository ã€‚å‘å¸ƒ organization site ï¼Œä½ å¿…é¡»åˆ›å»ºä¸€ä¸ªç»„ç»‡æ‰€æœ‰çš„åä¸º <code>&lt;organization&gt;.github.io</code> çš„ repository ã€‚é™¤éä½ ä½¿ç”¨ custom domain ï¼Œå¦åˆ™ user å’Œ organization sites å°†ä½äº <code>http(s)://&lt;username&gt;.github.io</code> æˆ– <code>http(s)://&lt;organization&gt;.github.io</code> ã€‚</p><p>project site çš„æºæ–‡ä»¶å­˜å‚¨åœ¨ä½œä¸º project çš„ç›¸åŒçš„ repository ä¸­ã€‚é™¤éä½¿ç”¨ custom domain ï¼Œ å¦åˆ™ project sites å°†ä½äº <code>http(s)://&lt;username&gt;.github.io/&lt;repository&gt;</code> æˆ– <code>http(s)://&lt;organization&gt;.github.io/&lt;repository&gt;</code> ã€‚</p><p>æœ‰å…³å¦‚ä½•è‡ªå®šä¹‰å½±å“æ‚¨ç½‘ç«™çš„åŸŸåçš„æ›´å¤šä¿¡æ¯ï¼Œå‚è§â€<a href="https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages">About custom domains and GitHub Pages</a>â€œã€‚</p><p>æ¯ä¸ª github è´¦æˆ·å…è®¸åˆ›å»º 1 ä¸ª user æˆ– organization ç«™ç‚¹ã€‚æ— è®ºæ˜¯è¢«ç»„ç»‡è¿˜æ˜¯ä¸ªäººæ‰€æœ‰ï¼Œproject ç«™ç‚¹çš„ä¸ªæ•°ä¸é™åˆ¶ã€‚</p><h4 id="GitHub-Pages-è®¿é—®æ–¹æ³•"><a href="#GitHub-Pages-è®¿é—®æ–¹æ³•" class="headerlink" title="GitHub Pages è®¿é—®æ–¹æ³•"></a>GitHub Pages è®¿é—®æ–¹æ³•</h4><p>å‚è€ƒ<a href="https://docs.github.com/en/pages/getting-started-with-github-pages/creating-a-github-pages-site#next-steps">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><p>ä¾‹å¦‚ï¼Œä½ çš„projectç«™ç‚¹é…ç½®çš„å‘å¸ƒæºæ˜¯<code>gh-pages</code>åˆ†æ”¯ï¼Œç„¶ååœ¨<code>gh-pages</code>åˆ†æ”¯ä¸Šåˆ›å»ºäº†ä¸€ä¸ª<code>about/contact-us.md</code>æ–‡ä»¶ï¼Œä½ å°†å¯ä»¥åœ¨<code>https://&lt;user&gt;.github.io/&lt;repository&gt;/about/contact-us.html</code>è®¿é—®å®ƒã€‚</p><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨<code>Jekyll</code>ç­‰é™æ€ç«™ç‚¹ç”Ÿæˆå™¨æ¥ç»™ä½ çš„github pageé…ç½®ä¸€ä¸ªä¸»é¢˜ã€‚</p><h4 id="ç«™ç‚¹å‘å¸ƒå¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ³•"><a href="#ç«™ç‚¹å‘å¸ƒå¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ³•" class="headerlink" title="ç«™ç‚¹å‘å¸ƒå¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ³•"></a>ç«™ç‚¹å‘å¸ƒå¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ³•</h4><ul><li><a href="https://stackoverflow.com/questions/72851548/permission-denied-to-github-actionsbot">Permission denied to github-actions[bot]</a></li></ul><h4 id="Github-workflows"><a href="#Github-workflows" class="headerlink" title="Github workflows"></a>Github workflows</h4><p>å‚è€ƒ<a href="https://docs.github.com/zh/actions/using-workflows/workflow-syntax-for-github-actions">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><h4 id="Githubä¸ªäººè®¿é—®ä»¤ç‰Œ"><a href="#Githubä¸ªäººè®¿é—®ä»¤ç‰Œ" class="headerlink" title="Githubä¸ªäººè®¿é—®ä»¤ç‰Œ"></a>Githubä¸ªäººè®¿é—®ä»¤ç‰Œ</h4><p><a href="https://docs.github.com/zh/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens">Githubä¸ªäººè®¿é—®ä»¤ç‰Œ</a></p><h3 id="readthedocs"><a href="#readthedocs" class="headerlink" title="readthedocs"></a>readthedocs</h3><p>Similar to the github pages.</p><p><a href="https://docs.readthedocs.io/en/stable/tutorial/">Tutorial</a></p><h2 id="é…ç½®å‰å‡†å¤‡"><a href="#é…ç½®å‰å‡†å¤‡" class="headerlink" title="é…ç½®å‰å‡†å¤‡"></a>é…ç½®å‰å‡†å¤‡</h2><h3 id="Markdownç¼–è¾‘å™¨"><a href="#Markdownç¼–è¾‘å™¨" class="headerlink" title="Markdownç¼–è¾‘å™¨"></a>Markdownç¼–è¾‘å™¨</h3><p>æ¨èçš„<a href="https://www.zhihu.com/tardis/zm/art/103348449?source_id=1003">markdownç¼–è¾‘å™¨</a>ï¼š</p><ul><li>VSCodeï¼šå…è´¹ã€‚VSCodeåŸç”Ÿæ”¯æŒMarkdownï¼Œå®‰è£…ä¸€äº›æ’ä»¶å¯ä»¥å¸®åŠ©æ›´å¿«åœ°ç¼–å†™markdownæ–‡ä»¶ã€‚</li><li>Typoraï¼šç°åœ¨å·²ç»å¼€å§‹æ”¶è´¹ã€‚</li></ul><p>VSCode markdownæ’ä»¶ï¼š</p><ul><li>Mardown All in One: æä¾›å¿«æ·é”®ï¼Œå¸®åŠ©æ›´å¿«çš„ç¼–å†™markdownæ–‡ä»¶ã€‚</li><li>Markdown+Mathï¼šæä¾›æ•°å­¦å…¬å¼æ”¯æŒã€‚</li><li>Markdown Preview Enhanced: å°†åŸç”Ÿmarkdowné¢„è§ˆçš„é»‘è‰²èƒŒæ™¯æ”¹æˆç™½è‰²ã€‚</li><li>Markdown Preview Github Stylingï¼šæä¾›Githubé£æ ¼çš„é¢„è§ˆã€‚</li></ul><p><a href="https://www.tablesgenerator.com/markdown_tables">åœ¨çº¿è¡¨æ ¼ç”Ÿæˆå™¨</a>ï¼šå¯ä»¥ç”ŸæˆMarkdownã€Textã€HTMLã€LaTexã€MediaWikiæ ¼å¼çš„è¡¨æ ¼ã€‚</p><h3 id="è½»é‡çº§è™šæ‹ŸæœºWSL"><a href="#è½»é‡çº§è™šæ‹ŸæœºWSL" class="headerlink" title="è½»é‡çº§è™šæ‹ŸæœºWSL"></a>è½»é‡çº§è™šæ‹ŸæœºWSL</h3><p>WSLï¼Œ<a href="https://learn.microsoft.com/en-us/windows/wsl/install">Windows Subsystem for Linux</a>ï¼Œæ˜¯Windowsæä¾›çš„è½»é‡çº§Linuxè™šæ‹Ÿæœºã€‚</p><p>å®‰è£…æ•™ç¨‹ï¼šè§<a href="https://zhuanlan.zhihu.com/p/170210673">é“¾æ¥</a>ã€‚</p><h4 id="WSLé»˜è®¤æ²¡æœ‰å¯ç”¨systemctlï¼š"><a href="#WSLé»˜è®¤æ²¡æœ‰å¯ç”¨systemctlï¼š" class="headerlink" title="WSLé»˜è®¤æ²¡æœ‰å¯ç”¨systemctlï¼š"></a>WSLé»˜è®¤æ²¡æœ‰å¯ç”¨systemctlï¼š</h4><p>å¯ç”¨systemctlçš„æ–¹æ³•ï¼š<a href="https://askubuntu.com/questions/1379425/system-has-not-been-booted-with-systemd-as-init-system-pid-1-cant-operate">é“¾æ¥</a>ã€‚</p><p>æ›¿ä»£æ–¹æ³•ï¼šä¸éœ€è¦å¯åŠ¨systemctlï¼Œå› ä¸ºä¼šæ¯”è¾ƒå ç”¨èµ„æºï¼Œå¯åŠ¨ä¹Ÿä¼šå˜æ…¢ã€‚å¯ä»¥ä½¿ç”¨serviceå‘½ä»¤æ›¿ä»£ã€‚</p><h4 id="WSLé»˜è®¤æ²¡æœ‰å®‰è£…openssl-serverï¼š"><a href="#WSLé»˜è®¤æ²¡æœ‰å®‰è£…openssl-serverï¼š" class="headerlink" title="WSLé»˜è®¤æ²¡æœ‰å®‰è£…openssl-serverï¼š"></a>WSLé»˜è®¤æ²¡æœ‰å®‰è£…openssl-serverï¼š</h4><p>ä½¿ç”¨sshè¿æ¥åˆ°æœåŠ¡å™¨æ—¶ï¼Œéœ€è¦æœåŠ¡å™¨è¿è¡Œç€sshdç¨‹åºï¼Œå¦åˆ™è¿æ¥ä¸ä¸Šï¼Œä¼šå‡ºç°â€<a href="https://www.makeuseof.com/fix-ssh-connection-refused-error-linux/">Connection refused</a>â€œé”™è¯¯ã€‚</p><p>å‚è€ƒ<a href="https://askubuntu.com/questions/1339980/enable-ssh-in-wsl-system">é“¾æ¥</a>ã€‚</p><p>æŸ¥çœ‹openssh-serveræœ‰æ²¡æœ‰å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg --list | grep ssh</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šå¦‚æœå®‰è£…äº†openssh-serverï¼Œæ‰§è¡Œwhich sshdå¯ä»¥çœ‹åˆ°è·¯å¾„ã€‚</p><p>WSLé»˜è®¤æ²¡æœ‰å®‰è£…openssh-serverï¼Œå®‰è£…æ–¹æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install openssh-server</span><br></pre></td></tr></table></figure><p>å¯åŠ¨sshï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service ssh start</span><br></pre></td></tr></table></figure><h4 id="é€šè¿‡httpsç™»å½•åˆ°github"><a href="#é€šè¿‡httpsç™»å½•åˆ°github" class="headerlink" title="é€šè¿‡httpsç™»å½•åˆ°github"></a>é€šè¿‡httpsç™»å½•åˆ°github</h4><p><code>git push</code>ä¸å†æ”¯æŒè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œå½“æç¤ºè¾“å…¥å¯†ç æ—¶ï¼Œéœ€è¦è¾“å…¥personal access token.</p><p>æ­¥éª¤1ï¼šåœ¨githubä¸Š<a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-personal-access-token-classic">åˆ›å»ºpersonal access token</a>ï¼›</p><p>æ­¥éª¤2ï¼š<a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#using-a-personal-access-token-on-the-command-line">åœ¨å‘½ä»¤è¡Œä¸Šä½¿ç”¨personal access token</a>ï¼›</p><p>æ­¥éª¤3ï¼šä¸ºäº†é¿å…æ¯æ¬¡éƒ½éœ€è¦è¾“å…¥personal access tokenï¼Œå¯ä»¥å°†å…¶<a href="https://docs.github.com/en/get-started/getting-started-with-git/caching-your-github-credentials-in-git">ç¼“å­˜åœ¨git clientä¸Š</a>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gh auth login</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šä½¿ç”¨<code>gh</code>å‘½ä»¤éœ€è¦å…ˆå®‰è£…GitHub CLIï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install gh</span><br></pre></td></tr></table></figure><h3 id="WSLå¸¸è§é—®é¢˜"><a href="#WSLå¸¸è§é—®é¢˜" class="headerlink" title="WSLå¸¸è§é—®é¢˜"></a>WSLå¸¸è§é—®é¢˜</h3><ul><li><a href="https://stackoverflow.com/questions/73673804/npm-show-npm-elf-not-found-error-in-wsl">npm show â€œNPM ELF : not found errorâ€ in WSL</a></li><li><a href="https://www.reddit.com/r/bashonubuntuonwindows/comments/8teo9i/is_there_a_way_to_open_a_file_in_a_browser_from/">WSLæ‰“å¼€htmlçš„æ–¹æ³•</a></li></ul><p>åœ¨WSLçš„Linuxä¸‹ï¼Œåœ¨.bashrcä¸­åŠ å…¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">browser</span></span>() &#123;</span><br><span class="line">    explorer.exe $(wslpath -w $(<span class="built_in">realpath</span> <span class="variable">$1</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">export</span> -f browser</span><br></pre></td></tr></table></figure><p>æ‰“å¼€htmlï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">browser index.html</span><br></pre></td></tr></table></figure><h2 id="é™æ€ç«™ç‚¹ç”Ÿæˆå™¨"><a href="#é™æ€ç«™ç‚¹ç”Ÿæˆå™¨" class="headerlink" title="é™æ€ç«™ç‚¹ç”Ÿæˆå™¨"></a>é™æ€ç«™ç‚¹ç”Ÿæˆå™¨</h2><p>ä»¥ä¸‹å‡ ç§<a href="https://docs.github.com/en/pages/getting-started-with-github-pages/about-github-pages">é™æ€ç«™ç‚¹ç”Ÿæˆå™¨</a>éƒ½å¯ä»¥ç”¨æ¥æ­å»ºä¸ªäººä¸»é¡µã€‚å¦‚æœä½¿ç”¨é™¤JekyIIå¤–çš„å·¥å…·ï¼Œåˆ™éœ€è¦é…ç½®<a href="https://docs.github.com/en/actions/learn-github-actions/understanding-github-actions">Github Actions</a>ä»¥æ„å»ºå’Œå‘å¸ƒä½ çš„ç«™ç‚¹ã€‚</p><h3 id="mkdocs"><a href="#mkdocs" class="headerlink" title="mkdocs"></a>mkdocs</h3><p><a href="https://www.mkdocs.org/">mkdocs</a>æ˜¯ä¸€ä¸ªå¿«é€Ÿçš„é™æ€ç½‘é¡µç”Ÿæˆå™¨ã€‚</p><p><code>mkdocs.yml</code> æ–‡ä»¶æ˜¯ MkDocs æ–‡æ¡£ç”Ÿæˆå™¨çš„é…ç½®æ–‡ä»¶ï¼Œå…¶æ ¼å¼è¯´æ˜å‚è§<a href="mkdocs.yml.md">è¿™é‡Œ</a>ã€‚</p><h3 id="JekyII"><a href="#JekyII" class="headerlink" title="JekyII"></a>JekyII</h3><p>Jekyll æ˜¯ä¸€ä¸ªé™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼Œå†…ç½®å¯¹ GitHub Pages çš„æ”¯æŒå’Œç®€åŒ–çš„æ„å»ºè¿›ç¨‹ã€‚</p><p>å‚è§ <a href="https://docs.github.com/en/pages/setting-up-a-github-pages-site-with-jekyll/about-github-pages-and-jekyll">About GitHub Pages and Jekyll</a> ã€‚</p><h3 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h3><ul><li><a href="https://hexo.io/docs/">Hexoåšå®¢æ¡†æ¶</a></li><li><a href="https://hexo.io/zh-cn/docs/">Hexoä¸­æ–‡æ–‡æ¡£</a></li><li><a href="https://malekbenz.com/blog/2016/09/10/Create-Host-Blog-for-free-with-Hexo-Github">Create and host your blog for free with hexo &amp; Github</a></li></ul><h3 id="Sphinx"><a href="#Sphinx" class="headerlink" title="Sphinx"></a>Sphinx</h3><p><a href="https://www.sphinx-doc.org/en/master/usage/installation.html">Install Sphinx</a><br><a href="https://sphinx-intro-tutorial.readthedocs.io/en/latest/docs_hosting.html">Hosting the documentation</a></p><h3 id="python"><a href="#python" class="headerlink" title="python"></a>python</h3><p>pythonå»ºç«‹ä¸ªäººç«™ç‚¹</p><pre><code>python -m http.server</code></pre><h2 id="Syntax"><a href="#Syntax" class="headerlink" title="Syntax"></a>Syntax</h2><h3 id="Markdown"><a href="#Markdown" class="headerlink" title="Markdown"></a>Markdown</h3><ul><li><a href="https://daringfireball.net/projects/markdown">Markdown Documentation</a></li><li><a href="https://squidfunk.github.io/mkdocs-material/reference/diagrams/">Diagrams Reference</a></li></ul><h3 id="reStructuredText"><a href="#reStructuredText" class="headerlink" title="reStructuredText"></a>reStructuredText</h3><p><code>.rst</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> site </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown Syntax</title>
      <link href="/blog/2024/01/03/personal_site/Markdown-Syntax/"/>
      <url>/blog/2024/01/03/personal_site/Markdown-Syntax/</url>
      
        <content type="html"><![CDATA[<h2 id="Mermaid"><a href="#Mermaid" class="headerlink" title="Mermaid"></a>Mermaid</h2><p><a href="https://mermaid.js.org/syntax/flowchart.html">Flowchart</a></p><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><h3 id="è½¬ä¹‰åå¼•å·"><a href="#è½¬ä¹‰åå¼•å·" class="headerlink" title="è½¬ä¹‰åå¼•å·"></a>è½¬ä¹‰åå¼•å·</h3><p>å‚è€ƒ<a href="https://www.growingwiththeweb.com/2015/06/escaping-backtick-in-markdown.html">é“¾æ¥</a>ã€‚</p><ol><li>åœ¨code blockä¹‹å¤–ï¼Œä½¿ç”¨â€&quot;è½¬ä¹‰å³å¯ï¼š</li></ol><pre>\`</pre><ol start="2"><li>ç”¨å°†åå¼•å·æ”¾å…¥åŒåå¼•å·ä¸­ï¼Œå³</li></ol><pre>`` ` ``</pre><ol start="3"><li>åœ¨ä»£ç å—å¼€å§‹å‰ç¼©è¿›4ä¸ªç©ºæ ¼ï¼Œå³</li></ol><pre>    `</pre><ol start="4"><li>ä½¿ç”¨fencedä»£ç å—ï¼š</li></ol><pre>```<br>`<br>```</pre><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul><li><a href="https://www.jetbrains.com/help/hub/markdown-syntax.html">JetBrains: Markdown Syntax</a></li><li><a href="https://www.markdownguide.org/extended-syntax/">Markdown Guide: Extended Syntax</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Book List</title>
      <link href="/blog/2024/01/01/misc/Book-List/"/>
      <url>/blog/2024/01/01/misc/Book-List/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¨èä¹¦ç±"><a href="#æ¨èä¹¦ç±" class="headerlink" title="æ¨èä¹¦ç±"></a>æ¨èä¹¦ç±</h2><ol><li>å¤šäººåœ¨çº¿æ¸¸æˆæ¶æ„å®æˆ˜ï¼šåŸºäºC++çš„åˆ†å¸ƒå¼æ¸¸æˆç¼–ç¨‹&#x2F;å½­æ”¾ç¼–è‘—. â€“åŒ—äº¬ï¼šæœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾ï¼Œ2020.11 ï¼ˆISBN 978-7-111-66792-6ï¼‰</li></ol>]]></content>
      
      
      <categories>
          
          <category> Misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> book </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>npm</title>
      <link href="/blog/2023/12/29/personal_site/npm/"/>
      <url>/blog/2023/12/29/personal_site/npm/</url>
      
        <content type="html"><![CDATA[<h2 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h2><p><code>npm root</code> - Current installation root path.<br><code>npm root -g</code> - The global installation root path.<br><code>npm uninstall</code> - After executing this command, you should also remove the items in the <code>package.json</code> file and delete the <code>package-lock.json</code> file and the <code>node_modules</code> directory.</p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://stackoverflow.com/questions/5926672/where-does-npm-install-packages">Where does npm install packages?</a><br><a href="https://stackoverflow.com/questions/66978786/cannot-uninstall-two-npm-packages">Cannot Uninstall two npm Packages</a></p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> npm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Network Inspection Tools</title>
      <link href="/blog/2023/12/29/net/Network-Inspection-Tools/"/>
      <url>/blog/2023/12/29/net/Network-Inspection-Tools/</url>
      
        <content type="html"><![CDATA[<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><pre><code>sudo apt install net-tools</code></pre><h2 id="Manual"><a href="#Manual" class="headerlink" title="Manual"></a>Manual</h2><pre><code>man 7 socket - socket optionsman 7 tcp - tcp options</code></pre><h2 id="Files"><a href="#Files" class="headerlink" title="Files"></a>Files</h2><pre><code>/proc/sys/net/ipv4/ip_local_port_range</code></pre><h2 id="Commands"><a href="#Commands" class="headerlink" title="Commands"></a>Commands</h2><h3 id="ip"><a href="#ip" class="headerlink" title="ip"></a>ip</h3><p>NAME</p><pre><code>ip - show / manipulate routing, devices, policy routing and tunnels.</code></pre><h3 id="netstat-ss"><a href="#netstat-ss" class="headerlink" title="netstat &#x2F; ss"></a>netstat &#x2F; ss</h3><p>NAME</p><pre><code>ss - another to investigate sockets.</code></pre><p>Reference</p><p><a href="https://zhuanlan.zhihu.com/p/45920111">æŸ¥çœ‹è¿›ç¨‹å ç”¨çš„ç«¯å£</a></p><p>COMMANDS</p><pre><code>ss -lnpt</code></pre><p>OPTIONS</p><pre><code>-n, --numberic-l, --listening-t, --tcp    Note: Only established (non-listening) connections.-a, --all    Display both listening and non-linstening (for TCP this means established connections) sockets.-u, --udp-p, --process</code></pre><h3 id="lsof"><a href="#lsof" class="headerlink" title="lsof"></a>lsof</h3><p>Options:</p><pre><code>-n inhibits the conversion of network numbers to host names for network files.-P inhibits the conversion of port numbers to port names for network files.-i specifies the Internet addresses    multiple addresses (up to a limit of 100) may be specified with multiple options.    An Internet address is specified in the form (Items in square brackets are optional.):    [46][protocol][@hostname|hostaddr][:service|port]    where:    46 specifies the IP version, IPv4 or IPv6        that applies to the following address.        &#39;6&#39; may be be specified only if the UNIX        dialect supports IPv6.  If neither &#39;4&#39; nor        &#39;6&#39; is specified, the following address        applies to all IP versions.    protocol is a protocol name - TCP, UDP    hostname is an Internet host name.  Unless a        specific IP version is specified, open        network files associated with host names        of all versions will be selected.    hostaddr is a numeric Internet IPv4 address in        dot form; or an IPv6 numeric address in        colon form, enclosed in brackets, if the        UNIX dialect supports IPv6.  When an IP        version is selected, only its numeric        addresses may be specified.    service is an /etc/services name - e.g., smtp -        or a list of them.    port is a port number, or a list of them.-s list file size-s p:s  exclude(^)|select protocol (p = TCP|UDP) states by name(s).</code></pre><p>Examples:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lsof -i:&lt;port&gt;</span><br><span class="line">lsof -i -P -n | grep LISTEN</span><br><span class="line">lsof -nP -iTCP -sTCP:LISTEN</span><br></pre></td></tr></table></figure><h3 id="nc-netcat-nmap"><a href="#nc-netcat-nmap" class="headerlink" title="nc&#x2F;netcat&#x2F;nmap"></a>nc&#x2F;netcat&#x2F;nmap</h3><h3 id="socket"><a href="#socket" class="headerlink" title="socket"></a>socket</h3><p>Create a TCP or a UNIX domain socket and connect to stdin&#x2F;out.</p><p>Installation:</p><pre><code>sudo apt-get install socket</code></pre>]]></content>
      
      
      <categories>
          
          <category> Network </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tcp/ip </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Written in Blood</title>
      <link href="/blog/2023/12/23/english/Written-in-Blood/"/>
      <url>/blog/2023/12/23/english/Written-in-Blood/</url>
      
        <content type="html"><![CDATA[<h2 id="ç”µå½±é“¾æ¥"><a href="#ç”µå½±é“¾æ¥" class="headerlink" title="ç”µå½±é“¾æ¥"></a>ç”µå½±é“¾æ¥</h2><p><a href="https://tubitv.com/tv-shows/520415/s01-e02-written-in-blood">Midsomer Murdersï¼š Season 1 Episode 2 - Written in Blood</a></p><h2 id="å°è¯"><a href="#å°è¯" class="headerlink" title="å°è¯"></a>å°è¯</h2><p>Phoenix turned and fired twice, the 34 millimetre bullets spitting through the air and splintering the brickwork two inches to the left of the Russia thugâ€™s shoulder. A moment later came the reply of the Uzi semiautomatic and Phoenix twisted round. è²å°¼å…‹æ–¯è½¬èº«å¼€äº†ä¸¤æªï¼Œ34æ¯«ç±³çš„å­å¼¹åœ¨ç©ºä¸­å–·å°„ï¼Œå°†ä¿„ç½—æ–¯æš´å¾’è‚©è†€å·¦ä¾§ä¸¤è‹±å¯¸ç –å¢™å‡»ç¢ã€‚è¿‡ä¸€ä¼šå„¿ï¼Œä¹Œå…¹åŠè‡ªåŠ¨å†²é”‹æªå›åº”äº†ï¼Œè²å°¼å…‹æ–¯æ‰­è¿‡èº«æ¥ã€‚</p><p>Her lips, searching in the sapphire, honeyscented darkness, found his; cool, forceful, unresisting, and as the frozen waves crashed down. å½“å†°å†·ã€æœ‰åŠ›ã€ä¸å¯æŠ—æ‹’çš„æµªæ±¹æ¶Œè€Œä¸‹çš„æ—¶å€™ï¼Œå¥¹çš„å˜´å”‡åœ¨è“å®çŸ³èˆ¬æ•£å‘ç€èœœé¦™çš„å¤œè‰²ä¸­å¯»æ‰¾ï¼Œæ‰¾åˆ°äº†ä»–çš„å˜´å”‡ã€‚</p><p>-Got your meeting, have you? ä½ è¦å»å¼€ä¼šï¼Œå¯¹å—ï¼Ÿ<br>-Yes, Iâ€™m on my way. æ˜¯çš„ï¼Œæˆ‘æ­£åœ¨å»ã€‚</p><p>He pulled her towards him, his powerful, masculine hands tearing at the silk faric of her Gaultier nightshirt.</p><p>The repetitive beat of the innercity drum.</p><p>1887, Sebastian Lyddiard, greatgrandson of Herbert Lyddiard, who served under Sir John Jervis against Napoleon. å¯¹æŠ—æ‹¿ç ´ä»‘ã€‚</p><p>The Right Honourable William Lyddiard. å¨å»‰Â·åˆ©è¿ªäºšå¾·é˜ä¸‹ã€‚</p><p>-Do you ever regret marrying hime, Amy? I wonder if you ever think that but for you he might still be alive? ä½ åæ‚”å«ç»™ä»–å—ï¼ŒåŸƒç±³ï¼Ÿæˆ‘ä¸çŸ¥é“ä½ æ˜¯å¦æƒ³è¿‡ï¼Œå¦‚æœä¸æ˜¯å› ä¸ºä½ ï¼Œä»–å¯èƒ½ç°åœ¨è¿˜æ´»ç€ï¼Ÿ<br>-(Amy) No. æ²¡æœ‰æƒ³è¿‡ã€‚<br>-Well I do. æˆ‘æƒ³è¿‡ã€‚</p><p>-So we come to the question of which writer we invite to address us? æ‰€ä»¥æˆ‘ä»¬æ‰“ç®—è¯·å“ªä½ä½œå®¶æ¥ç»™æˆ‘ä»¬åšæ¼”è®²å‘¢ï¼Ÿ<br>-How about Jilly Cooper?<br>-I think he said a writer.<br>-Do you think we could interest Frederick Forsythe?<br>-I rather doubt it.<br>-Oh, itâ€™s a wonderful idea, Gerald. Especially since youâ€™re writing a thriller. I think Frederick Forsythe would be first rate! æˆ‘è®¤ä¸ºFrederick Forsytheæ˜¯ç¬¬ä¸€æµçš„ã€‚<br>-Heâ€™d never come. Heâ€™d just pretend he didnâ€™t have time. They always do.<br>-Iâ€™d like Seamus Heaney.<br>-The poet?<br>-Not another poet. That last one was such a ghastly little man.</p><h2 id="è¯æ±‡"><a href="#è¯æ±‡" class="headerlink" title="è¯æ±‡"></a>è¯æ±‡</h2><p>screenplay by å‰§æœ¬ç”±â€¦â€¦å†™æˆ<br>millimetre æ¯«ç±³<br>phoenix å‡¤å‡°ï¼Œè¿™é‡Œæ˜¯äººåï¼Œè²å°¼å…‹æ–¯<br>spit åï¼Œå”¾<br>thug æ¶æ£ï¼Œæš´å¾’<br>twist æ‰­ï¼Œæ‹§ï¼Œæ»<br>brickwork ç –ç Œä½“ï¼Œç –å¢™<br>splinter n. ç¢ç‰‡ï¼Œå¼¹ç‰‡ï¼› v. ç¢è£‚ã€‚<br>Uzi semiautomatic ä¹Œå…¹åŠè‡ªåŠ¨å†²é”‹æªï¼ˆ<a href="https://en.wikipedia.org/wiki/Uzi">Uzi</a> submachine gunï¼‰ã€‚Uzi å†²é”‹æªæ˜¯ç”±ä»¥è‰²åˆ—å›½é˜²å†› (IDF) ä¸Šå°‰ï¼ˆåæ¥çš„å°‘æ ¡ï¼‰Uziel Gal åœ¨ 1948 å¹´é˜¿ä»¥æˆ˜äº‰åè®¾è®¡çš„ã€‚<br>sapphire è“å®çŸ³<br>honey èœ‚èœœï¼Œèœœ<br>scent é¦™å‘³ï¼ˆa pleasant natural smellï¼‰ï¼›scented æ•£å‘é¦™å‘³çš„<br>resist æŠ—æ‹’çš„ï¼›unresisted ä¸å¯æŠ—æ‹’çš„ã€‚<br>masculine ç”·æ€§çš„ã€‚<br>tear æ’•ï¼Œæ’•ç ´ï¼Œæ’•æ¯ï¼›æ‹†ï¼›æ³ªæ°´ã€‚<br>nightshirt ç¡è¡£<br>scum æµ®æ¸£<br>scum-bag æ¸£å­è¢‹ï¼Œè¿™é‡Œåº”è¯¥æ˜¯â€œæ¸£ç”·â€ã€â€œäººæ¸£â€çš„æ„æ€ï¼Œéª‚äººçš„è¯ã€‚<br>hum å“¼å£°<br>greatgrandson æ›¾å­™<br>Sir çˆµå£«<br>Napoleon æ‹¿ç ´ä»‘<br>The Right Honourable <a href="https://en.wikipedia.org/wiki/The_Right_Honourable">é˜ä¸‹</a>ã€‚å…¶ä¸­ï¼ŒRightæ˜¯å‰¯è¯ï¼Œæ„æ€æ˜¯â€™veryâ€™ or â€˜fullyâ€™ã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒThe Right Honourable æ˜¯å½¢å®¹çŸ­è¯­ï¼Œç›´æ¥ç”¨æ¥ç§°å‘¼äººåæˆ–è€…æŸäººç”¨æ¥è‡ªç§°éƒ½æ˜¯ä¸æ­£ç¡®çš„ï¼Œåº”è¯¥ä¸å…¶å¼•ç”¨çš„åç§°æˆ–åç§°ä¸€èµ·ä½¿ç”¨ç¬¬ä¸‰äººç§°ã€‚<br>address æ¼”è®²<br>first rate ç¬¬ä¸€æµ<br>pretend å‡è£…<br>ghastly US:&#x2F;ËˆÉ¡Ã¦st.li&#x2F; UK:&#x2F;ËˆÉ¡É‘Ëst.li&#x2F; é˜´æ£®çš„ï¼Œå¯æ€•çš„ï¼Œéå¸¸åçš„<br>bestseller ç•…é”€ä¹¦</p>]]></content>
      
      
      <categories>
          
          <category> English </category>
          
      </categories>
      
      
        <tags>
            
            <tag> movie </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cmake usage</title>
      <link href="/blog/2023/12/07/cplusplus/cmake-usage/"/>
      <url>/blog/2023/12/07/cplusplus/cmake-usage/</url>
      
        <content type="html"><![CDATA[<p>Specify the search path for <code>pkg_check_modules</code>: <a href="https://stackoverflow.com/questions/44487053/set-pkg-config-path-in-cmake">Solution</a></p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(ENV&#123;PKG_CONFIG_PATH&#125; <span class="string">&quot;$&#123;CMAKE_SOURCE_DIR&#125;/libs/opencv-install/lib/pkgconfig&quot;</span>)</span><br></pre></td></tr></table></figure><p><a href="https://zhuanlan.zhihu.com/p/97369704">find_package</a></p>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> build </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo Documentation</title>
      <link href="/blog/2023/12/07/personal_site/Hexo-Documentation/"/>
      <url>/blog/2023/12/07/personal_site/Hexo-Documentation/</url>
      
        <content type="html"><![CDATA[<h2 id="hexoä¿®æ”¹é»˜è®¤ç«¯å£å·"><a href="#hexoä¿®æ”¹é»˜è®¤ç«¯å£å·" class="headerlink" title="hexoä¿®æ”¹é»˜è®¤ç«¯å£å·"></a>hexoä¿®æ”¹é»˜è®¤ç«¯å£å·</h2><p>å‚è€ƒ<a href="https://www.jianshu.com/p/8398621502fd">åšå®¢</a></p><h2 id="æ·»åŠ ç›®å½•"><a href="#æ·»åŠ ç›®å½•" class="headerlink" title="æ·»åŠ ç›®å½•"></a>æ·»åŠ ç›®å½•</h2><p><a href="https://blog.ligos.net/2016-07-25/Writing-Content-On-Hexo.html">https://blog.ligos.net/2016-07-25/Writing-Content-On-Hexo.html</a><br><a href="https://medium.com/employbl/create-a-custom-blog-theme-with-hexo-js-b24c82eb9271#.viurzqeac">https://medium.com/employbl/create-a-custom-blog-theme-with-hexo-js-b24c82eb9271#.viurzqeac</a><br><a href="https://hexo.io/docs/themes">https://hexo.io/docs/themes</a><br><a href="https://hexo.io/docs/templates">https://hexo.io/docs/templates</a><br><a href="https://hexo.io/docs/helpers">https://hexo.io/docs/helpers</a></p><h2 id="Add-pages"><a href="#Add-pages" class="headerlink" title="Add pages"></a>Add pages</h2><p>Commands</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The following command generate a &#x27;categories/index.md&#x27; file</span></span><br><span class="line">hexo new page categories</span><br><span class="line"></span><br><span class="line">hexo new page tags</span><br><span class="line">hexo new page about</span><br></pre></td></tr></table></figure><p>Refers to <a href="https://stackoverflow.com/questions/60759559/hexo-next-theme-categories-and-tags-page">Hexo NeXT Theme categories and tags page</a></p><h2 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h2><p><a href="https://blog.csdn.net/wugenqiang/article/details/88377669">Display PDF</a></p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Getting Started with IB</title>
      <link href="/blog/2023/12/06/net/IB/"/>
      <url>/blog/2023/12/06/net/IB/</url>
      
        <content type="html"><![CDATA[<h2 id="æ–‡æ¡£"><a href="#æ–‡æ¡£" class="headerlink" title="æ–‡æ¡£"></a>æ–‡æ¡£</h2><p><a href="https://citeseerx.ist.psu.edu/viewdoc/download;jsessionid=346D319BA2A9F06B8C49B2C0AAFD28D9?doi=10.1.1.668.4459&rep=rep1&type=pdf">Documentation: RDMA Aware Networks Programming User Manual v1.6</a></p><p><a href="/blog/documents/RDMA-Aware-Networks-Programming.pdf">Local Documentation</a></p><p><a href="https://docs.oracle.com/cd/E19671-01/835-0793-03/z40000419112.html#scrolltoc">Sun Network QDR InfiniBand Gateway Switch Topic Set</a></p><p><a href="https://www.zhihu.com/column/c_1231181516811390976">RDMAçŸ¥ä¹ä¸“æ </a></p><p>ç”¨æˆ·æ€çš„Verbs APIæ‰‹å†Œè·Ÿä»£ç åœ¨ä¸€ä¸ªä»“åº“ç»´æŠ¤ï¼Œæ‰‹å†Œåœ°å€ï¼š<a href="https://github.com/linux-rdma/rdma-core/tree/master/libibverbs/man">https://github.com/linux-rdma/rdma-core/tree/master/libibverbs/man</a></p><p>æœ‰å¾ˆå¤šåœ¨çº¿çš„man pageç½‘ç«™å¯ä»¥æŸ¥é˜…è¿™äº›æ¥å£çš„è¯´æ˜ï¼Œæ¯”å¦‚å®˜æ–¹çš„è¿æ¥ï¼š<a href="https://man7.org/linux/man-pages/man3/ibv_post_send.3.html">https://man7.org/linux/man-pages/man3/ibv_post_send.3.html</a></p><p>ä¹Ÿæœ‰ä¸€äº›å…¶ä»–éå®˜æ–¹ç½‘é¡µï¼Œæ”¯æŒåœ¨çº¿æœç´¢ï¼š<a href="https://linux.die.net/man/3/ibv">https://linux.die.net/man/3/ibv</a></p><p>æŸ¥é˜…ç³»ç»Ÿman page<br>å¦‚æœä½ ä½¿ç”¨çš„å•†ç”¨OSå®‰è£…äº†rdma-coreæˆ–è€…libibverbsåº“ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥ç”¨manå‘½ä»¤æŸ¥è¯¢æ¥å£ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man ibv_post_send</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢Mellanoxçš„ç¼–ç¨‹æ‰‹å†Œ<br>ã€Š<a href="https://docs.nvidia.com/networking/display/rdmaawareprogrammingv17">RDMA Aware Networks Programming User Manual Rev 1.7</a>ã€‹ï¼Œæœ€æ–°ç‰ˆæ˜¯2015å¹´æ›´æ–°çš„ã€‚è¯¥æ‰‹å†Œå†™çš„æ¯”è¾ƒè¯¦å°½ï¼Œå¹¶ä¸”é™„æœ‰ç¤ºä¾‹ç¨‹åºï¼Œä½†æ˜¯å¯èƒ½ä¸æœ€æ–°çš„æ¥å£æœ‰ä¸€äº›å·®å¼‚ã€‚Mellanox VPIÂ®ï¼ˆVirtual Procotol Interconnectï¼‰æ¶æ„ä¸ºåŒæ—¶æ”¯æŒInfiniBandå’Œä»¥å¤ªç½‘è¯­ä¹‰çš„ç½‘ç»œé€‚é…å™¨å’Œäº¤æ¢æœºæä¾›é«˜æ€§èƒ½ã€ä½å»¶è¿Ÿå’Œå¯é çš„æ–¹æ³•ã€‚</p><p>Book: <a href="https://github.com/faquir-1990/itBooks/blob/master/Linux%20Kernel%20Networking%20-%20Implementation%20and%20Theory.pdf">Linux Kernel Networking - Implementation and Theory</a></p><p><a href="http://www.rdmamojo.com/">Dotanâ€™s blog</a>: Dotan Barak, an InfiniBand Expert. Dotan is a Senior Software Manager at Mellanox Technologies working on RDMA Technologies.</p><h2 id="æ€§èƒ½åˆ†æå·¥å…·ï¼ˆprofilingï¼‰"><a href="#æ€§èƒ½åˆ†æå·¥å…·ï¼ˆprofilingï¼‰" class="headerlink" title="æ€§èƒ½åˆ†æå·¥å…·ï¼ˆprofilingï¼‰"></a>æ€§èƒ½åˆ†æå·¥å…·ï¼ˆprofilingï¼‰</h2><p>Blog: <a href="https://www.rdmamojo.com/2013/06/08/tips-and-tricks-to-optimize-your-rdma-code/">Tips and tricks to optimize your RDMA code</a></p><p><a href="https://github.com/mellanox-hpc/libibprof">libibprof</a></p><h2 id="IBç®€ä»‹"><a href="#IBç®€ä»‹" class="headerlink" title="IBç®€ä»‹"></a>IBç®€ä»‹</h2><p>RDMA - Remote Direct Memory Access è¿œç¨‹ç›´æ¥å†…å­˜å­˜å–ã€‚</p><p>InfiniBandæ˜¯ä¸€ç§é«˜æ€§èƒ½è®¡ç®—æœºç½‘ç»œé€šä¿¡æ ‡å‡†ï¼Œå®ƒå…·æœ‰æé«˜çš„ååé‡å’Œæä½çš„å»¶è¿Ÿã€‚å¦‚æœæ‚¨éœ€è¦ä½¿ç”¨InfiniBandè¿›è¡Œç¼–ç¨‹ï¼Œæ‚¨éœ€è¦ä½¿ç”¨æ”¯æŒInfiniBandçš„ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚C++ï¼‰æ¥ç¼–å†™ä»£ç ã€‚</p><p>æœºæ„å’Œç»„ç»‡ï¼š</p><p>OFA: <a href="https://www.openfabrics.org/">Open Fabrics Alliance</a>.</p><p>IBTA: <a href="https://www.infinibandta.org/">InfiniBand Trade Association</a>.</p><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><ul><li><code>CQ</code> - Complete Queue å®Œæˆé˜Ÿåˆ—</li><li><code>WQ</code> - Work Queue å·¥ä½œé˜Ÿåˆ—</li><li><code>WR</code> - Work Request å·¥ä½œè¯·æ±‚</li><li><code>QP</code> - Queue Pairs é˜Ÿåˆ—å¯¹ï¼ˆSend-Receiveï¼‰</li><li><code>SQ</code> - Send Queue å‘é€é˜Ÿåˆ—</li><li><code>RQ</code> - Receive Queue æ¥æ”¶é˜Ÿåˆ—</li><li><code>PD</code> - Protection Domain ä¿æŠ¤åŸŸï¼Œå°†QPå’ŒMRç»“åˆåœ¨ä¸€èµ·</li><li><code>MR</code> - Memory Region å†…å­˜åŒºåŸŸã€‚ä¸€å—ç»æ³¨å†Œè¿‡çš„ä¸”æœ¬åœ°ç½‘å¡å¯ä»¥è¯»å†™çš„å†…å­˜åŒºåŸŸã€‚åŒ…å«R_Keyå’ŒL_Keyã€‚</li><li><code>SGE</code> - Scatter&#x2F;Gather Elements åˆ†æ•£&#x2F;èšé›†å…ƒç´ ã€‚</li><li><code>R_Key</code> - Remote Key</li><li><code>L_Key</code> - Local Key</li><li><code>CA</code> - (Host) Channel Adapter, an inifiniband network interface card.</li><li><code>NIC</code> - Network Interface Card ç½‘å¡ã€‚</li><li><code>LID</code> - Local Identifier.</li><li><code>CM</code> - Connection Manager.</li></ul><p>å…¶ä»–å¸¸è§ç¼©å†™ï¼š</p><ul><li><code>RC</code> - reliable connected.</li><li><code>SCSI</code> - Small Computer System Interface å°å‹è®¡ç®—æœºç³»ç»Ÿæ¥å£ã€‚</li><li><code>SRP</code> - SCSI RDMA Protocol. &#x2F; Secure Remote Password.</li></ul><p>åšå®¢ï¼š<a href="https://blog.51cto.com/liangchaoxi/4044818">https://blog.51cto.com/liangchaoxi/4044818</a></p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p><a href="https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/7/html/networking_guide/sec-infiniband_and_rdma_related_software_packages">InfiniBand å’Œ RDMA ç›¸å…³è½¯ä»¶åŒ…</a></p><pre><code>sudo apt-get install infiniband-diagssudo apt install ibverbs-utils</code></pre><h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><ul><li><a href="https://insujang.github.io/2020-02-09/introduction-to-programming-infiniband/">introduction to programming infiniband</a></li><li><a href="https://indico.cern.ch/event/218156/attachments/351725/490089/RDMA_Aware_Programming_user_manual.pdf">RDMA Aware Programming user manual (PDF)</a></li></ul><p>ä»¥ä¸‹æ˜¯ä¸€äº›æ”¯æŒInfiniBandçš„C++åº“ï¼š</p><p>Infinityï¼šè¿™æ˜¯ä¸€ä¸ªè½»é‡çº§çš„C++ RDMAåº“ï¼Œç”¨äºInfiniBandç½‘ç»œã€‚å®ƒæä¾›äº†å¯¹ä¸¤ä¾§ï¼ˆå‘é€&#x2F;æ¥æ”¶ï¼‰å’Œå•ä¾§ï¼ˆè¯»&#x2F;å†™&#x2F;åŸå­ï¼‰æ“ä½œçš„æ”¯æŒï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªç®€å•è€Œå¼ºå¤§çš„é¢å‘å¯¹è±¡çš„ibVerbsæŠ½è±¡ã€‚è¯¥åº“ä½¿ç”¨æˆ·èƒ½å¤Ÿæ„å»ºä½¿ç”¨RDMAçš„å¤æ‚åº”ç”¨ç¨‹åºï¼Œè€Œä¸ä¼šå½±å“æ€§èƒ½<a href="https://github.com/claudebarthels/infinity">1</a>ã€‚</p><p>OFEDï¼šè¿™æ˜¯ä¸€ä¸ªå¼€æ”¾å¼Fabrics Enterprise Distributionï¼Œå®ƒæä¾›äº†å¯¹InfiniBandå’ŒRoCEï¼ˆRDMA over Converged Ethernetï¼‰æŠ€æœ¯çš„æ”¯æŒã€‚OFEDæä¾›äº†ä¸€ç»„ç”¨æˆ·ç©ºé—´åº“å’Œé©±åŠ¨ç¨‹åºï¼Œå¯ç”¨äºæ„å»ºæ”¯æŒRDMAçš„åº”ç”¨ç¨‹åº<a href="https://zhuanlan.zhihu.com/p/337461037">2</a>ã€‚</p><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨Infinityåº“ç¼–å†™æ”¯æŒInfiniBandçš„C++ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºæ–°ä¸Šä¸‹æ–‡</span></span><br><span class="line">infinity::core::Context *context = <span class="keyword">new</span> infinity::core::<span class="built_in">Context</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºé˜Ÿåˆ—å¯¹</span></span><br><span class="line">infinity::queues::QueuePairFactory *qpFactory = <span class="keyword">new</span> infinity::queues::<span class="built_in">QueuePairFactory</span>(context);</span><br><span class="line">infinity::queues::QueuePair *qp = qpFactory-&gt;<span class="built_in">connectToRemoteHost</span>(SERVER_IP, PORT_NUMBER);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå¹¶å‘ç½‘ç»œæ³¨å†Œç¼“å†²åŒº</span></span><br><span class="line">infinity::memory::Buffer *localBuffer = <span class="keyword">new</span> infinity::memory::<span class="built_in">Buffer</span>(context, BUFFER_SIZE);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»è¿œç¨‹ç¼“å†²åŒºè¯»å–ï¼ˆå•å‘ï¼‰å¹¶ç­‰å¾…å®Œæˆ</span></span><br><span class="line">infinity::memory::RegionToken *remoteBufferToken = <span class="keyword">new</span> infinity::memory::<span class="built_in">RegionToken</span>(REMOTE_BUFFER_INFO);</span><br><span class="line">infinity::<span class="function">requests::RequestToken <span class="title">requestToken</span><span class="params">(context)</span></span>;</span><br><span class="line">qp-&gt;<span class="built_in">read</span>(localBuffer, remoteBufferToken, &amp;requestToken);</span><br><span class="line">requestToken.<span class="built_in">waitUntilCompleted</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†æœ¬åœ°ç¼“å†²åŒºçš„å†…å®¹å†™å…¥è¿œç¨‹ç¼“å†²åŒºï¼ˆå•å‘ï¼‰å¹¶ç­‰å¾…å®Œæˆ</span></span><br><span class="line">qp-&gt;<span class="built_in">write</span>(localBuffer, remoteBufferToken, &amp;requestToken);</span><br><span class="line">requestToken.<span class="built_in">waitUntilCompleted</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†æœ¬åœ°ç¼“å†²åŒºçš„å†…å®¹é€šè¿‡é˜Ÿåˆ—å¯¹å‘é€ï¼ˆåŒå‘ï¼‰å¹¶ç­‰å¾…å®Œæˆ</span></span><br><span class="line">qp-&gt;<span class="built_in">send</span>(localBuffer, &amp;requestToken);</span><br><span class="line">requestToken.<span class="built_in">waitUntilCompleted</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…³é—­è¿æ¥</span></span><br><span class="line"><span class="keyword">delete</span> remoteBufferToken;</span><br><span class="line"><span class="keyword">delete</span> localBuffer;</span><br><span class="line"><span class="keyword">delete</span> qp;</span><br><span class="line"><span class="keyword">delete</span> qpFactory;</span><br><span class="line"><span class="keyword">delete</span> context;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨OFEDåº“ç¼–å†™æ”¯æŒInfiniBandçš„C++ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºæ–°ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ibv_context</span> *context = <span class="built_in">ibv_open_device</span>(*device);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå®Œæˆç«¯å£</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ibv_pd</span> *pd = <span class="built_in">ibv_alloc_pd</span>(context);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºé˜Ÿåˆ—å¯¹</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ibv_qp_init_attr</span> qp_init_attr;</span><br><span class="line"><span class="built_in">memset</span>(&amp;qp_init_attr, <span class="number">0</span>, <span class="built_in">sizeof</span>(qp_init_attr));</span><br><span class="line">qp_init_attr.send_cq = cq;</span><br><span class="line">qp_init_attr.recv_cq = cq;</span><br><span class="line">qp_init_attr.qp_type = IBV_QPT_RC;</span><br><span class="line">qp_init_attr.cap.max_send_wr = <span class="number">1</span>;</span><br><span class="line">qp_init_attr.cap.max_recv_wr = <span class="number">1</span>;</span><br><span class="line">qp_init_attr.cap.max_send_sge = <span class="number">1</span>;</span><br><span class="line">qp_init_attr.cap.max_recv_sge = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ibv_qp</span> *qp = <span class="built_in">ibv_create_qp</span>(pd, &amp;qp_init_attr);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå¹¶å‘ç½‘ç»œæ³¨å†Œç¼“å†²åŒº</span></span><br><span class="line"><span class="type">char</span> *localBuffer = (<span class="type">char</span> *)<span class="built_in">malloc</span>(BUFFER_SIZE);</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ibv_mr</span> *mr = <span class="built_in">ibv_reg_mr</span>(pd, localBuffer, BUFFER_SIZE, IBV_ACCESS_LOCAL_WRITE | IBV_ACCESS_REMOTE_READ | IBV_ACCESS_REMOTE_WRITE);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿æ¥åˆ°è¿œç¨‹ä¸»æœº</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">sockaddr_in</span> remoteAddress;</span><br><span class="line"><span class="built_in">memset</span>(&amp;remoteAddress, <span class="number">0</span>, <span class="built_in">sizeof</span>(remoteAddress));</span><br><span class="line">remoteAddress.sin_family = AF_INET;</span><br><span class="line">remoteAddress.sin_port = <span class="built_in">htons</span>(PORT_NUMBER);</span><br><span class="line"><span class="built_in">inet_pton</span>(AF_INET, SERVER_IP, &amp;remoteAddress.sin_addr);</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">rdma_cm_id</span> *cmId;</span><br><span class="line"><span class="built_in">rdma_create_id</span>(*eventChannel, &amp;cmId, <span class="literal">NULL</span>, RDMA_PS_TCP);</span><br><span class="line"><span class="built_in">rdma_resolve_addr</span>(cmId, <span class="literal">NULL</span>, (<span class="keyword">struct</span> sockaddr *)&amp;remoteAddress, RESOLVE_TIMEOUT_MS);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰å¾…è¿æ¥å®Œæˆ</span></span><br><span class="line"><span class="built_in">rdma_wait_event</span>(*eventChannel, RDMA_CM_EVENT_ESTABLISHED);</span><br><span class="line"><span class="built_in">rdma_ack_cm_event</span>(cmEvent);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–è¿œç¨‹ç¼“å†²åŒºä¿¡æ¯</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ibv_wc</span> wc;</span><br><span class="line"><span class="built_in">ibv_post_recv</span>(qp, &amp;recvWr, &amp;badRecvWr);</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="built_in">ibv_poll_cq</span>(cq, <span class="number">1</span>, &amp;wc);</span><br><span class="line">&#125; <span class="keyword">while</span> (wc.status != IBV_WC_SUCCESS || wc.opcode != IBV_WC_RECV_RDMA_WITH_IMM || wc.imm_data != <span class="built_in">htonl</span>(IMM_DATA));</span><br><span class="line">remoteBufferInfo.rkey = <span class="built_in">ntohl</span>(wc.imm_data &gt;&gt; <span class="number">8</span>);</span><br><span class="line">remoteBufferInfo.vaddr = wc.wr_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†æœ¬åœ°ç¼“å†²åŒºçš„å†…å®¹å†™å…¥è¿œç¨‹ç¼“å†²åŒºï¼ˆå•å‘ï¼‰</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ibv_send_wr</span> sendWr;</span><br><span class="line"><span class="built_in">memset</span>(&amp;sendWr, <span class="number">0</span>, <span class="built_in">sizeof</span>(sendWr));</span><br><span class="line">sendWr.wr_id = <span class="number">0</span>;</span><br><span class="line">sendWr.opcode = IBV_WR_RDMA_WRITE_WITH_IMM;</span><br><span class="line">sendWr.sg_list = &amp;localSge;</span><br><span class="line">sendWr.num_sge = <span class="number">1</span>;</span><br><span class="line">sendWr.send_flags = IBV_SEND_SIGNALED;</span><br><span class="line">sendWr.wr.rdma.remote_addr = remoteBufferInfo.vaddr;</span><br><span class="line">sendWr.wr.rdma.rkey = remoteBufferInfo.rkey;</span><br><span class="line">localSge.addr = (<span class="type">uintptr_t</span>)localBuffer;</span><br><span class="line">localSge.length = BUFFER_SIZE;</span><br><span class="line">localSge.lkey = mr-&gt;lkey;</span><br><span class="line"><span class="built_in">ibv_post_send</span>(qp, &amp;sendWr, &amp;badSendWr);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…³é—­è¿æ¥</span></span><br><span class="line"><span class="built_in">ibv_dereg_mr</span>(mr);</span><br><span class="line"><span class="built_in">free</span>(localBuffer);</span><br><span class="line"><span class="built_in">ibv_destroy_qp</span>(qp);</span><br><span class="line"><span class="built_in">ibv_dealloc_pd</span>(pd);</span><br><span class="line"><span class="built_in">ibv_close_device</span>(context);</span><br></pre></td></tr></table></figure><ul><li>å…¥é—¨çº§æ–‡æ¡£ï¼š<a href="https://zhuanlan.zhihu.com/p/337461037">https://zhuanlan.zhihu.com/p/337461037</a></li><li>æ–‡æ¡£ï¼š<a href="https://docs.kernel.org/infiniband/index.html">https://docs.kernel.org/infiniband/index.html</a></li><li>æ–‡æ¡£ï¼š<a href="http://blog.foool.net/wp-content/uploads/linuxdocs/infiniband.pdf">http://blog.foool.net/wp-content/uploads/linuxdocs/infiniband.pdf</a></li><li>æ–‡æ¡£ï¼š<a href="https://support.bull.com/documentation/byproduct/infra/sw-extremcomp/sw-extremcomp-com/g">https://support.bull.com/documentation/byproduct/infra/sw-extremcomp/sw-extremcomp-com/g</a></li><li>æ–‡æ¡£ï¼š<a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_infiniband_and_rdma_networks/index">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_infiniband_and_rdma_networks/index</a></li><li>åšå®¢ï¼š<a href="https://zhuanlan.zhihu.com/p/337461037">https://zhuanlan.zhihu.com/p/337461037</a></li><li>æ–‡æ¡£ï¼š<a href="https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/7/html/networking_guide/ch-configure_infiniband_and_rdma_networks">https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/7/html/networking_guide/ch-configure_infiniband_and_rdma_networks</a></li><li>çŸ¥ä¹ä¸“æ ï¼š<a href="https://www.zhihu.com/column/c_1231181516811390976">https://www.zhihu.com/column/c_1231181516811390976</a></li><li>çŸ¥ä¹ä¸“æ ï¼š<a href="https://www.zhihu.com/column/rdmatechnology">https://www.zhihu.com/column/rdmatechnology</a></li></ul><p><a href="https://man7.org/linux/man-pages/man3/ibv_reg_mr.3.html">Linux manual page</a></p><h2 id="Command-Line"><a href="#Command-Line" class="headerlink" title="Command-Line"></a>Command-Line</h2><p>æ–‡æ¡£ï¼š<a href="https://docs.nvidia.com/networking/pages/viewpage.action?pageId=43719572">https://docs.nvidia.com/networking/pages/viewpage.action?pageId=43719572</a></p><ul><li><p><code>ibstat</code></p></li><li><p><code>ibhosts</code> - æŸ¥çœ‹æ‰€æœ‰çš„IB hostsã€‚</p></li><li><p><code>ibnetdiscover</code> - discover InfiniBand topology.</p></li><li><p><code>ibv_devices</code> - list RDMA devices.</p></li><li><p><code>ibv_devinof</code> - Print information about RDMA devices available for use from userspace.</p></li><li><p><code>ibv_rc_pingpong</code> - Run a simple ping-pong test over InfiniBand via the reliable connected (RC) transport.</p></li><li><p><code>targetcli</code> - administration shell for storage targets</p><p>  <code>targetcli</code> is  a  shell for viewing, editing, and saving the configuration of the kernelâ€™s target subsystem,<br>  also known as LIO. It enables the administrator to assign local storage resources backed by either files,<br>  volumes, local SCSI devices, or ramdisk, and export them to remote systems via network fabrics, such as iSCSI or FCoE.</p></li><li><p><code>srp_daemon</code> - Discovers and connects to InfiniBand SCSI RDMA Protocol (SRP) targets in an IB fabric.</p></li><li><p><code>ibsrpdm</code> - List InfiniBand SCSI RDMA Protocol (SRP) targets on an IB fabric.</p></li></ul><h2 id="liraries"><a href="#liraries" class="headerlink" title="liraries"></a>liraries</h2><p>devid: device ID library. Refer to <a href="https://docs.oracle.com/cd/E86824_01/html/E54772/libdevid-3lib.html">here</a>.</p><p>ibverbs: ä½¿å¾—ç”¨æˆ·ç©ºé—´è¿›ç¨‹èƒ½å¤Ÿä½¿ç”¨RDMA verbsï¼ˆå³è¿›è¡ŒRDMAæ“ä½œï¼‰ã€‚Refer to <a href="https://www.ibm.com/docs/en/aix/7.2?topic=ofed-libibverbs-library">here</a>.</p><p>dl: Dynamic Loader.</p>]]></content>
      
      
      <categories>
          
          <category> Network </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Singleton</title>
      <link href="/blog/2023/11/30/cplusplus/Singleton/"/>
      <url>/blog/2023/11/30/cplusplus/Singleton/</url>
      
        <content type="html"><![CDATA[<p><a href="https://stackoverflow.com/questions/8623657/multiple-instances-of-singleton-across-shared-libraries-on-linux">Multiple instances of singleton across shared libraries on Linux</a></p>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> syntax </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>printf</title>
      <link href="/blog/2023/11/27/cplusplus/printf/"/>
      <url>/blog/2023/11/27/cplusplus/printf/</url>
      
        <content type="html"><![CDATA[<h2 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h2><p><a href="https://cpp.hotexamples.com/zh/examples/-/-/lprintf/cpp-lprintf-function-examples.html">https://cpp.hotexamples.com/zh/examples/-/-/lprintf/cpp-lprintf-function-examples.html</a></p><ul><li>printf</li><li>lprintf</li><li>fprintf</li><li>sprintf</li><li>vsprintf</li></ul><p>å­—ç¬¦ä¸²å¤„ç†å‡½æ•°<br>bcopy</p><h2 id="éæ‰“å°å­—ç¬¦"><a href="#éæ‰“å°å­—ç¬¦" class="headerlink" title="éæ‰“å°å­—ç¬¦"></a>éæ‰“å°å­—ç¬¦</h2><p>å‚è§ <a href="https://en.cppreference.com/w/cpp/language/escape">Escape sequeneces</a>.</p><pre><code><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str[] = <span class="string">&quot;\x1E&quot;</span>; <span class="comment">// &quot;0x1E&quot; æ˜¯ä¸€ä¸ªéæ‰“å°å­—ç¬¦</span></span><br></pre></td></tr></table></figure></code></pre>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> syntax </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Socket Programming</title>
      <link href="/blog/2023/11/27/net/Socket-Programming/"/>
      <url>/blog/2023/11/27/net/Socket-Programming/</url>
      
        <content type="html"><![CDATA[<h2 id="Files"><a href="#Files" class="headerlink" title="Files"></a>Files</h2><p><code>/etc/services</code>: ç«¯å£åˆ—è¡¨<br><code>/etc/protocols</code>: åè®®åˆ—è¡¨</p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://zhuanlan.zhihu.com/p/392820963">ç«¯å£0çš„ä½œç”¨</a></p>]]></content>
      
      
      <categories>
          
          <category> Network </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tcp/ip </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Makefile usage</title>
      <link href="/blog/2023/11/17/cplusplus/Makefile-usage/"/>
      <url>/blog/2023/11/17/cplusplus/Makefile-usage/</url>
      
        <content type="html"><![CDATA[<h2 id="â€œmake-runâ€-argument"><a href="#â€œmake-runâ€-argument" class="headerlink" title="â€œmake runâ€ argument"></a>â€œmake runâ€ argument</h2><p>See <a href="https://stackoverflow.com/questions/2214575/passing-arguments-to-make-run">here</a>.</p><p><code>@:</code> See <a href="https://unix.stackexchange.com/questions/92978/what-does-this-2-mean-in-shell-scripting">here</a>.</p><p>This works fine for me:</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># If the first argument is &quot;run&quot;...</span></span><br><span class="line"><span class="keyword">ifeq</span> (run,<span class="variable">$(<span class="built_in">firstword</span> <span class="variable">$(MAKECMDGOALS)</span>)</span>)</span><br><span class="line">  <span class="comment"># use the rest as arguments for &quot;run&quot;</span></span><br><span class="line">  RUN_ARGS := <span class="variable">$(<span class="built_in">wordlist</span> 2,$(words <span class="variable">$(MAKECMDGOALS)</span>)</span>,<span class="variable">$(MAKECMDGOALS)</span>)</span><br><span class="line">  <span class="comment"># ...and turn them into do-nothing targets</span></span><br><span class="line">  <span class="comment"># <span class="doctag">TODO:</span> What does the following line mean?</span></span><br><span class="line">  <span class="comment"># $(eval $(RUN_ARGS):;@:)</span></span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;cmd&quot; refers to any command</span></span><br><span class="line"><span class="section">run:</span></span><br><span class="line">cmd <span class="variable">$(RUN_ARGS)</span></span><br></pre></td></tr></table></figure><h2 id="makefileåŒåç›®æ ‡å¤„ç†æ–¹å¼"><a href="#makefileåŒåç›®æ ‡å¤„ç†æ–¹å¼" class="headerlink" title="makefileåŒåç›®æ ‡å¤„ç†æ–¹å¼"></a>makefileåŒåç›®æ ‡å¤„ç†æ–¹å¼</h2><p>å‚è€ƒï¼š</p><ul><li><a href="https://blog.csdn.net/lixiangminghate/article/details/50448664">é“¾æ¥</a></li><li><a href="https://stackoverflow.com/questions/43718595/two-targets-with-the-same-name-in-a-makefile">é“¾æ¥</a></li></ul><p><a href="https://stackoverflow.com/questions/2019989/how-to-assign-the-output-of-a-command-to-a-makefile-variable">makefileå°†å‘½ä»¤ç»“æœèµ‹å€¼ç»™å˜é‡</a></p><h2 id="Makefileä¸­çŸ­åˆ’çº¿"><a href="#Makefileä¸­çŸ­åˆ’çº¿" class="headerlink" title="Makefileä¸­çŸ­åˆ’çº¿"></a>Makefileä¸­çŸ­åˆ’çº¿</h2><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">all:</span></span><br><span class="line">-/bin/rm -rf *.log</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œâ€<code>-/bin/rm</code>â€œçš„çŸ­åˆ’çº¿â€<code>-</code>â€œæ˜¯ä¸€ä¸ªç‰¹æ®Šå‰ç¼€ï¼Œè¡¨ç¤ºå¿½ç•¥å‘½ä»¤æ‰§è¡Œè¿‡ç¨‹çš„é”™è¯¯ã€‚</p><h2 id="ä¸ºæ¯ä¸ªæºæ–‡ä»¶ç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œç¨‹åº"><a href="#ä¸ºæ¯ä¸ªæºæ–‡ä»¶ç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œç¨‹åº" class="headerlink" title="ä¸ºæ¯ä¸ªæºæ–‡ä»¶ç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œç¨‹åº"></a>ä¸ºæ¯ä¸ªæºæ–‡ä»¶ç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œç¨‹åº</h2><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SRCS = <span class="variable">$(<span class="built_in">wildcard</span> *.c)</span></span><br><span class="line"></span><br><span class="line"><span class="section">all: $(SRCS:.c=)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Unnecessary, as the default rules are adequate.</span></span><br><span class="line"><span class="section">.c:</span></span><br><span class="line">gcc <span class="variable">$(CPFLAGS)</span> <span class="variable">$&lt;</span> -o <span class="variable">$@</span></span><br></pre></td></tr></table></figure><p>æœ€åä¸¤è¡Œå…¶å®ä¸éœ€è¦ï¼Œé»˜è®¤è§„åˆ™å·²ç»è¶³å¤Ÿäº†ã€‚</p><p>å…¶ä¸­ï¼Œ<code>$(SRCS:.c=.o)</code>è¡¨ç¤ºå°†å˜é‡<code>SRCS</code>ä¸­çš„æ¯ä¸ªå•è¯ï¼ˆä»¥ç©ºæ ¼åˆ†å‰²ï¼‰ä¸­çš„<code>.c</code>æ›¿æ¢ä¸º<code>.o</code>ã€‚ä»¥ä¸Šä»£ç åˆ™æ˜¯å°†æ‰€æœ‰<code>.c</code>éƒ½å»æ‰ã€‚</p><h2 id="æ‹¬å·"><a href="#æ‹¬å·" class="headerlink" title="æ‹¬å·"></a>æ‹¬å·</h2><p>å¼•ç”¨å˜é‡æ—¶ï¼ŒShellä½¿ç”¨å¤§æ‹¬å·ï¼ŒMakefileåˆ™å¤§æ‹¬å·å’Œå°æ‹¬å·éƒ½è¡Œã€‚ä½†æ˜¯åœ¨å‘½ä»¤ä¸­ä½¿ç”¨Shellå˜é‡å°±éœ€è¦ä½¿ç”¨å¤§æ‹¬å·ã€‚</p><p><a href="https://blog.csdn.net/bigmarco/article/details/6687337">å‚è€ƒ</a></p>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> build </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shell Configuration</title>
      <link href="/blog/2023/11/13/linux/Shell-Configuration/"/>
      <url>/blog/2023/11/13/linux/Shell-Configuration/</url>
      
        <content type="html"><![CDATA[<h2 id="Color-Scheme"><a href="#Color-Scheme" class="headerlink" title="Color Scheme"></a>Color Scheme</h2><p>Refer to <a href="https://askubuntu.com/questions/466198/how-do-i-change-the-color-for-directories-with-ls-in-the-console">the link</a>.</p><p>Add these three lines to ~&#x2F;.bashrc</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ vi ~/.bashrc</span><br><span class="line"><span class="built_in">export</span> LS_OPTIONS=<span class="string">&#x27;--color=auto&#x27;</span></span><br><span class="line"><span class="comment"># dircolors - color set for ls</span></span><br><span class="line"><span class="built_in">eval</span> <span class="string">&quot;<span class="subst">$(dircolors -b)</span>&quot;</span></span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">ls</span>=<span class="string">&#x27;ls $LS_OPTIONS&#x27;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Virtual memory</title>
      <link href="/blog/2023/11/07/linux/Virtual-memory/"/>
      <url>/blog/2023/11/07/linux/Virtual-memory/</url>
      
        <content type="html"><![CDATA[<h2 id="Terms"><a href="#Terms" class="headerlink" title="Terms"></a>Terms</h2><p>resident set size (RSS)</p><h2 id="Comands"><a href="#Comands" class="headerlink" title="Comands"></a>Comands</h2><h2 id="File"><a href="#File" class="headerlink" title="File"></a>File</h2><p>&#x2F;proc&#x2F;self&#x2F;statm</p><h3 id="top"><a href="#top" class="headerlink" title="top"></a>top</h3><h4 id="Fields"><a href="#Fields" class="headerlink" title="Fields"></a>Fields</h4><table><thead><tr><th>TIME+<sup><a href="%5Bwhat-does-time-cpu-time-hundredth-in-top-mean%5D(https://superuser.com/questions/1148884/what-does-time-cpu-time-hundredth-in-top-mean/)">1</a></sup></th><th>TIME</th></tr></thead><tbody><tr><td><code>5432:01</code> means â€œ5432 minutes and 1 secondâ€</td><td><code>90,32</code> means â€œ90 hours and 32 minutesâ€</td></tr><tr><td><code>25:15.20</code> means â€œ25 minutes, 15 seconds and 20% of 1 secondâ€</td><td><code>25:15</code> means â€œ25 minutes and 15 secondsâ€</td></tr></tbody></table><h3 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h3><h4 id="Files"><a href="#Files" class="headerlink" title="Files"></a>Files</h4><p><code>TIME</code>: the cumulated CPU time in [DD-]hh:mm:ss format (time&#x3D;TIME)</p><table><thead><tr><th>Field</th><th>value &amp; means</th></tr></thead><tbody><tr><td><code>TIME</code></td><td><code>1-18:09:38</code> means â€œ1 day, 18 hours, 9 minutes and 38 secondsâ€</td></tr></tbody></table><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://serverfault.com/questions/138427/what-does-virtual-memory-size-in-top-mean">what-does-virtual-memory-size-in-top-mean</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> memory </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>KiB vs KB vs kB</title>
      <link href="/blog/2023/11/07/misc/KiB-vs-KB-vs-kB/"/>
      <url>/blog/2023/11/07/misc/KiB-vs-KB-vs-kB/</url>
      
        <content type="html"><![CDATA[<p>See the article: <a href="https://physics.nist.gov/cuu/Units/binary.html">Prefixes for binary multiples</a></p><p>Table:</p><table border="0" cellspacing="0" cellpadding="3"><tbody><tr><td colspan="5"><center><hr noshade="" size="2"><b><font face="Myriad Roman,Syntax,Arial,Helvetica"><font color="#006633"><font size="+1">Prefixesfor binary multiples</font></font></font></b><hr></center></td></tr><tr><td colspan="5"><table border="0" cellspacing="0" cellpadding="3"><tbody><tr><td><b>&nbsp;Factor&nbsp;</b></td><td><b>Name&nbsp;</b></td><td><b>Symbol&nbsp;</b></td><td><b>Origin</b></td><td><b>Derivation&nbsp;</b></td></tr><tr bgcolor="#D0F0C8"><td>&nbsp;2<sup>10</sup></td><td>kibi</td><td>Ki</td><td>kilobinary: (2<sup>10</sup>)<sup>1</sup></td><td>kilo: (10<sup>3</sup>)<sup>1</sup></td></tr><tr><td>&nbsp;2<sup>20</sup></td><td>mebi</td><td>Mi</td><td>megabinary: (2<sup>10</sup>)<sup>2&nbsp;</sup></td><td>mega: (10<sup>3</sup>)<sup>2</sup></td></tr><tr bgcolor="#D0F0C8"><td>&nbsp;2<sup>30</sup></td><td>gibi</td><td>Gi</td><td>gigabinary: (2<sup>10</sup>)<sup>3</sup></td><td>giga: (10<sup>3</sup>)<sup>3</sup></td></tr><tr><td>&nbsp;2<sup>40</sup></td><td>tebi</td><td>Ti</td><td>terabinary: (2<sup>10</sup>)<sup>4</sup></td><td>tera: (10<sup>3</sup>)<sup>4</sup></td></tr><tr bgcolor="#D0F0C8"><td>&nbsp;2<sup>50</sup></td><td>pebi</td><td>Pi</td><td>petabinary: (2<sup>10</sup>)<sup>5</sup></td><td>peta: (10<sup>3</sup>)<sup>5</sup></td></tr><tr><td>&nbsp;2<sup>60</sup></td><td>exbi</td><td>Ei</td><td>exabinary: (2<sup>10</sup>)<sup>6</sup></td><td>exa: (10<sup>3</sup>)<sup>6</sup></td></tr></tbody></table></td></tr><tr><td colspan="5"><hr noshade="" size="1"></td></tr><tr><td align="CENTER" colspan="5"><table border="0" cellspacing="0" cellpadding="3" width="100%"><tbody><tr><td align="CENTER" colspan="2"><b>Examples and comparisons with SI prefixes</b></td></tr><tr><td align="RIGHT" bgcolor="#D0F0C8">one <b>kibibit</b></td><td bgcolor="#D0F0C8">&nbsp;1 Kibit = 2<sup>10</sup> bit = <b>1024 bit</b></td></tr><tr><td align="RIGHT">one <b>kilobit</b></td><td>&nbsp;1 kbit = 10<sup>3</sup> bit = <b>1000 bit</b></td></tr><tr>  <td align="RIGHT" bgcolor="#D0F0C8">one <strong>byte</strong></td>    <td bgcolor="#D0F0C8">&nbsp;1 B = 2<sup>3</sup> bit = <strong>8 bit</strong></td></tr><tr><td align="RIGHT">one <b>mebibyte</b></td><td>&nbsp;1 MiB = 2<sup>20</sup> B = <b>1 048 576 B</b></td></tr><tr><td align="RIGHT" bgcolor="#D0F0C8">one <b>megabyte</b></td><td bgcolor="#D0F0C8">&nbsp;1 MB = 10<sup>6</sup> B = <b>1 000 000 B</b></td></tr><tr><td align="RIGHT">one <b>gibibyte</b></td><td>&nbsp;1 GiB = 2<sup>30</sup> B = <b>1 073 741 824B</b></td></tr><tr><td align="RIGHT" bgcolor="#D0F0C8">one <b>gigabyte</b></td><td bgcolor="#D0F0C8">&nbsp;1 GB = 10<sup>9</sup> B = <b>1 000 000 000 B</b></td></tr></tbody></table><hr noshade="" size="1"></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> concepts </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>variadic function</title>
      <link href="/blog/2023/11/03/cplusplus/variadic-function/"/>
      <url>/blog/2023/11/03/cplusplus/variadic-function/</url>
      
        <content type="html"><![CDATA[<h2 id="Variadic-function-in-C"><a href="#Variadic-function-in-C" class="headerlink" title="Variadic function in C"></a>Variadic function in C</h2><p>See more: <a href="https://www.geeksforgeeks.org/variadic-functions-in-c/">Variadic functions in C</a></p><h3 id="vprintf"><a href="#vprintf" class="headerlink" title="vprintf"></a><code>vprintf</code></h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdarg.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myPrintf</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* format, ...)</span> </span>&#123;</span><br><span class="line">    va_list args;</span><br><span class="line">    <span class="built_in">va_start</span>(args, format);</span><br><span class="line">    <span class="built_in">vprintf</span>(format, args);</span><br><span class="line">    <span class="built_in">va_end</span>(args);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">long</span> <span class="type">int</span> time = <span class="number">100</span>;</span><br><span class="line">  <span class="built_in">myPrintf</span>(<span class="string">&quot;Elapsed time is: %ld seconds.\n&quot;</span>, time);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Output:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ./a.out </span><br><span class="line">Elapsed time is: 100 seconds.</span><br></pre></td></tr></table></figure><h3 id="ap-list-vsnprintf"><a href="#ap-list-vsnprintf" class="headerlink" title="ap_list + vsnprintf"></a><code>ap_list</code> + <code>vsnprintf</code></h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdarg.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/time.h&gt;</span> <span class="comment">// gettimeofday</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">(<span class="type">int</span> id, <span class="type">const</span> <span class="type">char</span> *fmt, ...)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">constexpr</span> <span class="type">int</span> MAXLEN = <span class="number">1024</span>;</span><br><span class="line">    <span class="type">char</span> buf[MAXLEN];</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line">    n = <span class="built_in">snprintf</span>(buf, MAXLEN, <span class="string">&quot;INFO(%d): &quot;</span>, id);</span><br><span class="line"></span><br><span class="line">    va_list ap;</span><br><span class="line">    <span class="comment">// ap will be the pointer to the last fixed argument of the variadic function.</span></span><br><span class="line">    <span class="built_in">va_start</span>(ap, fmt);</span><br><span class="line">    n += <span class="built_in">vsnprintf</span>(buf + n, MAXLEN - n, fmt, ap);</span><br><span class="line">    <span class="comment">// This ends the traversal of the variadic function arguments.</span></span><br><span class="line">    <span class="built_in">va_end</span>(ap);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">timeval</span> tv;</span><br><span class="line">    <span class="built_in">gettimeofday</span>(&amp;tv, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">tm</span> tm;</span><br><span class="line">    <span class="built_in">localtime_r</span>(&amp;tv.tv_sec, &amp;tm);</span><br><span class="line">    <span class="type">char</span> timebuf[<span class="number">64</span>];</span><br><span class="line">    <span class="comment">// size_t strftime(char *s, size_t max, const char *format, const struct tm *tm);</span></span><br><span class="line">    <span class="built_in">snprintf</span>(timebuf, MAXLEN - n, <span class="string">&quot;%d-%02d-%02d %d:%d:%d.%ld %s&quot;</span>,</span><br><span class="line">             tm.tm_year + <span class="number">1900</span>, tm.tm_mon + <span class="number">1</span>, tm.tm_mday,</span><br><span class="line">             tm.tm_hour, tm.tm_min, tm.tm_sec, tv.tv_usec, tm.tm_zone);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(buf, timebuf);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span>* name = <span class="string">&quot;Tony&quot;</span>;</span><br><span class="line">    <span class="comment">// &quot;%%s&quot; is a placeholder of the timestamp for the vsnprintf function.</span></span><br><span class="line">    <span class="built_in">foo</span>(<span class="number">123</span>, <span class="string">&quot;Hello %s at %%s\n&quot;</span>, name);</span><br><span class="line">    <span class="comment">// Will print:</span></span><br><span class="line">    <span class="comment">// INFO(123): Hello Tony at 2023-10-04 21:25:23.682853 CST</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="va-list-va-arg"><a href="#va-list-va-arg" class="headerlink" title="va_list + va_arg"></a><code>va_list</code> + <code>va_arg</code></h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdarg.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">bool</span> debug = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">printDebugLog</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* fmt, ...)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (debug) &#123;</span><br><span class="line">        <span class="comment">// The first argument doesn&#x27;t need to traverse via va_list.</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;fmt=%s\n&quot;</span>, fmt);</span><br><span class="line">        va_list ap;</span><br><span class="line">        <span class="built_in">va_start</span>(ap, fmt);</span><br><span class="line">        <span class="type">long</span> <span class="type">int</span> t = <span class="built_in">va_arg</span>(ap, <span class="type">long</span> <span class="type">int</span>);</span><br><span class="line">        <span class="built_in">va_end</span>(ap);</span><br><span class="line">        <span class="built_in">printf</span>(fmt, t);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">long</span> <span class="type">int</span> time = <span class="number">100</span>;</span><br><span class="line">  <span class="built_in">printDebugLog</span>(<span class="string">&quot;Elapsed time is: %ld seconds.\n&quot;</span>, time);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Output:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ./a.out </span><br><span class="line"><span class="built_in">fmt</span>=Elapsed time is: %ld seconds.</span><br><span class="line"></span><br><span class="line">Elapsed time is: 100 seconds.</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> syntax </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>namespace in c++</title>
      <link href="/blog/2023/11/02/cplusplus/namespace-in-cplusplus/"/>
      <url>/blog/2023/11/02/cplusplus/namespace-in-cplusplus/</url>
      
        <content type="html"><![CDATA[<h2 id="inline-namespace"><a href="#inline-namespace" class="headerlink" title="inline namespace"></a>inline namespace</h2><p>You can define and specialize members of an <code>inline namespace</code> as if they were also members of the enclosing namespace.<br><code>inline namespace</code> è¡¨ç¤ºè¯¥å‘½åç©ºé—´ä¹Ÿæ˜¯ä¸Šçº§å‘½åç©ºé—´çš„æˆå‘˜ã€‚<br>å‚è€ƒ: <a href="https://www.ibm.com/docs/en/zos/2.2.0?topic=only-inline-namespace-definitions-c11">Inline namespace definitions (C++11)</a></p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> A &#123;</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> USE_INLINE_B</span></span><br><span class="line">   <span class="keyword">inline</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">   <span class="keyword">namespace</span> B &#123;</span><br><span class="line">      <span class="function"><span class="type">int</span> <span class="title">foo</span><span class="params">(<span class="type">bool</span>)</span> </span>&#123; <span class="keyword">return</span> <span class="number">1</span>; &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="type">int</span> <span class="title">foo</span><span class="params">(<span class="type">int</span>)</span> </span>&#123; <span class="keyword">return</span> <span class="number">2</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> A::<span class="built_in">foo</span>(<span class="literal">true</span>); <span class="comment">// å¦‚æœUSE_INLINE_Bä¸º0ï¼Œåˆ™è¯¥å¥å‡ºé”™ï¼šæ‰¾ä¸åˆ°å®šä¹‰ã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Unnamed-anonymous-namespaces-vs-static-in-namespace"><a href="#Unnamed-anonymous-namespaces-vs-static-in-namespace" class="headerlink" title="Unnamed &#x2F; anonymous namespaces vs static in namespace"></a>Unnamed &#x2F; anonymous namespaces vs static in namespace</h2><p>Refer to: <a href="https://medium.com/pranayaggarwal25/unnamed-namespaces-static-f1498741c527">Unnamed &#x2F; anonymous namespaces vs static in namespace</a></p>]]></content>
      
      
      <categories>
          
          <category> c/cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> syntax </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>English idiom</title>
      <link href="/blog/2023/11/02/english/english-idiom/"/>
      <url>/blog/2023/11/02/english/english-idiom/</url>
      
        <content type="html"><![CDATA[<ol><li>at a drop of a hat: æ¯«ä¸çŠ¹è±«ã€‚è§<a href="(https://dictionary.cambridge.org/us/dictionary/english/at-the-drop-of-a-hat)">Cambridge dict</a>.</li><li>beyond your ken: è¶…è¿‡ä½ çš„è®¤çŸ¥èŒƒç•´<br>ken: the range of perception, understanding or knowledge. å‚è€ƒ<a href="https://www.merriam-webster.com/dictionary/ken">è¯å…¸</a>ã€‚</li></ol><blockquote><p>Sheldon: Woman, youâ€™re playing with forces beyond your ken.<br>Penny: Yeah, your ken can kiss my Barbie.</p></blockquote><p>Pennyæƒ³è¦æ°”æ°”Sheldonï¼Œå¥¹æ•…æ„æŠŠkenæ›²è§£æˆç©å¶ï¼Œè¯´ï¼šä½ çš„kenå¯ä»¥å’Œæˆ‘èŠ­æ¯”å¨ƒå¨ƒè°ˆæ‹çˆ±ã€‚<br>å‡ºå¤„: <a href="https://forum.wordreference.com/threads/your-ken-can-kiss-my-barbie.3999874/">word reference</a>ã€‚</p><ol start="3"><li>a rule of thumb: ç»éªŒæ³•åˆ™ã€‚è§<a href="https://www.collinsdictionary.com/zh/dictionary/english/a-rule-of-thumb">æŸ¯æ—æ–¯è¯å…¸</a>ã€‚</li><li>vice versa: åä¹‹äº¦ç„¶ã€‚è¿‘ä¹‰è¯ï¼šconversely.</li><li>on (a) par with: ç›¸å½“ï¼Œå¯¹ç­‰ï¼Œå¯åª²ç¾ã€‚See more: <a href="https://www.merriam-webster.com/dictionary/on%20%28a%29%20par%20with">on (a) par with</a></li><li>IMHO: In my humble opinion æ•æˆ‘ç›´è¨€ã€‚humble è°¦é€Šçš„ã€‚</li><li>AFAIK: As far as I know æ®æˆ‘æ‰€çŸ¥ã€‚</li><li>miss the forest for the trees. &#x2F; not see the forest for the trees. åªè§æ ‘æœ¨ã€ä¸è§æ£®æ—ã€‚å‚è§<a href="https://dictionary.cambridge.org/us/dictionary/english/not-see-the-forest-for-the-trees">å‰‘æ¡¥è¯å…¸</a>ï¼što be unable to get a general understanding of a situation because you are too worried about the details å› å¤ªæ³¨é‡ç»†èŠ‚è€Œæ— æ³•ä»æ•´ä½“è§’åº¦çœ‹å¾…é—®é¢˜ã€‚</li><li>irrespective of ä¸è®º</li><li>sell sb out. å‡ºå–æŸäººã€‚</li><li>mood swings. æƒ…ç»ªæ³¢åŠ¨ã€‚ swing v. æ‘‡æ‘†ï¼›swings n. ç§‹åƒã€‚</li><li>buy thatâ€¦ ç›¸ä¿¡â€¦â€¦ e.g. I didnâ€™t think the doctor was gonna buy thatâ€¦</li><li>Roger that. &#x2F; Copy that. <a href="https://medium.com/@methark/copy-that-or-roger-that-whats-the-difference-63ad1367ff22">å‚è€ƒ</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> English </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vocabulary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Muder on The Orient Express</title>
      <link href="/blog/2023/10/28/english/Muder-on-The-Orient-Express/"/>
      <url>/blog/2023/10/28/english/Muder-on-The-Orient-Express/</url>
      
        <content type="html"><![CDATA[<h2 id="äººç‰©"><a href="#äººç‰©" class="headerlink" title="äººç‰©"></a>äººç‰©</h2><p>Daisy Armstrong<br>Miss Mary Debenham<br>Colonel Arbuthnott<br>Hercule Poirot<br>Lieutenant Dubosc</p><h2 id="å°è¯"><a href="#å°è¯" class="headerlink" title="å°è¯"></a>å°è¯</h2><p>1930<br>The Armstrong Home, Long Island, N.Y.</p><p>Armstrong Baby Kidnapped.<br>Crushed toys, crushed hopes.</p><p>Baby taken in dead of night.<br>Armstrong Household Turmoil.<br>Baby Daisy Taken from Armstrong Home.<br>Staff Wakened But Hopeless.</p><p>DAISY ARMSTRONG - Child of Colonel and Mrs. Hamish Armstrong was dramatically kidnapped last night while her parents were being driven to the airport by their chauffeur.</p><p>The discover of the missing child was made by the chauffeur on returning from the airport where he found the family nurse bound and gagged in the room next to Baby Daisyâ€™s bedroom.</p><p>The police were informed immediately and investigations began at once. They described kidnapping as one of the most vicious crimous that can be commited.</p><p>Daisy found slain.</p><p>5 years later<br>The Asian side of Istanbul.</p><p>Miss Mary Debenham</p><p>Salacak</p><p>Welcome aboard.</p><p>Bosporus Ferry will shortly depart from Istanbul Sirkeci Station, connecting with the Orient Express.</p><p>Hereâ€™s your ticket, Monsieur Poirot. Iâ€™m afraid youâ€™ve still got another hour.</p><p>Well, then, please do not wait.</p><p>Not wait? After all youâ€™ve done for us, Monsieur Poriot? My generalâ€™s orders were to ensure your safe departure. He also wished me to thank you again for saving the honor of the British garrison in Jordan. The brigadierâ€™s confession was opportune. I say, how did you do it? Was it the old thumbscrew, you know, the rack?</p><p>Chop-chop</p><p>I hope we did the right thing booking you into a hotel on the European side rather than the Asia side.<br>æˆ‘å¸Œæœ›æˆ‘ä»¬ç»™ä½ é¢„è®¢çš„æ˜¯æ¬§æ´²é…’åº—è€Œä¸æ˜¯äºšæ´²é…’åº—æ˜¯æ­£ç¡®çš„ã€‚</p><p>I have no prejudice with either continent.</p><p>The crossing should be pleasant. The Borporus is always calm.<br>ç©¿è¡Œåº”è¯¥ä¼šå¾ˆæ„‰å¿«ã€‚åšæ–¯æ™®é²æ–¯æµ·å³¡æ€»æ˜¯å¾ˆå¹³é™ã€‚</p><p>You have crossed by the ferry?<br>ä½ ä¹˜æ¸¡èˆ¹ç©¿æ¸¡è¿‡ï¼Ÿ</p><h2 id="è¯æ±‡"><a href="#è¯æ±‡" class="headerlink" title="è¯æ±‡"></a>è¯æ±‡</h2><p>Daisy: é›èŠï¼›äººåï¼ˆé»›è¥¿ï¼‰ã€‚<br>kidnapped: ç»‘æ¶<br>crushed: ç ´ç­çš„ï¼Œå‹ç¢çš„<br>dead of night: æ·±å¤œæ—¶åˆ†ï¼Œthe quietest, darkest part of the night.<br>household: å®¶åº­ï¼›æˆ·ï¼›å®¶ï¼›å®¶æ—ï¼›å®¶äºº<br>turmoil: n. åŠ¨è¡ï¼›åŠ¨ä¹±<br>staff: å·¥ä½œäººå‘˜ã€‚<br>wakened: waken v. é†’æ¥ã€‚wakened æ˜¯wakençš„è¿‡å»å¼å’Œè¿‡å»åˆ†è¯ã€‚<br>chauffeur: ç¾&#x2F;ÊƒoÊŠËˆfÉË&#x2F; è‹±&#x2F;ËˆÊƒÉ™ÊŠ.fÉ™r&#x2F; å¸æœºã€‚<br>bound: è¿™é‡Œæ˜¯bindçš„è¿‡å»å¼å’Œè¿‡å»åˆ†è¯ï¼Œç»‘å®šã€æ†ç»‘ã€‚<br>gag: n.&#x2F;v. å µå˜´ï¼›æ’ç§‘æ‰“è¯¨ã€‚<br>vicious: æ¶æ¯’çš„ã€‚<br>slay: To kill in a violent way. æ®‹å¿æ€å®³ã€‚<br>Istanbul: ä¼Šæ–¯å¦å¸ƒå°”ï¼Œä¸ºåœŸè€³å…¶é¦–éƒ½ç›´è‡³1923å¹´ã€‚<br>Salacak: garrison: A group of soliders living in or defending a town or building, or the building that the soliders live in. å®ˆå†›ï¼›å®ˆå¤‡è¥åœ°ã€‚<br>Jordan: çº¦æ—¦ï¼ˆè¥¿äºšå›½å®¶ï¼‰ã€‚<br>brigadier: è‹±&#x2F;ËŒbrÉªÉ¡É™ËˆdÉªÉ™(r)&#x2F; ç¾&#x2F;ËŒbrÉªÉ¡É™ËˆdÉªr&#x2F; å‡†å°†ã€‚<br>confession: n. å¦ç™½ï¼›å¿æ‚”ï¼›è®¤ç½ªã€‚<br>opportune: è‹±&#x2F;ËˆÉ’pÉ™tjuËn&#x2F; ç¾&#x2F;ËŒÉ‘ËpÉ™rËˆtuËn&#x2F; é€‚å½“çš„ï¼›åŠæ—¶çš„ã€‚<br>thumbscrew: èºä¸ï¼›æ‹§ç´§ ã€‚<br>rack: chop-chop: chop v.&#x2F;n. ç ï¼›å‘ä¸‹çŒ›å‡»ã€‚chop-chop èµ¶å¿«ï¼Œå¿«ç‚¹ã€‚<br>Bosporus Strait: åšæ–¯æ™®é²æ–¯æµ·å³¡ï¼Œåˆç§°ä¼Šæ–¯å¦å¸ƒå°”æµ·å³¡ï¼Œä»‹äºæ¬§æ´²ä¸äºšæ´²ä¹‹é—´çš„æµ·å³¡ã€‚å®ƒé•¿çº¦30å…¬é‡Œï¼Œæœ€å®½å¤„å®½çº¦3,700ç±³ï¼Œæœ€çª„å¤„å®½çº¦700ç±³ã€‚åŒ—è¿é»‘æµ·ï¼Œå—é€šé©¬å°”é©¬æ‹‰æµ·ï¼ˆåœŸè€³å…¶å†…æµ·ï¼‰ï¼ŒåœŸè€³å…¶ç¬¬ä¸€å¤§åŸä¼Šæ–¯å¦å ¡å³éš”ç€åšæ–¯æ™®é²æ–¯æµ·å³¡ä¸å°äºšç»†äºšåŠå²›ç›¸æœ›ï¼Œæ˜¯é»‘æµ·æ²¿å²¸å›½å®¶å‡ºæµ·ç¬¬ä¸€å…³å£ï¼Œä¹Ÿæ˜¯è¿æ¥é»‘æµ·ä»¥åŠåœ°ä¸­æµ·çš„å”¯ä¸€èˆªé“ã€‚å› æ­¤ï¼Œä¿„ç½—æ–¯çš„é»‘æµ·èˆ°é˜Ÿå¿…é¡»é€šè¿‡åšæ–¯æ™®é²æ–¯æµ·å³¡æ‰èƒ½å‰å¾€åœ°ä¸­æµ·ã€‚<br>ferry: n.&#x2F;v. æ¸¡èˆ¹ï¼›æ‘†æ¸¡</p>]]></content>
      
      
      <categories>
          
          <category> English </category>
          
      </categories>
      
      
        <tags>
            
            <tag> movie </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
